# TSPL1001 V2014 R1 Course Guide_July 2017 MD

SMARTPLANT® P&ID

SETUP AND CUSTOMIZATION COURSE GUIDE

Version 2014 R1

July 2017

DPID2-TP-100031A

- 
    - 

**Copyright**

Copyright © 1999-2017 Hexagon PPM, a division of Intergraph Corporation. All rights reserved.

Including software, documentation, file formats, and audiovisual displays; may be used pursuant to applicable software license agreement; contains confidential and proprietary information of Intergraph and/or third parties which is protected by copyright law, trade secret law, and international treaty, and may not be provided or otherwise made available without proper authorization from Intergraph Corporation.

**U.S. Government Restricted Rights Legend**

Use, duplication, or disclosure by the government is subject to restrictions as set forth below. For civilian agencies: This was developed at private expense and is “restricted computer software” submitted with restricted rights in accordance with subparagraphs (a) through (d) of the Commercial Computer Software - Restricted Rights clause at 52.227-19 of the Federal Acquisition Regulations (“FAR”) and its successors, and is unpublished and all rights are reserved under the copyright laws of the United States. For units of the Department of Defense (“DoD”): This is “commercial computer software” as defined at DFARS

252.227-7014 and the rights of the Government are as specified at DFARS 227.7202-3.

Unpublished - rights reserved under the copyright laws of the United States.

Intergraph Corporation

305 Intergraph Way

Madison, AL 35758

**Documentation**

Documentation shall mean, whether in electronic or printed form, User’s Guides, Installation Guides, Reference Guides, Administrator’s Guides, Customization Guides, Programmer’s Guides, Configuration Guides and Help Guides delivered with a particular software product.

**Other Documentation**

Other Documentation shall mean, whether in electronic or printed form and delivered with software or on Intergraph Smart Support, SharePoint, or box.net, any documentation related to work processes, workflows, and best practices that is provided by Intergraph as guidance for using a software product.

**Terms of Use**

1. 

Use of a software product and Documentation is subject to the Software License Agreement (“SLA”) delivered with the software product unless the Licensee has a valid signed license for this software product with Intergraph Corporation. If the Licensee has a valid signed license for this software product with Intergraph Corporation, the valid signed license shall take precedence and govern the use of this software product and Documentation. Subject to the terms contained within the applicable license agreement, Intergraph Corporation gives Licensee permission to print a reasonable number of copies of the Documentation as defined in the applicable license agreement and delivered with the software product for Licensee’s internal, non-commercial use. The Documentation may not be printed for resale or redistribution.

1. 

For use of Documentation or Other Documentation where end user does not receive a SLA or does not have a valid license agreement with Intergraph, Intergraph grants the Licensee a non-exclusive license to use the Documentation or Other Documentation for Licensee’s internal non-commercial use. Intergraph Corporation gives Licensee permission to print a reasonable number of copies of Other Documentation for Licensee’s internal, non-commercial use. The Other Documentation may not be printed for resale or redistribution. This license contained in this subsection b) may be terminated at any time and for any reason by Intergraph Corporation by giving written notice to Licensee.

**Disclaimer of Warranties**

Except for any express warranties as may be stated in the SLA or separate license or separate terms and conditions, Intergraph Corporation disclaims any and all express or implied warranties including, but not limited to the implied warranties of merchantability and fitness for a particular purpose and nothing stated in, or implied by, this document or its contents shall be considered or deemed a modification or amendment of such disclaimer. Intergraph believes the information in this publication is accurate as of its publication date.

The information and the software discussed in this document are subject to change without notice and are subject to applicable technical product descriptions. Intergraph Corporation is not responsible for any error that may appear in this document.

The software, Documentation and Other Documentation discussed in this document are furnished under a license and may be used or copied only in accordance with the terms of this license. THE USER OF THE SOFTWARE IS EXPECTED TO MAKE THE FINAL

EVALUATION AS TO THE USEFULNESS OF THE SOFTWARE IN HIS OWN ENVIRONMENT.

- 
    - 

Intergraph is not responsible for the accuracy of delivered data including, but not limited to, catalog, reference and symbol data.

Users should verify for themselves that the data is accurate and suitable for their project work.

**Limitation of Damages**

IN NO EVENT WILL INTERGRAPH CORPORATION BE LIABLE FOR ANY DIRECT, INDIRECT, CONSEQUENTIAL INCIDENTAL, SPECIAL, OR PUNITIVE DAMAGES, INCLUDING BUT NOT LIMITED TO, LOSS OF USE OR PRODUCTION, LOSS OF

REVENUE OR PROFIT, LOSS OF DATA, OR CLAIMS OF THIRD PARTIES, EVEN IF INTERGRAPH CORPORATION HAS BEEN

ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

UNDER NO CIRCUMSTANCES SHALL INTERGRAPH CORPORATION’S LIABILITY EXCEED THE AMOUNT THAT

INTERGRAPH CORPORATION HAS BEEN PAID BY LICENSEE UNDER THIS AGREEMENT AT THE TIME THE CLAIM IS

MADE. EXCEPT WHERE PROHIBITED BY APPLICABLE LAW, NO CLAIM, REGARDLESS OF FORM, ARISING OUT OF OR IN

CONNECTION WITH THE SUBJECT MATTER OF THIS DOCUMENT MAY BE BROUGHT BY LICENSEE MORE THAN TWO (2) YEARS AFTER THE EVENT GIVING RISE TO THE CAUSE OF ACTION HAS OCCURRED.

IF UNDER THE LAW RULED APPLICABLE ANY PART OF THIS SECTION IS INVALID, THEN INTERGRAPH LIMITS ITS

LIABILITY TO THE MAXIMUM EXTENT ALLOWED BY SAID LAW.

**Export Controls**

Intergraph Corporation’s commercial-off-the-shelf software products, customized software and/or third-party software, including any technical data related thereto (“Technical Data”), obtained from Intergraph Corporation, its subsidiaries or distributors, is subject to the export control laws and regulations of the United States of America. Diversion contrary to U.S. law is prohibited. To the extent prohibited by United States or other applicable laws, Intergraph Corporation software products, customized software, Technical Data, and/or third-party software, or any derivatives thereof, obtained from Intergraph Corporation, its subsidiaries or distributors must not be exported or re-exported, directly or indirectly (including via remote access) under the following circumstances: a.

To Cuba, Iran, North Korea, the Crimean region of Ukraine, or Syria, or any national of these countries or territories.

1. 

To any person or entity listed on any United States government denial list, including, but not limited to, the United States Department of Commerce Denied Persons, Entities, and Unverified Lists, the United States Department of Treasury Specially Designated Nationals List, and the United States Department of State Debarred List (https://build.export.gov/main/ecr/eg_main_023148).

1. 

To any entity when Customer knows, or has reason to know, the end use of the software product, customized software, Technical Data and/or third-party software obtained from Intergraph Corporation, its subsidiaries or distributors is related to the design, development, production, or use of missiles, chemical, biological, or nuclear weapons, or other un-safeguarded or sensitive nuclear uses.

1. 

To any entity when Customer knows, or has reason to know, that an illegal reshipment will take place.

Any questions regarding export/re-export of relevant Intergraph Corporation software product, customized software, Technical Data and/or third-party software obtained from Intergraph Corporation, its subsidiaries or distributors, should be addressed to PPM’s Export Compliance Department, 305 Intergraph Way, Madison, Alabama 35758 USA or at exportcompliance@intergraph.com.

Customer shall hold harmless and indemnify PPM and Hexagon Group Company for any causes of action, claims, costs, expenses and/or damages resulting to PPM or Hexagon Group Company from a breach by Customer.

**Trademarks**

Intergraph®, the Intergraph logo®, Intergraph Smart®, SmartPlant®, SmartMarine®, SmartSketch®, SmartPlant Cloud®, PDS®, FrameWorks®, I-Route, I-Export, Isogen®, SPOOLGEN, SupportManager®, SupportModeler®, SAPPHIRE®, TANK, PV Elite®, CADWorx®, CADWorx DraftPro®, GTSTRUDL®, and CAESAR II® are trademarks or registered trademarks of Intergraph Corporation or its affiliates, parents, subsidiaries. Hexagon and the Hexagon logo are registered trademarks of Hexagon AB or its subsidiaries. Microsoft and Windows are registered trademarks of Microsoft Corporation. Other brands and product names are trademarks of their respective owners.

*SmartPlant P&ID Setup and Customization Course Guide* **Table of Contents**

**Preface ……………………………………………………………………………………………………………….11**

**If You Need Assistance ……………………………………………………………………………………….12**

**Getting HELP in SmartPlant ………………………………………………………………………………13**

SmartPlant P&ID Help Command (Help Menu) ………………………………………………..14

Printable Guides Command (Help Menu) …………………………………………………………14

About Command (Help Menu) ………………………………………………………………………..15

**SmartPlant Engineering Manager Overview ……………………………………………………….16**

SmartPlant Engineering Manager Program Group ……………………………………………..17

SmartPlant Engineering Manager User Interface ……………………………………………….18

Menu Bar ………………………………………………………………………………………………………….. 18

Main Toolbar …………………………………………………………………………………………………….. 19

Tree View …………………………………………………………………………………………………………. 19

List View …………………………………………………………………………………………………………… 19

Site Server Root …………………………………………………………………………………………….21

Plant Group Types Root …………………………………………………………………………………23

Create a New Plant Group Type …………………………………………………………………………… 24

Hierarchy Templates Root ………………………………………………………………………………25

Using Custom Hierarchies …………………………………………………………………………………… 26

Create a New Hierarchy Template ………………………………………………………………………… 26

Plant Structures Root ……………………………………………………………………………………..28

Plant Groups Node ……………………………………………………………………………………………… 28

Roles Node ………………………………………………………………………………………………………… 32

Role Templates ………………………………………………………………………………………………….. 34

SmartPlant Engineering Manager Rights ……………………………………………………………….. 35

Applications Node ……………………………………………………………………………………………… 38

Creating a New Plant Structure Wizard …………………………………………………………………. 39

**The Database Schemas: An Overview …………………………………………………………………41**

**SmartPlant P&ID Overview ……………………………………………………………………………….43**

SmartPlant P&ID Program Group ……………………………………………………………………43

SmartPlant P&ID User Interface ……………………………………………………………………..44

SmartPlant P&ID Reference Data ……………………………………………………………………50

**Introducing Drawing Manager ……………………………………………………………………………51**

Drawing Manager User Interface …………………………………………………………………….51

Modifying the User Interface (View Menu) …………………………………………………………… 51

Working with Drawings …………………………………………………………………………………55

New Drawing Command …………………………………………………………………………………….. 55

**4** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

Move a Drawing ………………………………………………………………………………………………… 57

Copy/Paste a Drawing…………………………………………………………………………………………. 57

Delete Command ……………………………………………………………………………………………….. 60

Properties Command …………………………………………………………………………………………… 60

Opening Drawings …………………………………………………………………………………………61

Open a Drawing from Drawing Manager ………………………………………………………………. 61

Open a Drawing in a Different Site from Drawing Manager…………………………………….. 61

Open a Drawing in a Different Plant in the Same Site from Drawing Manager…………… 62

Open Drawings from SmartPlant P&ID ………………………………………………………………… 62

Open a Drawing in a Different Database ……………………………………………………………….. 62

Import Drawings Command ……………………………………………………………………………63

Import Drawings Wizard …………………………………………………………………………………….. 64

**Save a Drawing in Other Formats ……………………………………………………………………….77**

**Working with Drawing Templates ………………………………………………………………………78**

Creating a Drawing Template ………………………………………………………………………….79

Options for Templates ……………………………………………………………………………………80

Properties Command (View Menu) ………………………………………………………………….80

Options Command (Tools Menu) …………………………………………………………………….81

**Using the SmartPlant Migration Wizard …………………………………………………………….83**

Importing a SmartSketch File ………………………………………………………………………….83

Files Used During the Migration ………………………………………………………………………….. 84

Placement Order ………………………………………………………………………………………………… 85

Rule Considerations ……………………………………………………………………………………………. 85

**Working with Catalog Manager ………………………………………………………………………….88**

Creating a New Symbol ………………………………………………………………………………….88

Create a Symbol w/ New Item Command ……………………………………………………………… 88

Create a Symbol w/ Create Symbol Command ………………………………………………………. 89

Catalog Manager View Window ……………………………………………………………………..91

Catalog Tools Toolbar ………………………………………………………………………………………… 92

Catalog Manager Properties Window ……………………………………………………………….99

Identification Category ……………………………………………………………………………………… 100

Miscellaneous Category …………………………………………………………………………………….. 101

Control Category ………………………………………………………………………………………………. 101

Physical Category …………………………………………………………………………………………….. 101

Process Category ………………………………………………………………………………………………. 101

Property Break Category ……………………………………………………………………………………. 102

Responsibility Category …………………………………………………………………………………….. 102

Status Category ………………………………………………………………………………………………… 102

Symbol Category ……………………………………………………………………………………………… 102

Symbol Guidelines ……………………………………………………………………………………….104

Equipment ……………………………………………………………………………………………………….. 104

Piping Components …………………………………………………………………………………………… 104

Flow Oriented Components ……………………………………………………………………………….. 104

Reducers ………………………………………………………………………………………………………….. 105

SmartPlant P&ID Setup and Customization Course Guide5 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

Inline Instruments …………………………………………………………………………………………….. 105

Offline Instruments …………………………………………………………………………………………… 105

Off Page Connectors …………………………………………………………………………………………. 105

Scalable symbols ………………………………………………………………………………………………. 106

Parametric Symbols ………………………………………………………………………………………….. 106

Working with Labels ……………………………………………………………………………………107

Visible and Hidden Labels …………………………………………………………………………………. 107

Driving and Driven Labels …………………………………………………………………………………. 108

Embedded Labels ……………………………………………………………………………………………… 108

Smart Text Editor ……………………………………………………………………………………………… 109

Text Box Properties ………………………………………………………………………………………….. 109

Label Properties and Guidelines …………………………………………………………………………. 109

Guidelines for Special Cases …………………………………………………………………………112

Title Block Labels …………………………………………………………………………………………….. 112

Flow Arrows ……………………………………………………………………………………………………. 114

Segment Breaks (Attribute Breaks) …………………………………………………………………….. 114

Line Labels ……………………………………………………………………………………………………… 115

Component Labels ……………………………………………………………………………………………. 116

Working with Parametric Symbols …………………………………………………………………117

Using Relationships as You Draw ………………………………………………………………………. 117

Dimensioning Drawing Elements ……………………………………………………………………….. 120

Using the Variable Table …………………………………………………………………………………… 121

Creating Symbols from a MicroStation Cell Library File (.cel format) ……………….124

**Working with Data Dictionary Manager ……………………………………………………………127**

Navigating in Data Dictionary Manager ………………………………………………………….127

Managing Database Tables ……………………………………………………………………………127

Managing Database Table Properties ……………………………………………………………..128

Add Property Dialog Box ………………………………………………………………………………….. 129

Modify Property Dialog Box ……………………………………………………………………………… 132

Defining Item Type Properties ………………………………………………………………………132

Modify Item Type Properties Dialog Box ……………………………………………………………. 132

Defining Select Lists …………………………………………………………………………………….134

Create a Select List …………………………………………………………………………………………… 136

Defining Select List Entries …………………………………………………………………………..136

Add an Entry to a Select List ……………………………………………………………………………… 137

Move Up / Move Down Commands ……………………………………………………………………. 138

Sort Command …………………………………………………………………………………………………. 138

**Using Filter Manager ………………………………………………………………………………………..139**

Navigating in Filter Manager …………………………………………………………………………139

Type of Filters ……………………………………………………………………………………………..140

Simple Filters …………………………………………………………………………………………………… 141

Compound Filters …………………………………………………………………………………………….. 142

**Using SmartPlant® P&ID Options Manager ……………………………………………………..144**

Navigating in SmartPlant® P&ID Options Manager ………………………………………..144

Symbology ………………………………………………………………………………………………………. 145

**6** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

Gapping …………………………………………………………………………………………………………… 146

Gapping Lines in a Drawing ………………………………………………………………………………. 147

Tracing ……………………………………………………………………………………………………………. 148

Formats …………………………………………………………………………………………………………… 149

Distances …………………………………………………………………………………………………………. 150

Settings ……………………………………………………………………………………………………………. 151

**Configuring Jacketed Piping …………………………………………………………………………….159**

**Updating Drawings in Drawing Manager ………………………………………………………….162**

Out-of-Date Drawing Criteria Command ………………………………………………………..162

Update Command ………………………………………………………………………………………..164

Report Command …………………………………………………………………………………………165

Schedule Update Command ………………………………………………………………………….165

**Using SmartPlant® P&ID Rule Manager ………………………………………………………….166**

Navigating in SmartPlant P&ID Rule Manager ……………………………………………….167

Generate Report Command ………………………………………………………………………………… 167

Creating and Modifying Rules ……………………………………………………………………………. 167

Rule Properties Dialog Box ……………………………………………………………………………….. 168

Approve All Rules Command …………………………………………………………………………….. 179

Rule Options Command …………………………………………………………………………………….. 179

**Using the Line Style Editor ……………………………………………………………………………….182**

Installing the Line Style Editor ………………………………………………………………………182

Style Resource File ………………………………………………………………………………………183

Attaching the Style Resource File ……………………………………………………………………….. 183

Line Style Editor Toolbar ……………………………………………………………………………..185

Importing Styles and Patterns ………………………………………………………………………..185

Creating Custom Point Styles ………………………………………………………………………..186

Point Style Properties Dialog Box ………………………………………………………………………. 187

Creating Custom Linear Patterns ……………………………………………………………………187

Linear Pattern Properties Dialog Box ………………………………………………………………….. 188

Creating Custom Linear Styles ………………………………………………………………………190

Linear Style Properties Dialog Box …………………………………………………………………….. 191

Linear Patterns Command (Options Manager) …………………………………………………194

Linear Patterns Dialog Box ………………………………………………………………………………… 194

Importing a Linear Pattern …………………………………………………………………………………. 194

**Using Format Manager …………………………………………………………………………………….196**

Navigating in Format Manager ………………………………………………………………………196

Add Format Command ……………………………………………………………………………………… 197

Properties Command …………………………………………………………………………………………. 198

**Using Insulation Specification Manager …………………………………………………………….203**

Navigating in SmartPlant P&ID Insulation Specification Manager …………………….203

SmartPlant P&ID Setup and Customization Course Guide7 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

Generate Report Command ………………………………………………………………………………… 204

Creating a New Plant Insulation Specification File ……………………………………………….. 204

Add Specification Command ……………………………………………………………………………… 205

**Importing Data into SmartPlant P&ID ……………………………………………………………..211**

Data File Command ……………………………………………………………………………………..211

Importing Data from a Spreadsheet …………………………………………………………………….. 211

Importing Using XML ………………………………………………………………………………………. 213

**Generating Reports …………………………………………………………………………………………..215**

Creating and Editing Report Templates ………………………………………………………….216

Fixed Format Report Template …………………………………………………………………………… 216

Tabular Format Report Template ………………………………………………………………………… 216

Composite Format Report Template ……………………………………………………………………. 217

New Command ………………………………………………………………………………………………… 217

SmartPlant Reports Toolbar ……………………………………………………………………………….. 218

Edit Command …………………………………………………………………………………………………. 226

Delete Command ……………………………………………………………………………………………… 227

Running Reports ………………………………………………………………………………………….228

Plant Reports Command ……………………………………………………………………………………. 228

My Reports Command ………………………………………………………………………………………. 229

**Working with Drawing Revisions and Versions …………………………………………………232**

New Revision Command ………………………………………………………………………………232

New Revision Dialog Box …………………………………………………………………………………. 232

Associate Version Command ………………………………………………………………………..233

Revision Properties Command ………………………………………………………………………234

Revision Properties Dialog Box ………………………………………………………………………….. 234

Revision History Command ………………………………………………………………………….235

Revision History Dialog Box ……………………………………………………………………………… 235

New Version Command ……………………………………………………………………………….236

New Version Dialog Box …………………………………………………………………………………… 237

Version History Command ……………………………………………………………………………237

Version History Dialog Box ………………………………………………………………………………. 238

Fetch Deleted Drawing Command …………………………………………………………………250

Fetch Deleted Drawing Dialog Box …………………………………………………………………….. 250

Incremental New Version Command ……………………………………………………………..251

Save Versions of All Drawings …………………………………………………………………………… 251

**Backing Up and Restoring Your Data ……………………………………………………………….252**

Backup Options …………………………………………………………………………………………..252

Restore Options …………………………………………………………………………………………..252

Backup Command ……………………………………………………………………………………….253

Site Server Backup Wizard ………………………………………………………………………………… 253

Plant Structure Backup Wizard …………………………………………………………………………… 256

Scheduling Options …………………………………………………………………………………………… 258

Running Backups from the Command Line …………………………………………………………. 260

**8** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

Backing up and Restoring Reference Data …………………………………………………………… 261

Restore Command ……………………………………………………………………………………….262

Restore Site Server Wizard ………………………………………………………………………………… 262

Restore Plant Structure Wizard …………………………………………………………………………… 267

**SmartPlant Reference Data Synchronization Manager ………………………………………272**

Understanding the RDS Interface …………………………………………………………………..272

Creating an RDS Package ………………………………………………………………………………….. 273

Comparing Reference Data ………………………………………………………………………………… 274

Synchronizing Reference Data …………………………………………………………………………… 275

Viewing Status and Results ……………………………………………………………………………….. 276

Reports and Log Files ……………………………………………………………………………………….. 276

**Copying a Plant Structure…………………………………………………………………………………278**

Save Plant Structure Command ……………………………………………………………………..278

Save Plant Structure Dialog Box ………………………………………………………………………… 278

Load Plant Structure Command ……………………………………………………………………..279

Load Plant Structure Wizard ………………………………………………………………………………. 280

Finish Load Plant Structure Processing Command …………………………………………..289

Running the Finish Load Plant Structure Processing Command ……………………………… 289

**Data Dictionary Template Comparison Utility …………………………………………………..291**

**SmartPlant P&ID Utilities ………………………………………………………………………………..293**

Check Item Paths Utility ……………………………………………………………………………….293

Check Symbols Utility ………………………………………………………………………………….293

Clean Data Utility (DelOrpModItems.dll) ……………………………………………………….295

Running the Clean Data Utility …………………………………………………………………………… 296

Database Constraint Report …………………………………………………………………………..299

Running the Database Constraint Report ……………………………………………………………… 299

Duplicate Item Tag Report Utility ………………………………………………………………….304

Find Invalid Break Labels Utility …………………………………………………………………..305

Repair Relationship Indicators Utility …………………………………………………………….307

Running the Repair Relationship Indicators Utility ……………………………………………….. 307

Service PIDs Utility ……………………………………………………………………………………..308

Running the Service PIDs Utility ……………………………………………………………………….. 308

Recreating Drawings ……………………………………………………………………………………309

Resolving a Recreate Drawing Error Condition ……………………………………………………. 309

Forcing a Recreate of a Drawing ………………………………………………………………………… 310

SmartPID Analyzer ………………………………………………………………………………………311

Piping Specification Utility …………………………………………………………………………..313

Update Labels Utility ……………………………………………………………………………………315

**SmartPlant P&ID Support Utilities …………………………………………………………………..316**

**SmartPlant P&ID Timing Log ………………………………………………………………………….318**

SmartPlant P&ID Setup and Customization Course Guide9 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant Engineering Manager Debug Mode ………………………………………………..320**

**SmartPlant Reference Data Synchronization Manager Debug Mode ………………….321**

**Do’s and Don’ts of SmartPlant P&ID ………………………………………………………………..322**

**10** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

## Preface

This document is a guide for the SmartPlant P&ID Admin Course; SmartPlant P&ID

– Setup and Customization. The various SmartPlant Engineering Manager and SmartPlant P&ID User Guides and the online Help delivered as part of the software can be used as a supplement to this course guide.

SmartPlant P&ID Setup and Customization Course Guide11 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **If You Need Assistance**

**Intergraph Online**

Our web site brings you fast, convenient, up-to-the-minute information about Intergraph’s products, services, and direction. Our web address is:

http://www.intergraph.com/

**Intergraph Support**

You may log a service request via the web at:

https://smartsupport.intergraph.com

In the United States, call Intergraph’s standard support number at 1-800-766-7701

from 7:30 AM to 5:30 PM CST, Monday through Friday, except holidays.

If you are outside the United States, please call your local Intergraph office. The most up-to-date list of international offices and distributors is available on the web at:

http://www.intergraph.com/worldwide.aspx

Please have the following information available when you call or log a Service Request (SR):

- Your Name and Telephone Number
- The Product’s name
- The full version of the product including the Service Pack number.

**Note:** You can use **About SmartPlant P&ID** on the **Help** menu to see your software version and license information.

- A detailed description of the Problem, Error Messages, Screenshots, and Log Files.

---

**Training Registration (U.S. Only):**

- 1-800-766-7701** **
- http://www.intergraph.com/ppm/training/default.aspx** **

---

**Mailing Address:**

305 Intergraph Way

Madison, Alabama 35758

U.S.A.

**12** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Getting HELP in SmartPlant**

The software’s user assistance supplies command information as you perform tasks.

You can access different kinds of information any time you are running the software including reference topics, narrative descriptions, or instructional material. In addition, the software provides several learning tools that you can activate from the online **Help** menu.

The software offers the following important user-assistance features: **Online Help**

Complete command descriptions give you more information when you

click **Help** or press **Shift + F1.** With **Shift + F1**, the pointer changes to a northwest arrow with a question mark. You can then get context-sensitive Help for any command by clicking the toolbar button or by clicking the menu command at the top of the window.

A structured table of contents, an index, and full-text search capabilities provide easy access to Help topics. Press **F1** any time you need online Help during a design session. When a command is active, the Help topic for that command appears. If no command is active, then the table of

contents for the Help topics appears.

You can also access the table of contents by clicking **SmartPlant P&ID Help** on the **Help** menu.

**User Interface Features**

ToolTips helps you find command names. When you pause the pointer on

the command button on the toolbar, a yellow label displays the command’s name.

Brief command descriptions show you the basic function of a command.

When you point the pointer at the command button on the toolbar, the

description appears in the Status Bar at the bottom of the window. Also, messages that explain your actions for each step of the command appear in the Status Bar.

SmartPlant P&ID Setup and Customization Course Guide13 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **SmartPlant P&ID Help Command (Help Menu)**

Displays the table of contents for the SmartPlant P&ID Help topics, which include step-by-step instructions for using the software, reference information, examples of features, and technical support information. It also provides access to the Help index and full-text search.

**Printable Guides Command (Help Menu)**

Opens a page in your Internet browser that includes the links to the User’s Guides in portable document format. Click on a link and the guide is opened in the appropriate application, from which you can print it. The User’s Guides contain the same information as the online Help.

Upon installing SmartPlant Engineering Manager or P&ID, the printable guides (.pdf) may also be found on your disk at ~ *Program Installation Folder*

\SmartPlant\Engineering Manager\bin\resdlls\0009 or ~ *Program Installation* *Folder*\SmartPlant\P&ID Workstation\bin\resdlls\0009.

**List of Printable Guides**

SmartPlant Engineering Managers User’s Guide

SmartPlant P&ID Drawing Manager User’s

Guide

SmartPlant Catalog Manager User’s Guide

SmartPlant P&ID User’s Guide

SmartPlant P&ID Engineering User’s Guide

SmartPlant Data Dictionary Manager User’s

SmartPlant P&ID Options Manager User’s

Guide

Guide

SmartPlant Data Dictionary Template

SmartPlant P&ID Rule Manager User’s Guide

Comparison Utility Guide

SmartPlant Filter Manager User’s Guide

SmartPlant P&ID Insulation Specification

Manager User’s Guide

SmartPlant Format Manager User’s Guide

SmartPlant P&ID to PDS Piping Data Transfer

Configuration and Reference Guide

SmartPlant Metadata Import Utility User’s

Guide

SmartPlant P&ID Utilities Guide

SmartPlant Reference Data Synchronization

SmartPlant P&ID Duplicate Item Tag Report

Manager User’s Guide

Utility User’s Guide

SmartPlant Engineering Manager Upgrade

SmartPlant Symbol Libraries Reference Guide

Utility User’s Guide

SmartPlant Symbol Libraries Reference Guide

SmartPlant P&ID Installation & Upgrade Guide

SmartPlant Engineering Manager Installation

and Upgrade Guide

**14** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant P&ID Technical User Forum Command**

**(Help Menu)**

Activates your web browser and opens the SmartPlant P&ID Technical User Forum page. On this page, you can participate in online discussions and share information.

**About Command (Help Menu)**

Displays information about your copy of the software, including the version number and the copyright, legal, and licensing notices.

SmartPlant P&ID Setup and Customization Course Guide15 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant Engineering Manager Overview**

Supporting SmartPlant P&ID and SmartPlant Electrical, SmartPlant Engineering Manager manages the plant structures while the applications themselves are responsible for manipulating the actual data (including creating, deleting, modifying, and launching). SmartPlant Engineering Manager allows you to view not only the data related to the whole site but also data related to individual plants. You can create and maintain SmartPlant Engineering sites and plant structures, in addition to adding plant group types, modifying plant attributes, creating and modifying hierarchies, and associating SmartPlant applications.

Site

Plant

Plant

P&ID

P&ID

Electrical

Application

Application

Application

**16** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant Engineering Manager Program Group**

The SmartPlant Engineering Manager Program group provides several utilities for managing your plant data.

**SmartPlant Engineering Manager** allows you to create the SmartPlant site and plants. You can create plant structures, plant groups, hierarchy templates, as well as define the access to plant data on many levels.

**Catalog Manager** allows you to create and modify symbols and labels.

**Data Dictionary Manager** allows you to add custom properties to SmartPlant database tables, define external programs, view relationships, and create and modify select lists.

**Data Dictionary Template Comparison Utility** allows you to compare two data dictionary templates at a time.

**Filter Manager** allows you to create and modify filters to discriminate on database data. Filters are used for displaying data in symbology, gapping, graphical views, reports, rules, and so forth.

**Format Manager** defines available formats for units of measure properties.

**Metadata Import Utility** allows bulk loading of metadata (properties and select lists) into data dictionary schemas of SmartPlant P&ID and SmartPlant Electrical.

**Reference Data Synchronization Manager** allows you to synchronize reference data (including data dictionaries, rules, options, and symbols) between plants.

**Refresh Site Roles Utility** allows you to automatically refresh the roles in a site on a scheduled basis.

**Upgrade Utility** guides you through upgrading your SmartPlant Engineering data.

SmartPlant P&ID Setup and Customization Course Guide17 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant Engineering Manager User Interface**

The **SmartPlant Engineering Manager User Interface** consists of several parts; the **Menu Bar**, the **Main Toolbar**, the **Tree View**, and the **List View**. The **Menu Bar** contains pull-down command menus. ** **The** Main Toolbar** displays command buttons. ** **

The **Tree** **View** on the left displays the nodes (Site Server, Plant Structures, Hierarchy Templates and Plant Group Types) in a tree format. The **List** **View** on the right displays property data for the nodes in the selected branch in the tree.

**Note:**

- The commands in SmartPlant Engineering Manager are node-specific,

meaning that the availability of a command depends on which node in the **Tree** **View** or item in the **List** **View** you select.

**Menu Bar**

The **Menu Bar** contains menus. Each menu contains its own set of pull-down commands. The commands are your main source of interaction with the SmartPlant Engineering Manager application.

**Note:**

- During certain operations, the system dims some of the commands. For example, if a command is not applicable at a certain selection that command is disabled until it is applicable. This feature has been applied to commands to clarify the user interface.

**18** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Main Toolbar**

The **Main Toolbar** displays command buttons for some of the same pull-down commands in the menus. The command buttons provide a quick and visual way to execute commands in SmartPlant Engineering Manager without searching through the menus.

**Tree View**

The Tree view displays plant structures, hierarchy templates and plant group types. At the base of the tree is the Site Server root. The Site Server root is created when the **Create Site Schema Wizard** completes**.**

**List View**

The **List** view displays property data for the children of the selected node in the tree.

You can sort the **List** view by clicking a column heading.

**Notes:**

- You can use the **Tools** > **Show Fields** command to control which properties appear in the **List** view and the order in which they appear.
- To enable the **Show Fields** command, select the **Site Server** node or a **Plant** node or a **Project** node.

**Show Fields Command**

The **Tools > Show Fields** command displays the Show Fields dialog box which allows you to specify which properties display in the **List** view and the order in which they appear. The **List** view columns are the properties of the items in the **Tree** view.

**Plant hierarchy** - Lists the items available for display in the **List** view. Select an item from this list to display its properties in the **Properties** list.

SmartPlant P&ID Setup and Customization Course Guide19 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Properties** - Lists all available properties for the selected item. Properties that that are checked will display in the **List** view in SmartPlant Engineering Manager.

**Move Up** - Moves the selected property up in the list. The higher a property is in the list, the farther to the left the property appears in the **List** view.

**Move Down** - Moves the selected property down in the list. The lower a property is in the list, the farther to the right the property appears in the **List** view.

**Note:**

- **Show Fields** settings for the site server are stored in the SiteShowFields.cfg file in the Windows *user profile* folder. This file contains all **Show Fields** settings except for the plant hierarchy information, which is stored in the plant schema.

**Upgrade Site Command**

You can use the **Tools > Upgrade Site** command to update the site data dictionary version number to the latest version of the software.

**Default Settings Command**

SmartPlant Engineering Manager allows you to predefine values for creating sites, plant structures, and associating the application using **Tools > Default Settings…**. ** **

Using these default settings simplifies the creation process and allows you to use the same settings across sites and plants.

**20** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- The values specified on the **Default Settings** dialog box are used by default only if you turn on the **Tools > Use Default Settings** command.

**Site Server Root**

The **Site Server** node is the root directory for each site when opened in SmartPlant Engineering Manager. A site is a logical unit of data that is normally used to model a collection of physical plants. Every plant within a site has a unique identity.

In SmartPlant Engineering Manager, you access a site by opening the

**smartplantv4.ini** file, which contains the database type, connection alias, and the schema information for the site and the site data dictionary. The site schema basically keeps track of the plants in the site.

**Note:**

- You can place this .ini file in any location on any workstation and share it out to other users. Therefore, a site server is simply any workstation where the **smartplantv4.ini** file is stored.

The three main root nodes are listed under the **Site Server** root: 1. **Plant Structures**

1. **Hierarchy Templates**
2. **Plant Group Types**

SmartPlant P&ID Setup and Customization Course Guide21 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- The **Site Server** > **Plant Structures** node lists each plant structure and each plant structure contains its related **Plant Groups**, **Roles**, and **Applications**.
- The **Hierarchy Templates** and **Plant Group Types** nodes are available for use by members of the Site Administrators user access group.

**Important**

- While you can connect to only one site at a time, you can have more than one site on any given computer.

**Site Server Options**

The **Site Server Options** dialog box displays when you run SmartPlant Engineering Manager for the first time, and will only display during future sessions when SmartPlant Engineering Manager cannot find an active site server or the site connection information in the **smartplantv4.ini** is invalid.

**Create a new site** - Starts the New Site Server wizard, which steps you through creating the site server.

**Important**

- Before you can create a site server, you must create a database and the database must be started. Check the computer’s Services to verify the database is running

**Connect to an existing site** - Allows you to browse to the location of an existing smartplantv4.ini file.

**Restore site from backup** - Starts the Restore Site Server wizard.

**22** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Plant Group Types Root**

The **Plant Group Types Root** displays the building blocks used to create plant breakdown structures (hierarchies). Eight plant group types are delivered by default.

You can also create custom plant group types.

Site administrators can add new or modify existing plant group types. New plant group types are added to the data dictionary for the site and are available for use in editing hierarchy templates. You can view the attributes associated with a plant group type by using the **Properties** command.

**Notes:**

- When selecting attribute names, be sure not to use any of the Oracle reserved keywords. For example, **address** is a reserved keyword in Oracle. Also, attributes beginning with numbers or special characters are not supported by Oracle.
- Use **Data Dictionary Manager** to add, delete and modify plant group type attributes.

SmartPlant P&ID Setup and Customization Course Guide23 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Create a New Plant Group Type**

1. Select the **Plant Group Type** root.
2. Right-click the **Plant Group Type** root and select the **New Type** command.
3. Type a **Name** and **Display Name** for the new plant group type.

**Note:**

- You cannot delete a plant group type that is being used in a hierarchy template.

**24** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Hierarchy Templates Root**

The **Hierarchy Templates Root** shows the various hierarchy templates that can be used to generate the structure of a plant. A hierarchy is made up of a set of two or more plant group types (formerly called hierarchy items) that are arranged in a tree structure.

A hierarchy (also referred to as a Plant Breakdown Structure) is used as a template to create a plant structure and defines the available plant group items for a certain level of the tree. The hierarchy is essentially a set of rules that the plant structure must follow. For example, a plant structure using Hierarchy 1: Plant/Unit with the **Allow** **P&ID Drawings** option set on the Unit level allows you to create drawings only under a unit in that plant. Using this hierarchy, you can create a plant structure containing only one plant, then multiple units, and then multiple drawings under each unit.

**Important**

- Drawings are not allowed in the top-most root item in a hierarchy. Therefore, **Allow P&ID Drawings** is not available at the root item level in a hierarchy.
- If you use a hierarchy in which **Allow P&ID Drawings** is not turned on for at least one level, the plant cannot be used in SmartPlant P&ID, but can be used in SmartPlant Electrical.
- The plant structure hierarchy does not reference the hierarchy template after the plant structure is created. SmartPlant Engineering Manager writes a copy of the hierarchy template to the plant database when the new plant is created.

This reduces the dependency on the site for the hierarchy definition and allows you to modify the hierarchy template independent of whether any plant structures used it during their creation.

- You cannot modify a plant structure hierarchy after the plant structure has been created.
- During plant structure creation, you can choose to use one of the default hierarchy templates or use a custom hierarchy that you have previously defined. You cannot modify the selected hierarchy template during plant structure creation.

SmartPlant P&ID Setup and Customization Course Guide25 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Using Custom Hierarchies**

SmartPlant Enterprise (integration) supports custom hierarchies, if they contain a minimum of three levels. By default, the delivered SPEMDataMap.xml file is compatible with the standard SmartPlant Engineering Manager **Plant > Area > Unit** hierarchy.

**Notes:**

- After registering with SmartPlant Enterprise, SmartPlant Engineering Manager cannot retrieve the plant breakdown structures (PBS) document if the plant and SmartPlant hierarchies are not compatible. To be compatible with the SmartPlant hierarchy, your plant hierarchy can contain less than or equal, but not more than the number of levels in the SmartPlant hierarchy.
- SmartPlant Engineering Manager retrieves only the hierarchy levels it needs from the SmartPlant hierarchy. For example, if your plant hierarchy contains 4

levels and the SmartPlant hierarchy contains 8 levels, only the top 4 levels of the SmartPlant hierarchy are retrieved.

- Hierarchy item names at the same level do not have to match. Hierarchies are mapped by depth (level), not by name.

**Create a New Hierarchy Template**

1. Select the Hierarchy Templates node.
2. Right-click the **Hierarchy Templates** node and select the **New Hierarchy** **Template** command.
3. Type a name for the hierarchy.

**Note:**

- The hierarchy name length is limited to 80 characters. You can use a space character in the hierarchy name but no other special characters.
1. Type a description for the hierarchy.
2. Select a plant group type from the **Root item plant group type** list.

**Note:**

- The first plant group type added to the hierarchy is the root of the tree. The software allows only one root for each tree.

**26** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. Add more levels to the hierarchy template by right-clicking the last plant group type added and selecting **New Level**.

**Note:**

- You can create as many hierarchical levels in a hierarchy template as you have total plant group types. For example, if you have 15 plant group types defined in the **Plant Group Types** node in your site, then a custom hierarchy in your site can have no more than 15 levels. Additionally, multiple plant group types at any one level are not supported.

SmartPlant P&ID Setup and Customization Course Guide27 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Plant Structures Root**

The **Plant Structures** root contains all plants created in the site. Each plant structure represents the physical hierarchy, plant breakdown structure (PBS), of your plant.

Under each plant structure are its related Plant Groups, Roles, and Applications. Each plant structure is displayed as a

node in the **Plant Structures** root.

The following nodes display inside each plant in the **Plant Structures** root: **Plant Groups** - Displays the plant breakdown structure (physical hierarchy) of the plant.

**Roles** - Displays the user access roles defined for the plant.

**Applications** - Displays the applications associated with the plant.

**Plant Groups Node**

The **Plant Groups** node displays the plant breakdown structure itself. This node shows each item created in the plant structure and displays its attributes in the **List** view.

**28** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Create a New Item in a Plant Group**

1. Select the **Plant Groups** node.
2. Right-click the **Plant Groups** node, and select the **New** command.

**Note:**

- The actual command name changes based on the hierarchy defined for your plant.
1. Provide the information requested on the **New** dialog box.
2. Select OK.

**Notes:**

- The **Name** and **Description** fields are limited to 240 characters each. The **Name** field cannot contain any of the following special characters: ~ ! @ #

$ % ^ & * ( ) - + = < > . , ? / \ | [ ] { } ’ ” : ;.

- An asterisk (*) at the end of an item name indicates a value is required for that item.
- A folder with this same name cannot already exist in the plant structure folder.

SmartPlant P&ID Setup and Customization Course Guide29 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- If you are adding a unit, the **Unit Code** field is limited to 40 characters.

This limit is 3 characters if you plan to use the Piping Data Transfer to PDS 3D process. (The unit code is used as an alpha-numeric identification field in all tags in all drawings created in the unit.) This code can be changed after the new unit is created.

- The **Path** field is limited to 255 characters. This field cannot contain any spaces if you plan to use the Piping Data Transfer to PDS 3D process. The path displays the location where files in this plant group are stored. The software automatically appends the value in the **Name** box to this path and creates a folder using this name in your plant storage location.

**Revise Plant Group Item – Description Property**

You can display or edit the properties for the selected plant group item in the plant by selecting the item in the Tree view, then right-clicking and selecting Properties. The title of this dialog box and the fields displayed change based on the hierarchy defined for your plant and the level at which you are viewing the properties.

1. Select the **Plant** **Group** **Item** under the **Plant** **Group** node from the tree view.
2. Right-click the item selected and select the **Properties** command or select **Edit** > **Properties**.
3. Type or change the value for the **Description** property. Notice the other properties may be read only and thus grayed out.
4. Select **OK**.

**Revise Plant Group Item – Name Property**

1. Select the **Plant** **Group** **Item** under the **Plant** **Group** node from the tree view.
2. Right-click the item selected and select the **Properties** command or select **Edit** > **Properties**.
3. Type or change the value for the **Name** property. Notice the other properties may be read only and thus grayed out.
4. Select **OK.**

**Notes**:

- After a rename of plant group in SmartPlant Engineering Manager, all P&ID

users are locked from the drawings either in **Drawing Manager** or **SmartPlant P&ID**. Changes to plant groups will be seen the next time **Drawing** **Manager** is opened.

**30** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

Only users with permissions of Full Control in SmartPlant® P&ID Options Manager will be able to unlock drawings in SmartPlant P&ID Drawing Manager with the **Unlock Plant After Group Rename** command on the shortcut menu.

- P&IDs must be updated via **Global** **Validation** command in **Drawing** **Manager** to update Item Tags, including any labels which utilize the Item Tag property. After running **Global** **Validation,**  the drawing will be out-of-date for **Model** **Items**, and the requirement is to run **Update** **Drawings** after **Global** **Validation** has been run.
- Utilize **Update Drawings** to update any existing labels, which do not include the Item Tag property that currently utilizes the **Name** property.

This requires opening the symbol(s) in **Catalog Manager** to force the drawing Out-of-Date or running the **Update Labels** ( ***UpdateLabelsCmd.dll***) to update any existing labels that currently utilizes the **Name** property.

SmartPlant P&ID Setup and Customization Course Guide31 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Delete a Plant Group Item**

1. In the **Tree** view, select the plant group you want to delete.
2. Right-click and select the **Delete** command or select **Edit > Delete** or select from the toolbar.

**Important**

- To delete a plant group that resides in a plant, you must remove all drawings from the plant group before it can be deleted. You cannot delete a plant group that contains any drawings.
- If you still cannot delete the plant group after deleting the drawings in the plant group, check the plant stockpile for items still related to the plant group.

These items must also be deleted or their association with the plant group removed using SmartPlant P&ID before you can delete the plant group.

- Deleting a plant group cannot be undone. If you have backed up your plant structure, you can use the **Restore** command to retrieve the backed up version of the plant structure.

**Roles Node**

SmartPlant Engineering Manager uses roles to define and maintain user privileges and rights at the plant structure level. The **Roles** node displays the roles defined for the plant structure.

**Note:**

- To see the roles currently defined for a plant, select the **Roles** node under the plant node in the **Tree** view

**Note:**

- Each role can be tied directly to a Windows user group. The name and description of the role is the name and description of the group.

Individual users are added to the user group, and then that group is

added as a role in SmartPlant Engineering Manager.

**32** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Create a New Role**

1. Select the **Roles** node.
2. Right-click the **Roles** node, and select the **New Role** command.
3. The **New Role** dialog box will appear.

**Use local machine and domain groups** - Use this option when you want to choose a user group that is defined on your machine or in any accessible domain.

**Use site server and domain groups** - Use this option when you want to choose a user group that is defined on the site server machine or in any accessible domain.

**Define role for specified users** - Use this option when you want to define a common role for individual users, such as users who may belong to different groups, including users who have an account in a domain that is not accessible.

SmartPlant P&ID Setup and Customization Course Guide33 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Role name** - For the **Use local machine and domain groups** or **Use site server** **and domain groups** options, select the ellipsis button to display the Microsoft **Select Group** dialog box, which allows you to select the Windows user group you want to assign to this new role. The name of the SmartPlant role will be the same as the name of the selected user group. For the **Define role for specified users** option, type the role name that the software will use to grant privileges for the specified users.

**Role description** - Type a descriptive note about the role that you are creating.

You can make notes that indicate the privileges assigned to the group.

**Template** - Select a pre-defined role template. If you do not want to use a template, select **None**. Two role templates are delivered by default: **Read-Only** and **Full Control**. The **Read-Only** template grants read-only rights to all of rights for the associated applications. The **Full Control** template grants full control to all the rights for the associated applications. You can edit individual rights after applying a role template.

**Role Templates**

SmartPlant Engineering Manager provides role templates to help you easily create new roles. Because the most labor-intensive part of a role creation is setting the values for the rights, you can now create templates for specific roles and then use the templates multiple times. This feature is useful for defining a role template in one site and then reusing that same role template throughout all your sites.

SmartPlant Engineering Manager delivers three role templates by default:

- **None** - Sets all access rights to **None**.
- **Read-Only** - Sets all access rights for the role to **Read-Only**.
- **Full Control** - Sets all access rights for the role to **Full Control**.

When you create a role template, the software creates the .rts file. The name of the template is the name you give this .rts file at creation. All role templates are stored in the folder specified during site creation.

**Notes:**

- Any role template files stored in a location other than the one specified during site creation will not appear in the **Template** list on the **New Roles** dialog box. You can modify the role template storage path using the **Site Properties** dialog box. To use a role template at another site, you can copy the the .rts file to the role template location for that site. Another way to easily reuse role templates is to have each site point to the same folder for all templates. This way any template created in one site would be available at the other sites.
- Site backups include role templates if the templates are stored in the **Role** **template location** specified on the **Site Properties** dialog box.

**34** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- SmartPlant Engineering Manager does not allow you to interactively view the rights specified in a role template file. The only way to see the settings stored in a template is to create a role using that template and then examine the rights using the **Role Properties** dialog box.
- When creating a role, the software does not remember the specific role template used to create the role. Thus, after you create a role using a specific template, you will not find that template listed in the role properties.

Furthermore, if you create a role using a role template and then modify the rights settings in that role, the template remains unchanged. In other words, the modifications you make to the rights are not automatically updated in the role template. You can, however, overwrite the existing role template with the modified rights settings by saving the current role as a template and specify the original role template file name.

- All templates are forward-compatible. If a right is no longer in the list of rights, this right is ignored. All rights that are added will be set to **None** by default, except for the default templates.

**Create a Role Template**

1. Select the **Roles** node under the plant structure containing the role on which you want to base the template.
2. Right-click the role in the **List** view, and select the **Save As Template** command.
3. Specify a path and name for the template file. This name will appear in the **Templates** list on the **New Role** dialog box.

**SmartPlant Engineering Manager Rights**

SmartPlant Engineering Manager contains two sets of rights: Site Administrator Rights and Plant Structure Rights.

**Site Administrator Rights**

During site creation, you specified the group that you wanted to have site administrator privileges. **Site administrators** have a set of unique rights that cannot be granted to any other role. These rights include creating and modifying plant structures, roles, hierarchies, plant group types, enabling projects, and so forth.

**Notes:**

- The Site Administrators group does not appear in the **Roles** node in a plant structure.
- Only members of the user group specified as the Site Administrator User Group during site creation can see the **Hierarchy Templates** and **Plant** **Group Types** roots in the **Tree** view. Site administrators can see all plant structures and have full access to them.

SmartPlant P&ID Setup and Customization Course Guide35 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- Site administrator privileges do not extend by default to full privileges in the engineering applications. That is, a member of the group granted site administrator privileges does not automatically have full control privileges in SmartPlant P&ID or SmartPlant Electrical.
- Additional site administrators can be added to the Site Administrator User Group by using the administrative tools provided by Windows. Be sure that these users are granted network access rights to the computer where

SmartPlant Engineering Manager is installed.

- You can change the user group assigned as the site administrator group after site creation.
- You can automatically include the site administrators group in each plant you create by selecting the **Add the site administrator group to each plant** **created** option on the **Site Properties > General** tab. Selecting this option, will save you the step of creating a new role to grant these users access to the new plant’s Plant Structure Rights.

**Plant Structure and SmartPlant P&ID Rights**

Users can have access privileges (rights) that vary from one plant to another in the same site. These rights are defined by categories. Each application, SmartPlant Engineering Manager and SmartPlant P&ID, have their own categories and rights.

The SmartPlant Engineering Manager rights pertain to plant structure and format access in general, and the SmartPlant P&ID rights pertain to specific application access.

**Notes:**

- To view the user access rights, right-click on the Role and select **Properties**.
- The **Role Properties** dialog will display. Select the **Rights** TAB which details the categories and rights. On the Application pull-down menu, select the specific SmartPlant application (SmartPlant P&ID, SmartPlant Electrical, or SmartPlant Engineering Manager).

**36** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- The categories and rights are exposed through SmartPlant Engineering Manager for controlling user access privileges on a per-plant basis for each application listed in the Application pull-down menu. If the Categories have radio button options, this indicates that the rights contained within are mutually exclusive; you can choose only one right in that category to apply to the role. In the other categories, you can choose multiple rights, as denoted by check boxes.

SmartPlant P&ID Setup and Customization Course Guide37 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

***Mutually-Exclusive Rights:***

**None** - The user is not allowed to execute the application or utility for this plant structure.

**Read-Only** - The user can execute the application or utility for this plant structure to view the data held within it.

**Modify …** - The user can execute the application or utility for this plant structure to view the data held within it and to modify any custom settings.

**Full Control** - The user can execute the application or utility for this plant structure and perform all commands and modifications.

**Notes:**

- These rights are valid only within the plant structure with which the right is associated. To access the plant structure through SmartPlant Engineering Manager, the user must belong to a role that has at least read-only access to the plant structure.
- For examples for granting rights to common groups of users see the SmartPlant Engineering Manager On-line Help or the *SmartPlant Manager’s* *Users Guide* (~ *Program Installation Folder*\SmartPlant\Engineering Manager\bin\resdlls\0009\SPEMUsersGuide.pdf). ** **
- For more information on SmartPlant Engineering Manager User Rights, SmartPlant P&ID User Rights and SmartPlant Electrical User Rights see the SmartPlant Engineering Manager On-line Help or the *SmartPlant Manager’s* *Users Guide* (~ *Program Installation Folder*\SmartPlant\Engineering Manager\bin\resdlls\0009\SPEMUsersGuide.pdf). ** **

**Applications Node**

The **Applications** node displays the engineering applications (such as SmartPlant P&ID or SmartPlant Electrical) that are currently associated with your plant structure.

Before you can use an application with your data, you must associate that application to the plant structure.

**38** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Associating Applications Wizard**

Engineering applications (such as SmartPlant P&ID or SmartPlant Electrical) are used to access data within your plant structure. Before you can use an application with your data, you must associate that application to the plant structure.

To associate an application with your plant structure, use the **Tools > Associate** **Applications** command to launch the **Associate Applications** wizard that will help you step through creating the application schema and data dictionary. You must provide the following information as you step through the wizard.

**Data Dictionary Source** - Specifies whether the data dictionary for the associated application will be built from a default template or a custom template. You must specify the path to the location of the seed files. Data dictionary templates are not database-specific. In other words, a given data dictionary template can be used in both Oracle and SQL Server environments. For more information about using data dictionary templates, see Working with Data Dictionaries: An Overview.

**Application Schema and Application Data Dictionary Schema Information** -

Allows you to specify user names and passwords for both schemas. All data needed to maintain the application association is written into the application schema.

**Note:**

- You can use the **Default Settings** commands on the **Tools** menu to specify default values to simplify the application association process. For more information, see Default Settings Command.

**Creating a New Plant Structure Wizard**

The **New Plant Structure** wizard steps you through creating a plant structure. To start this wizard, select the **Plant Structures** root in the **Tree** view and then select **File > New**.

SmartPlant P&ID Setup and Customization Course Guide39 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

You must provide the following information as you step through the wizard.

- **Data Dictionary Source** - Specifies whether the data dictionary for the new plant will be built from a default template or a custom template. You must specify the path to the location of the seed files. Data dictionary templates are not database-specific. In other words, a given data dictionary template can be used in both Oracle and SQL Server environments. For more information about using data dictionary templates, see Working with Data Dictionaries: An Overview.
- **Hierarchy** - Indicates the template for the plant breakdown structure of the plant. You can define your own hierarchy that you can then use in creating plant structures or you can use one of the several delivered hierarchies.
- **Root Item Attributes** - Specifies the plant structure root item and the name that will appear in the **Plant Structures** node in the software.
- **Paths** - Consists of UNC paths for the plant structure storage location, a backup storage location, and the location of the format.txt file.
- **Database Connection Information** - Allows you to specify the alias and system password for the database instance that contains the plant data.
- **Plant Schema and Data Dictionary Schema Information** - Allows you to specify user names and passwords for both schemas. All data needed to maintain the plant structure is written into the plant schema.

**Notes:**

- You can use the **Default Settings** commands on the **Tools** menu to specify default values to simplify the plant creation process. For more information, see Default Settings Command.
- After creating your new plant structure, be sure to **associate applications** with your plant and to **assign user access** for the new plant structure.

**40** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**The Database Schemas: An Overview**

The SmartPlant application data model is contained in the Data Dictionary, which is stored in the database. The data dictionary contains the structure for tables that are maintained in the database. Data Dictionary Manager displays the database tables and properties. An administrator can also add properties to tables and create or modify select lists (properties with pre-determined values) with **Data Dictionary Manager**.

The SmartPlant schemas are configured to use separate data dictionaries for SmartPlant Engineering Manager and each engineering application. While each application sees only the reference data that applies to it, each application shares some common SmartPlant Engineering Manager data. This configuration supports the requirement for distributed management of the relational database, supports navigation across application tables for read-only access, and supports integration of data across applications.

A valid site with one plant consists of six database schemas when you use SmartPlant P&ID as your application, seven database schemas when you use SmartPlant Electrical, and nine database schemas if you use both applications concurrently. The plant structure schemas are shared between SmartPlant P&ID and SmartPlant Electrical.

For example, in the following figure, the site server contains two plants, one with only the SmartPlant P&ID application associated to it and the other with SmartPlant P&ID and SmartPlant Electrical associated.

SmartPlant P&ID Setup and Customization Course Guide41 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* The figure below shows the schemas that would exist in the database for this configuration example, if all applications are in the same database instance. On a given database server, we recommend putting all plants in one database instance.

**SPPID**

**Schema**

**SPPID**

**Plant**

**Data Dictionary**

**Schema**

**Schema**

**Plant**

**Data Dictionary**

**SPEL**

**SPEL**

**Schema**

**REF**

**Schema**

**Schema**

**SPEL**

**Site Schema**

**Data Dictionary**

**Schema**

**Site**

**Data Dictionary**

**Schema**

**Plant**

**SPPID**

**Data Dictionary**

**Schema**

**Schema**

**SPPID**

**Plant**

**Data Dictionary**

**Schema**

**Schema**

Most database activity occurs in the application schemas since this is where the application data is stored. The plant schema contains the smallest amount of data compared with the other schemas.

**42** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant P&ID Overview**

SmartPlant P&ID provides multiple views of a central, unified data structure that represents the plant model. A view is a visual presentation of the data in the plant model and can be a schematic drawing or a table. The plant model is the computer representation of the conceptual design, including all plant components and their relationships. By manipulating model views, you can organize the information within the plant model to better understand and maintain the data.

**SmartPlant P&ID Program Group**

SmartPlant P&ID has several programs and utilities for visualizing and managing your plant data.

**SmartPlant P&ID** provides the design environment for the P&ID.

**Drawing Manager** allows you to create and delete P&IDs and drawing versions, and print multiple drawings.

**Insulation Specification Manager** allows you to create and modify lookup tables for insulation specifications and thicknesses.

**Options Manager** defines plant-wide graphic standards for symbology, gapping, heat tracing, and formats. Options Manager also defines program settings and paths to the reference data.

**Programming Help** provides comprehensive information for customizing the software by using the Automation layer of the SmartPlant P&ID

application. You should be familiar with SmartPlant P&ID interactively and understand the basic concepts of programming before using Automation

**Rule Manager** defines rules for placement and the copying of properties on symbol placement.

SmartPlant P&ID Setup and Customization Course Guide43 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant P&ID User Interface**

The **SmartPlant P&ID User Interface** consists of several parts; the **Menu Bar**, the **Main Toolbar**, the **Design Window** or Modeler, the default **Engineering Data** **Editor (EDE),**  the **Properties Window**, and the **Catalog Explorer**. Using the specific parts of the **SmartPlant P&ID User Interface**, you can add, view and edit information for both the **active** and **non-active** drawings representing the plant model.

**Note:**

- The **Active** drawing(s) refers to the drawing(s) currently open and visible in the **Design Window**. **Non-active** drawings refer to all other drawings; every drawing except the one currently active.

The **Menu Bar** contains menus with pull-down commands. ** **The** Main Toolbar** displays command buttons. The **Design Window** consists of the** Drawing View** Window and the** Engineering Data Editor** Window which is opened using the **Window > New > Engineering Data Editor** Command**.**  Both the **Drawing View** and the **Engineering Data Editors** provide a way for you to view information in the database in two different ways; a graphical representation and a tabular format, respectively. They also provide a way for you to edit data for the drawings or plant model in the database. The **Catalog Explorer** displays all available catalog items for you to use in the drawings and plant model.

**Menu Bar**

The **Menu Bar** contains menus. Each menu contains its own set of pull-down commands. The commands are your main source of interaction with the SmartPlant P&ID application.

**44** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Main Toolbar**

The **Main Toolbar** displays command buttons for some of the same pull-down commands in the menus. The command buttons provide a quick and visual way to execute commands in SmartPlant P&ID without searching through the menus.

**Design Window / Modeler**

The **Design Window**, or **Modeler**, consists of the **Drawing View** and the **Engineering Data Editor**. Each of these views provides a way for you to enter information for the **active** drawing into the database. The two views also provide a way for you to view information in the database in different ways.

In the **Drawing View**, you can see the traditional diagram of a plant containing equipment, instrumentation, and piping in a graphical representation. You can create your drawing in the **Drawing** **View** using the vertical and horizontal scroll bars, and use the **Zoom** and **Pan** Commands to change the center point for the **Drawing** view.

The title bar identifies the drawing name.

The **Engineering Data Editor** allows you to see the same information in a tabular format, and it can also display items in the stockpiles (plant and drawing) and the other drawings (**non-active** drawings). The title bar identifies the drawing name.

**Engineering Data Editor**

The **Engineering Data Editor (EDE)** uses a grid or tabular format to display and manage data for all objects in the plant and the stockpiles. The information displayed is based on query results from the database. You can view the same information as in SmartPlant P&ID Setup and Customization Course Guide45 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

the **Drawing View** or items in the plant and drawing stockpiles by specifying filters and layouts to define the table information. Then, you can input or edit the property values. The **Engineering Data Editor** displays drawing information in a table, much like the **Properties** **Window**.

**Note:**

- The **EDE** Scope buttons allow you to view items in the Active Drawing, Active Drawing Stockpile, Stockpile (Plant), or Other Drawings (**non-active** drawings).

**Properties Window**

When you select an item in a plant model, you can enter, view, and modify the properties associated with that item in the **Properties** window. Your system administrator can create custom properties and their default values for each property in the **Data Dictionary Manager.**

---

**46** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

The **Properties** Window is automatically displayed on the right side of the main window when you select **View > Toolbars > Properties**, select the **Properties** Button

from the Main Toolbar, or select **View > Display > Properties**.

The **Properties** window display is a two-column table that provides the common properties of the current selection in the active **Design** window. The active items always determine the content of the **Properties** window. You can only have one **Properties** window open. If only one component is selected, or all components are of the same type, all the properties of that type of component appear. If the select set contains components of different types, then only the common properties appear. If the selected items have different values for their common properties, the value box is blank.

You can modify the values for properties in the **Properties** window. You can display and edit relationships that involve components, component types, or assemblies.

At the top of the **Properties** window is the **Selected Items** list, which itemizes all the selected objects individually and as a select set. You can display item properties by locating the appropriate item in the **Selected Items** list, as well as by selecting an item in the **Design** window. If more than one item is selected in the **Design** window, then the **Selected Items** list contains the choice **Select Set** as well as individual items in the set.

**Catalog Explorer Window**

**Catalog Explorer** Window is an interface to view and manipulate an electronic catalog containing drawing symbols and their associated properties. Conceptually, the **Catalog Explorer** resembles a manufacturer catalog with pictures of parts to build a plant. The paper catalog contains many items arranged in sections; you can search for items or browse through the catalog and bookmark certain pages and sections.

**Catalog Explorer** replaces the paper catalog with an electronic equivalent. You can browse the catalog tree view for drawing items that you need and create bookmarks for important categories.

The **Catalog Explorer** Window is automatically displayed on the right side of the main window when you select **View > Toolbars > Catalog Explorer**, select the **Catalog Explorer** Button

from the Main Toolbar, or select **View > Display >**

**Catalog Explorer**.

**Catalog Explorer** consists of two main views: The **Tree** view and the **List** view. In the **Tree** view, you can view the nodes of the catalog file system and open or close the nodes by clicking the + or – icons by the selected node to see or hide the contents.

In the **List** view, you see the contents of the opened node. You also use the **List** view to select catalog items before placing them in a drawing or in a stockpile. You can create a navigation bar in the region between the tree and list views for shortcuts to places throughout the catalog.

SmartPlant P&ID Setup and Customization Course Guide47 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

Toolbar buttons carry out commands and allow you to customize the tree and list views to suit your work session. These toolbar buttons are located at the top of the tree view.

**Status Bar**

The **Status Bar** displays at the bottom of the main window when a drawing is opened and if “Show status bar” is checked on **Tools > Options** dialog (General TAB). When you point at a command button on the toolbar, the description appears in the **Status** **Bar** at the bottom of the window. The first image below displays the **Status Bar** when you have pointed at the Zoom Area command button. Also, prompts that explain what to do at each step of the command, and messages about the operations the software is performing appear in the **Status Bar**. The second image below displays the **Status Bar** when you have selected a valve from the **Catalog Explorer** to place in the **Drawing View**.

**48** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Dialog Boxes**

**Dialog Boxes** are another type of menu available and represent the most detailed method of interaction between you and the software application. The **Dialog Box** below is from the Edit > Replace command within the SmartPlant P&ID

environment.

**Ribbons**

**Ribbons** help you control various settings for the active command and are commonly found within the SmartPlant P&ID program. You can use the same ribbon for creating an item or modifying it. For example, if you place a pipe run or select an existing pipe run to modify it, the same ribbon is active. The options on a ribbon work like options on dialog boxes. Any options that you set affect the active command.

The Line Routing Ribbon below appears when you select a line element from the **Catalog Explorer** list view or the **Engineering Data Editor** or when you select an existing line in a drawing. You can dock the **Line Routing** ribbon in the main toolbar; it remains there for the current design session unless you move it again.

**ToolTips**

**ToolTips** help you find toolbar command names. When you point to a command button on the toolbar, a yellow label displays the command’s name.

SmartPlant P&ID Setup and Customization Course Guide49 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant P&ID Reference Data**

The SmartPlant P&ID product supplies example reference data, and is in the*Program Installation Folder***\SmartPlant\P&ID Reference Data** folder. This reference data can serve as a starting point for P&ID creation, and can be fully customized to meet a project’s standards.

The delivered SmartPlant P&ID Reference Data contains the following:

- **Symbols** (.sym format)

**Notes:**

- For a book of the delivered symbols, reference the printable guide, SmartPlant Symbol Libraries Reference Guide, **or** the

SymbolLibrariesRefGuide.pdf file located in ~ *Program Installation* *Folder*\SmartPlant\P&ID Workstation\bin\resdlls\0009\

- The SmartPlant P&ID Reference Data is delivered in ANSI standard, but other engineering standards are also available.
- **Rules.rul**
- **ProjectStyles.spp**
- **InsulationSpec.isl**
- **Template Files**

o Templates (.pid format)

o Borders (.igr format)

- **Report files**
- **ExportLayer.xls**
- **SmartPlant Enterprise (integration) files**

**50** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Introducing Drawing Manager**

To open **Drawing Manager**, select **Start > All Programs > Intergraph SmartPlant** **P&ID > Drawing Manager**. **Drawing Manager** manages the drawing files in SmartPlant P&ID. You do not modify the designs themselves in **Drawing Manager**, but you do create, open, delete drawings and modify drawing properties.

**Drawing Manager** is also the interface for printing multiple drawings and for upgrading drawings to the current version of SmartPlant P&ID. The** Drawing** **Manager > Revisions** menu includes versioning tools for creating, comparing, and recovering deleted drawing versions.

**Drawing Manager User Interface**

The **Drawing Manager User Interface** consists of several areas (**Menu Bar**, the **Main Toolbar**, the **Tree View**, and the **List View**). The **Menu Bar** contains menus with pull-down commands. ** **The** Main Toolbar** displays command buttons. The **Tree** **View** on the left displays plant groups arranged in nodes. The **List** **View** on the right displays the list of drawings.

**Modifying the User Interface (View Menu)**

You can control the display of the **List** view using the **View** menu. You can add a filter so that only drawings that match specific criteria are displayed. You can display all drawings that reside under the selected node in the **Tree** view, and then customize what drawing properties are displayed and the order in which they are displayed in the **List** view.

SmartPlant P&ID Setup and Customization Course Guide51 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- You can drag-and-drop drawings from one plant group to another plant group, providing the drawings are in the same plant structure and the **Allow P&ID**

**Drawings** option has been enabled in SmartPlant Engineering Manager.

**Filter Command**

The **Drawing Manager >View** > **Filter** command opens the **Filter** dialog box.

***Filter Dialog Box***

The **Filter** dialog box sets options for the display of drawings in the **List** view.

**Definition** - Displays all defined criteria associated with a filter. To add to or modify the definition list, you must select a line in the list and then define or edit the property in the **Edit** group.

- **Match all** - Specifies that items matching ALL the filtering criteria pass through the filter.
- **Match any** - (Default) Specifies that items matching any one or more of the filtering criteria pass through the filter.
- **Add** - Places a new entry at the end of the existing definition list and enables the options in the **Edit** group so that you can edit the new entry.
- **Delete** - Removes the selected criterion from the definition list. This button is available only when you select a criterion in the definition list.

**Edit** - Allows you to define or edit a single line of filter definition criteria.

**52** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **Property** - Displays a list of all properties for a certain item type. Examples of properties include revision number and name. You define or modify filtering criteria by selecting a property, an operator, and a value.
- **Operator** - Specifies the relationship between the property and its value.

These relationships include greater than, >; equal to, =; not equal to, <>; and so forth.

- **Value** - Lists appropriate values for the property specified in the **Property** list. If a list of attributes is not already associated with the **Value** box, you must choose null or type a value, which can be free text. You can type a percent sign, **%**, as a wildcard character to find multiple characters, or type a question mark,? , as a wildcard character for a single character. Do not use an asterisk, , in the **Value** box.

**Notes:**

- View filters in Drawing Manager are strictly established only for the specific case at hand and are retained the next time you open Drawing Manager in the current plant.
- If you select a different plant, the filter is cleared.
- You cannot save individual filter settings.

**Clear Filter Command**

The **Drawing Manager >View** > **Clear Filter** command removes a filter from the view and displays all drawings.

**Notes:**

- If a filter is not applied to the view, this command is not available.
- If a filter is applied, the status is shown in the status bar.

SmartPlant P&ID Setup and Customization Course Guide53 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Include Subnodes Command**

The **Drawing Manager >View > Include Subnodes** command displays in the **List** view all the drawings that reside under the selected plant in the **Tree** view, not only those drawings that reside directly under the selected node.

**Note:**

- If you select a plant in the **Tree** view and then click **View > Include** **Subnodes**, the entire plant hierarchy is displayed in the **List** view. This command provides an easy way of viewing all drawings in the plant without having to open every Plant Group.

**Customize Current View Command**

The **Drawing Manager >View** > **Customize Current View** command opens the **Customize Current View** dialog box.

***Customize Current View Command***

The **Customize Current View** dialog box sets options for the information that is displayed in the **List** view of Drawing Manager.

**54** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Drawing properties** - Lists the drawing properties that are available for display in the **List** view. Select a property from this list and click **Add** to move it to the **Selected** **properties** list.

**Note:**

- If the Out-of-Date Drawing Status is selected, it will always be the first column displayed in the **List** view in Drawing Manager. The software indicates out-of-date drawings by displaying the

icon in the **Out-of-Date**

**Drawing Status** column.

**Selected properties** - List the properties that will display in the **List** view.

**Add** - Moves the property into the **Selected properties** list so that the selected information is displayed in the **List** view.

**Remove** - Moves the selected property back into the **Drawing properties** list. That information will no longer display in the **List** view.

**Move Up** - Moves the property you select in the **Selected properties** list up one position. Use this button to further customize the way the columns in the **List** view are displayed.

**Move Down** - Moves the property that you select in the **Selected Properties** list down one position. Use this button to further customize the way the columns in the **List** view are displayed.

**Working with Drawings**

Drawing Manager enables you to manage your P&ID and D&ID drawings by allowing you to create new drawings in your plant structure, open and view drawings, copy and paste, view and compare versions, and delete drawings.

**New Drawing Command**

The **File** > **New Drawing** command opens the **New Drawing** dialog box.

**New Drawing Dialog Box**

The **New Drawing** dialog box allows you to specify properties to create a new drawing. The drawing is created under the currently selected plant group node in the **Tree** view.

**Notes:**

- If the node you choose does not permit drawings to be created under it, the **New Drawing** command is not available.
- The **Drawing Number** and **Name** properties must be unique within each unit.
- For the **Document Type** property, you must select **P&IDs** or **D&IDs**.

SmartPlant P&ID Setup and Customization Course Guide55 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- The **Drawing Number**, **Name**, and **Template** properties on a drawing are always considered as Read/Write by **Drawing Manager** even when set to Read Only within the **Data Dictionary Manager**. This is because these properties must be set when creating a drawing.
- You can manage which properties appear within the **Optional** or **Required** **Field** category through **Options** **Manager** > **Settings** (Drawing Properties –

Optional and Drawing Properties – Required).

**Alphabetized Button**

- Select to display the drawing properties alphabetically.

This button acts as a toggle and is available when properties are displayed categorically.

**Categorized Button**

- Select to display the drawing properties in categories. This

button acts as a toggle and is available when properties are displayed alphabetically.

**OK** - Creates the new drawing, adds it to the selected plant node, and closes the **New** **Drawing** dialog box. After entering the Drawing Number or Name, you must select or tab to another field.

**Note:**

- For the **OK** command to be enabled, values for all the required properties must be entered.

**Cancel** - Closes the **New Drawing** dialog box without creating a new drawing.

**Create** - Creates a new drawing and adds it to the plant node. The **New Drawing** dialog box will remain open. This button is available only after you enter values for the **Required Fields** in the list of drawing properties. After entering the Drawing Number or Name you must select or tab to another field.

**56** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- For the **OK** command to be enabled, values for all the required properties must be entered.

**Move a Drawing**

1. In the Tree view, select the node in which the drawing resides.
2. In the List view, select the drawing that you want to move.
3. Drag and drop the selected drawing to the new location.

**Copy/Paste a Drawing**

The **Edit > Copy** command is used to copy one or more drawings from within the same plant. The copied drawing(s) can then be duplicated using the **Edit > Paste** command. To copy a drawing from one plant to another plant, refer to the Import Drawing command.

**Note:**

- Any graphics that have been band-aided should be deleted and replaced prior to using this command. A band-aid is a graphical representation in the drawing to alert the user that something is wrong with the graphics in a specific area within the drawing.
1. In the **Tree** view, select the node in which the drawing resides.
2. In the **List** view, select the drawing that you want to copy.

**Notes:**

- Use the Ctrl or Shift key to select more than one drawing.
- You can hold down the **Ctrl** key, select a drawing, and drag it to a new location to make a copy.
- You can drag-and-drop drawings from one plant group to another plant group, providing the P&IDs are in the same plant structure and the **Allow** **P&ID Drawings** option has been enabled in SmartPlant Engineering Manager.
1. Select **Copy**

on the main toolbar.

1. In the **Tree** view, select the node where the copy of the drawing will reside.

SmartPlant P&ID Setup and Customization Course Guide57 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. In the **List** view, select the location that you want to paste the copy of the drawing.
2. Select **Paste** on the main toolbar. The system displays the **Transformation** **Programs** dialog box.

**Sequence numbers**

- **Generate new** - Selecting the option causes existing tag sequence numbers to be set to null for any item that has the property **TagSequenceNo**. The null sequence number triggers the creation of new sequence numbers during

normal item tag validation.

- **Add value to the beginning of all sequence numbers** - When you select this option, you can use the box to type the values you want to display at the beginning of all your sequence numbers.
- **Keep existing if unique** - If the sequence number for a copied item is unique, it will be left as it was, but if a duplicate is detected, the tag sequence number will be changed.

**Clear piping material classification** — Select to remove any defined piping materials class.

**Clear process data** — Select to remove any values in the **Process** category. ** **

**Plant item associations -** Allows you to specify the behavior of the plant item associations when copying the drawing. ** **

- **Re-associate all plant items with the target** — All plant items, regardless of their plant group associations in the source, are associated with the target plant group of the copied drawing.
- **Retain existing plant item associations** — All plant items retain the same plant group associations that they had in the source. No changes are made to the associations.

**58** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **Re-associate items depending on original associations** — Those plant items that belong to the plant group of the drawing itself in the source are reassigned to the target plant group. Those plant items that were assigned to a different plant group from that of the drawing source plant group retain their existing override associations.
1. Select **OK**. The system displays the **Paste Drawings** dialog box.
2. When the processes complete, select **View Log** to view the report or select **Close** to dismiss the Paste Drawings dialog box.

**Notes:**

- You must have the appropriate permissions, specified in SmartPlant Engineering Manager, to paste drawings.
- You can change the name of a pasted drawing by selecting the drawing and then selecting **Edit > Properties**.
- For more information about creating a transformation program, see

*Customizing the Sample Projects* in the *SmartPlant P&ID Programmer’s* *Guide.*

- A multi-rep model item is created at the target only once if the drawings that contain all the representations for it are selected for copy in one session. If the drawings are copied in separate sessions, the model item is re-created at the target for that session.
- Paired OPCs in a drawing that are not copied (for example, not in a select set) are placed in the plant stockpile. Paired OPCs in a copied drawing have their relationships maintained by the copy. Paired OPCs are not moved from the plant stockpile to a drawing by a subsequent copy session.
- A plant group item is created at the target only once if the drawings that contains all its members are selected for copy in one session. If the member drawings are copied in separate sessions, the plant item group is re-created at the target for each session.
- For copying/pasting of multiple drawings, the recreate process will begin after the paste action for all the drawings.

SmartPlant P&ID Setup and Customization Course Guide59 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Delete Command**

The **Edit > Delete** command allows you to delete drawings from the **List** view and from the plant structure. You must have the appropriate permissions, specified in SmartPlant Engineering Manager, to delete a drawing.

**Delete a Drawing**

1. In the tree view, select the drawing that you want to delete.
2. Select **File > Delete**.
3. To confirm the drawing deletion, select **Yes** on the message box.
4. Select **View Log** on the **Deleting Drawings** dialog box to review notes from the drawing deletion process.

**Notes:**

- If you have a saved version of a deleted drawing, you can retrieve the drawing as it was when you saved it. *For more information, see Recover a* *Version of a Deleted Drawing.*
- If a plant group has no drawings or plant items belonging to it, you can delete that hierarchy item in SmartPlant Engineering Manager. If you have associated a plant item with a hierarchy item by using the Properties window in SmartPlant P&ID, it can look as if no drawings are associated with that plant group, and you cannot delete that hierarchy item in

SmartPlant Engineering Manager.

- You can also delete saved versions of a drawing, without deleting the drawing itself.

**Properties Command**

The **Edit > Properties** command opens the **Properties** dialog box, which displays the plant group properties or drawing properties based on the item selected in the **Tree** or **List** view.

Plant group properties are read-only. You can modify some of the drawing properties, such as the name, version, title, and description.

**Modify Drawing Properties**

1. In the list view, select the drawing whose properties you want to modify.
2. Select **Edit > Properties**.
3. On the **Drawing** **Properties** dialog box, change or add values to the drawing properties. Many drawing properties cannot be modified after the drawing is created.

**60** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select **OK**.

**Note:**

- You can rename and renumber a drawing, but keep in mind possible naming conflicts that can arise when you retrieve a drawing under an older name. A drawing which has been renamed will appear in the list of deleted drawings when you use the **Revisions > Fetch Deleted Drawings** command even though it has not actually been deleted.

**Opening Drawings**

You can open drawings from either Drawing Manager or from SmartPlant P&ID.

When you open a drawing from Drawing Manager, the SmartPlant P&ID application will launch and open the selected drawing. Since Drawing Manager is used to create all the new drawings, this interface provides a quick and easy way to open the newly created drawings; allowing viewing or modification in the SmartPlant P&ID

application. You can also open drawings directly from SmartPlant P&ID.

**Open a Drawing from Drawing Manager**

1. In the **Drawing Manager** tree view, select the node where the drawing resides.
2. In the list view, select the drawing you want to open.
3. Select **File > Open Drawing**.
4. View or modify your drawing in **SmartPlant P&ID**.

**Notes:**

- You may also use the **Open Drawing** command on the right-click menu, or you can double-click a drawing in the list view.
- You must have the appropriate permissions, specified in SmartPlant Engineering Manager, to view or modify drawings.

**Open a Drawing in a Different Site from Drawing Manager**

1. From **Drawing Manager**, select **File** > **Open Database**.
2. On the **Open Plant Structure** dialog box, select **Site Server**.
3. On the Open Site Server dialog box, select the correct smartplantv4.ini file, and then select Open.
4. On the **Open Plant Structure** dialog box, select the correct plant, and then select **Open**.
5. Navigate to the correct drawing in the list view, and select **File** > **Open Drawing**.

SmartPlant P&ID Setup and Customization Course Guide61 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Open a Drawing in a Different Plant in the Same Site from**

**Drawing Manager**

1. From **Drawing Manager**, select **File** > **Open Database**.
2. On the **Open Plant Structure** dialog box, select the correct plant, and then select **Open**.
3. Navigate to the correct drawing in the list view, and select **File** > **Open Drawing**.

**Open Drawings from SmartPlant P&ID**

1. Select **Start > All Programs > Intergraph SmartPlant P&ID > SmartPlant** **P&ID**.
2. Select **File > Open**. The **Open** dialog box appears.
3. In the list, select a unit (or other plant group) to display the drawings it contains.
4. Double-click a drawing in the list, and then select **Open**.
5. SmartPlant P&ID opens and displays the selected drawing.

**Open a Drawing in a Different Database**

1. On the main menu bar, select **File > Open**.
2. On the **Open** dialog box, select the **Open Database** button

.

1. On the **Open Database** dialog box, select **Site Server**.

**62** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. On **the Open Site Server** dialog box, select the correct **smartplantv4.ini** file and select **OK**.
2. Select the correct plant on the **Open Database** dialog box and select **OK**.
3. Navigate to the correct drawing in the **Open** dialog box and double-click it.

**Import Drawings Command**

The **Drawing Manager > File > Import Drawings** command opens the **Import** **Drawings Wizard**.

SmartPlant P&ID Setup and Customization Course Guide63 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes**:

- Any graphics that have been band-aided should be deleted and

replaced prior to using this command.

- If your target plant uses a shorter data string value than the source plant, the string will be truncated. For example, if the source plant has a maximum character value of 80 set for a field, and the target plant has a maximum character value of 40 set for the same field, only the

first 40 characters of the field will be mapped.

- If your source drawings and target database use different languages, you are required to use a database created using the UTF-8 character

set for unrestricted multilingual support. For example, if the source drawing name contains German characters, they will be converted to

English during the import. When you try to open the drawing, the

physical file will not be found and the product will try to re-create the drawing.

- When importing a symbol’s representation properties, the

representation properties are a pure copy of the source symbol. The

representation properties of the target symbol are overwritten. The

result is that the object in the drawing may not agree with the target catalog item.

**Import Drawings Wizard**

The **Import Drawings Wizard** allows you to copy drawings from another plant in the same site or a different site.

**Import Drawings Wizard - Welcome**

The **Import Drawings Wizard** - **Welcome** screen introduces the **Import Drawings** **Wizard**.

**64** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Import Drawing Wizard - Select Source Plant**

The **Import Drawings Wizard** - **Select Source Plant** dialog allows you to select the plant that contains the drawings you want to import. Select the ellipse button and use the **Open Plant Structure Dialog Box** to define the location of the drawings.

SmartPlant P&ID Setup and Customization Course Guide65 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

***Open Plant Structure Dialog Box***

The **Open Plant Structure** dialog box sets options for connecting to a site and plant structure and passes user access information to the application.

**Available plant structure** - Lists those plant structures found on the network.

You can select only one item from this list at a time.

**Open** - Connects you to the selected plant or project database. The **Open** command also checks to make sure you have the correct access privileges for the selected database and passes your access information back to Drawing Manager.

**Site Server** - Opens the **Open Site Server** dialog box, allowing you to select the smartplantv4.ini file for the site you want to access. Plant structures contained in the site you selected display in the **Available plant structures** list.

**Application Type** - Allows you to select an application for filtering the available plant structures that are associated with that application. If all the plants in the site are associated with one application only, the value is read-only.

**Import Drawing Wizard - Select Drawings**

The **Import Drawings Wizard** - **Select Drawings** dialog displays a list of drawings available for importing and allows you to select the drawings to be imported.

**66** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Filter**

- Opens the **Filter** dialog box that allows you to specify the drawings that are displayed in the list.

**Clear Filter**

- Deactivates any filter you have applied to the list of drawings that appears in the List view.

**Include Subnodes**

- Displays all the drawings and node names that reside in the

currently selected node.

**Details**

- Displays a detailed view of the drawing properties. You can sort by the listed properties.

**List**

- Displays a list of the drawings. One property per drawing is displayed.

**Properties**

- Displays the properties for the selected item. These values display in the **Properties** dialog box.

**Customize View**

- Opens the **Customize Current View** dialog box, which

allows you to specify the information about each drawing that is displayed.

**Import Drawing Wizard - Missing Symbols Dialog Box**

The **Import Drawings Wizard** – **Missing Symbols** Dialog Box displays a list of missing symbols. After you select your drawing(s) for import, the software performs an analysis of in-use data. If there are any missing symbols, this dialog displays automatically.

Symbol maps are created for missing symbols but since the symbol is not found in the catalog, the information normally obtained from the symbol (Item Type, Type Value, SmartPlant P&ID Setup and Customization Course Guide67 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

Connect Point, and so forth) cannot be determined. Symbol maps for missing symbols are marked as **In Use**. The map status is set to **Incomplete**.

You must replace the missing symbol to resolve the error. To replace the missing symbol, locate a saved version of the missing symbol and copy it to the exact location of the missing symbol. When the symbol is replaced, select the **Import Drawings** command to start the command again.

**Source catalog path** - Displays the catalog root path where your symbols are installed.

**Symbols** - Displays an alphabetical list of any missing symbols.

**Import Drawing Wizard - Complete Import Map**

The **Import Drawings Wizard** – **Complete Import Map** dialog** **displays the import map and allows you to define how data from the source plant is to be mapped into data in the target plant. The** Import Drawings Wizard** supports two different approaches to mapping. They are **Just-In-Time Mapping** and **Proactive Mapping**.

For more information, refer to *SmartPlant P&ID Drawing Manager Help topic:* *Import Drawings Wizard – Complete Import Map*.

**Note**:

- You must have the same size symbols available when importing. Imported parametric symbols will use existing parametric parameters.

---

**68** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

---

**New**

- Creates a new import map file. If there are any unsaved changes in the current map file, you are prompted to save those changes if needed. The new map file is automatically updated with existing values that are in use by the selected drawing.

**Open**

- Opens a new import map file. If there are any unsaved changes in the current map file, you are prompted to save those changes if needed. The import map file is validated against both the source and target plants. Map entries for items that do not exist in the current source and target plants are deleted. The map is automatically updated with the existing values in use by the selected drawings.

**Save**

- Writes the current import map file to the disk using the standard naming convention.

**Show in Use**

- If selected, this command filters the display to show only the items being used by the selected drawing. By default, this option is selected. If not selected, the display is based on all items in the map.

**Show Incomplete**

- If selected, this command filters the display to show only the

items displaying an incomplete map status. By default, this option is selected. If not selected, all items display.

**Update from Source**

- Reads data from the source plant and then populates the

import map file. The import map is updated using the source plant data dictionary and catalog definitions. If you have the top node in the **Tree** selected, a complete update is performed. If any lower level node in the **Tree** is selected, a partial update is performed. This option fills in the source value for each created map object and automatically completes the mapping process by filling in the target value for certain SmartPlant P&ID Setup and Customization Course Guide69 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

objects. Properties in the source plant that match with identically named properties in the target plant are automatically mapped. Select list values and symbols are not automatically mapped. If you are doing a partial update (a lower level node in the **Tree** view is selected when using this command), select lists should be updated before item types or symbols. This will help to create the proper relationships between the items.

**Auto Complete**

- ***- Automatically maps source objects to the corresponding target objects where possible. If the target value is already defined, the target value is not changed. If you have the top node in the Tree selected, a full operation is performed.

If any lower level node in the Tree is selected, a partial operation is performed. When applied to properties, the target property name and data type must match the source for it to be automatically mapped. When applied to select list values, you can use the **Select List Options Dialog Box** to match by text, match by index or match by text and index. When applied to symbols, the item type and the mapped type property must match for the symbol to be automatically mapped.

Piping components, instruments, nozzles, and OPCs can contain connect points. For symbols that contain connect points, the number and type of connect points in the target symbol must match those of the source symbol. For labels, the Label Type and the Labeled Item Type properties must match the values of the source symbol. If a single symbol is found in the target catalog that matches the source properties, it is used. If multiple matching symbols are found, and one of those has the same name as the source symbol, then it is used. Mapping of symbols depends on the catalog index.

Interactive mapping of select lists is not supported. Mapping of select lists is always done through **Auto Complete** and is always driven by the mapping of the attributes that use them. To map a select list that is not in-use, you must first map an attribute that references it. Select Piping Component under Item Type Maps and invoke the Update From Source command. This brings in all the attributes for Piping Component and internally calls **Auto Complete**. All the attributes are mapped and the select lists that are referenced by those attributes are also mapped. Now, you can select **Action** under **Select List Maps** and run **Auto Complete**. This will complete the mapping of the select list values.

**Clean Up Map File**

- Removes items from the import map that are not currently

mapped to a target item. If you have the top node in the Tree selected, a full operation is performed. If any lower level node in the Tree view is selected, a partial operation is performed.

**Update Catalog Index**

- Updates the catalog index to include the latest

information about all symbols in the target catalog. The mapping of symbols depends on the catalog index. The catalog index should be updated after any changes are made to the symbols in the catalog. The catalog index is saved in the file named *CatalogIndex.xml* in the top-level folder of the catalog.

**70** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Import Drawings Wizard - Select List Options Dialog Box**

The **Import Drawings Wizard** – **Select List Option Dialog Box** defines an option for resolving select list matching between the source and target plant. This dialog box displays when you select **Auto Complete**

on the **Complete Import Map**

wizard screen.

**Match index** - Matches index, or number, associated with each select list item. For example, you would use this option if your source plant contains English text values and the target plant contains German values. The values would be assigned per the select list index (its numeric value).

**Match text** - Matches the text, or string, associated with each select list item. For example, use this option if you have added entries to your select list. This option matches the text values and ignores the numeric values.

**Match text and index** - Matches the index and text associated with each select list item.

**Import Drawing Wizard - Target Symbols Dialog Box**

The **Import Drawings Wizard -** **Target Symbols** dialog box allows you to select a target symbol file for mapping with a source symbol where the software cannot find a suitable target symbol automatically. The dialog box displays using the **Complete** **Import Map** wizard screen. For more information, refer to *SmartPlant P&ID*

*Drawing Manager Help topic: Importing Drawings – Map Source and Target* *Symbols*.

SmartPlant P&ID Setup and Customization Course Guide71 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Import Drawing Wizard - Options**

The **Import Drawings Wizard –** **Options** dialog box allows you to select a template size for your drawing. You can also define a program that want to use during the transformation process. This program could contain any special instructions you want applied during the import. A transformation program is delivered with the software.

You can use the delivered program as an example to create your own transformation programs.

**Use source templates** – Select to use the template associated with each drawing that you import from the source plant. * *

**Target template** - Allows you to select the template that defines the sheet size for all drawings imported into the target plant. This option is not available if you select **Use** **source templates**. ** **

**Apply default formats** - When selected, the software reformats property values from the source database using the default format for each property in the target database. This applies to all properties, but is most important for Unit of Measure (UOM) properties such as temperatures and pressures. If a drawing is being imported from a source plant that shares the same locale as the target plant, typically this option should be turned off to prevent any loss of formatting during the import operation. For example, if pressure values are expressed in several different units of measure for different properties, these would all be imported exactly as they are in the source database. If a drawing is being imported from a source plant in one locale into a target plant in a different locale, typically this option should be turned on. This ensures that locale-dependent formatting is applied to all values. For example, if importing from a plant where the decimal symbol is a comma (,) to a plant where the decimal symbol is a period (.), property values should be reformatted using the default formats. ** **

**72** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Import revisions** – Select to include with the import all drawing revisions that were made in the source plant.

**Use source drawing name and number** – Select to keep the original name and number of the drawings without the addition of any prefix. Clear to specify new drawing names and numbers. When cleared, the software adds a prefix to the drawing name indicating the name of the source plant.

**Do not recreate drawings** – Select to skip re-creation of the graphical drawings when importing the drawing data. This improves performance when you are importing many drawings. If you select this option, you are prompted to recreate a drawing when you open it.

**Transformation program** - This option displays the name of the transformation program defined by the Options Manager setting **Import Transformation** **Program**. You can copy the delivered code and then create your own customized transformation program. Then, you can use this field to enter the name of your transformation program. The delivered import transformation program is CopyTransformation.Import. You are not required to use a transformation program.

**Custom Options** - If a * * transformation program is defined, this command displays the **Transformation Programs** dialog box. It is used to define options for modifying property values during the import process. The options that appear on the **Transformation Programs** dialog box depend on the transformation program defined by the Options Manager setting **Import Transformation Program**. You can copy the delivered code and then create your own customized transformation program. The delivered transformation program used for importing drawings is **CopyTransformation.Import**.

SmartPlant P&ID Setup and Customization Course Guide73 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Sequence numbers**

- **Generate new** - Selecting the option causes existing tag sequence numbers to be set to null for any item that has the property **TagSequenceNo**. The null sequence number triggers the creation of new sequence numbers during normal item tag validation.
- **Add value to the beginning of all sequence numbers** - When you select this option, you can use the box to type the values you want to display at the beginning of all your sequence numbers. ** **
- **Keep existing if unique** - If the sequence number for an imported item is unique within the target plant, it will be left as it was in the source plant, but if a duplicate is detected in the target plant, the tag sequence number of the imported item will be changed.

**Notes**:

- Duplicate item tags are not allowed for loops and instruments.
- When importing a drawing that has a loop associated with one or more instruments, the sequence number that the newly-created loop receives is in accordance with the selected option; however, the instrument / loop

associations will correspond to those in the source drawing and the

instruments will retain the original values for their **Tag Seq No** and **Item Tag** properties. This may result in a mismatch between the loop and instrument sequence numbers. To resolve this situation, you must update the related instrument tags on the **Update Associated Instruments with Loop**

**Properties** dialog box in SmartPlant P&ID.

**Clear piping material classification** - Select to remove any defined piping materials class. ** **

**Clear process data** - Select to remove any values in the **Process** category. ** **

**Drawing and plant item associations** - Allows you to specify the behavior of the plant item associations when importing the drawing, determined by the combination of selections that you make under the **Associate drawings** and **Associate plant items** sections.

**Associate drawings**

- **By current plant group** — When performing the import, the software re-associates all drawings in the selected source plant group with the target plant group selected when Import Drawing was initiated.
- **By mapping (multiple plant groups)** — When performing the import, the software re-associates the drawings in each plant group with the target plant groups chosen in the **Mapping** dialog box. For the current source and target plant groups, the mapping overrides the selection made at the initiation of Import Drawing.

**74** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Associate plant items**

- **By drawing plant group associations** — All plant items in each plant group, regardless of their drawing associations in the source, are re-associated with the target plant group specified for the drawing.
- **By mapping** — All plant items in each plant group, regardless of their drawing associations in the source, are re-associated per the definitions made in the **Mapping** dialog box.
- **Re-associate items depending on original associations** — Those plant items that belong to the plant group of the drawing itself follow the mapping for the drawing. Other plant items follow the plant item mapping.

**‘In use’ plant group data only** — Filters the plant groups available for mapping so that only those plant groups that have associated plant items and drawings will be available on the **Mapping** dialog box.

**By mapping** — Opens the **Mapping** **Dialog Box** to allow you to define the associations between the target and source plant groups for the drawings and / or the plant items depending on the settings you choose. This button is only enabled when you make appropriate selections under **Import options**.

**Mapping Dialog Box**

The **Mapping Dialog Box** allows you to define mapping between source and target plant groups when importing drawings. Depending on the options that you select on the **Transformation Programs** dialog box, the mapping can apply to drawings, plant items, or both.

SmartPlant P&ID Setup and Customization Course Guide75 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Source -** Shows the source plant hierarchy.

**Target** - Shows the hierarchy for the target plant. From this window, you can select a plant group at any level for mapping, but note that if there is a restriction on associating a drawing with a plant group, an error message will appear.

**Map** - Copies the selected plant group item in the target plant hierarchy to the selected **Target Path** row. In this way, the mapping is defined to the corresponding plant group in the **Source Path** row.

**Remove Mapping** - Removes the selected target plant group item from the Plant Group mapping, allowing you to redefine the mapping target for the specified source.

**Plant groups** - Displays the mapping assignments and paths between the source and target plant groups.

- **Source Path** - Shows the paths of all the plant groups in the plant. If you selected the **‘In use’ plant group data only** check box on the **Transformation Programs** dialog box, only the paths of those plant groups that have associated drawings or plant items appear.
- **Target Path** - Displays the paths of the plant groups that you have chosen as the target. All the rows must contain values.

**Import Drawing Wizard - Summary**

The **Import Drawings Wizard –** **Summary** dialog box displays a summary of information about the imported drawing(s). You must select Finish to complete the import process.

**76** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Save a Drawing in Other Formats**

The **File > Save As** command in **Drawing Manager** and **SmartPlant P&ID**

allows you to save the selected drawings in a specified file format. The following formats are supported:

- AutoCAD (*.dwg and *.dxf)
- MicroStation (*.dgn)
- PDF (*.pdf)
- ISO 15926 (*.xml)

**Notes:**

- In SmartPlant P&ID version 2014, the **Save As** command now supports **AutoCAD 2012** and **MicroStation V8**.
- For Save As to AutoCAD .dwg format, the out of the box translation process in SPPID v2014 works much better than the previous versions, and you can get good translation results without the modification of any files and without running the **PID Cleanup for AutoCAD** Utility in AutoCAD.
- With SPPID v2014, you are not required to run the exportlayer.dll on the drawings for the filter to layer/level mapping. This is performed automatically in the background with the **Save As** command.
- When saving as PDF, select **PDF Settings** to open the **PDF Settings** dialog box, where you can specify the resolution, color options, JPEG compression, and whether to include inconsistency markers in the output.
- The ISO 15926 (*.xml) format is available only if you have a valid license ID

and you have run a procedure that activates this option.

1. From Drawing Manager or SmartPlant P&ID, select **File > Save As**.

**Note:**

- In Drawing Manager, you can select a single drawing or multiple

drawings (by holding down the SHIFT or CTRL key) before

running the **Save As** command.

1. On the **Save As** dialog box, select **Browse** to open the **File Name and Path** window to navigate to the desired path where you want to save the drawing.
2. In the **File Name** box, type a new name for the drawing, and select **Save**.
3. In the **Save As Type** box, select the file format for the drawing.
4. Select **OK** to Save.

SmartPlant P&ID Setup and Customization Course Guide77 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Working with Drawing Templates**

The **P&ID Reference Data > Template Files** includes several standard drawing templates in metric and English. You usually create a new drawing based on one of these existing templates. However, it is possible to customize a drawing template to meet your needs. This task is accomplished inside the design software by using commands on the **File** menu. The pre-defined size choices for a new template are extensive.

The default storage location for templates is specified in **SmartPlant® P&ID**

**Options Manager > Settings > PID Template Path** field. When creating a new template, save the file in the location specified in SmartPlant® P&ID Options Manager to utilize the Template during creation of a drawing.

**Notes:**

- If you want to create custom border files for your drawing templates, use **Intergraph SmartSketch**. Refer to **SmartSketch Help** for instructions on how to create a border. Drawing objects on the background sheet of the .igr file that you want to be included in the border must be copied and placed on the working sheet using SmartSketch prior to inserting the .igr file into SmartPlant P&ID.
- The border file must be inserted into the ’ **DrawingBorder**’ layer in the SmartPlant P&ID .pid template file.
- You can either link or embed your border, SmartSketch .igr, file in the new templates you create in SmartPlant P&ID. Once you embed a border file into a drawing template and a drawing is created in Drawing Manager using that template, any changes to the border file are not reflected in drawings created prior to the change. If you link a border file, instead of embedding it, and then subsequently change that border in SmartSketch, changes are reflected automatically in your drawing.
- Linking border files will impact the drawing performance.
- If you intend to link a border file, make sure that you set the Windows File Explorer property of the border file to **Read-only**.
- The software also includes a set of title block labels that fit the delivered drawing templates. If you create a new template, you can also create a new title block label using **Catalog Manager** that fits the title block of your template correctly and that contains the appropriate information. Title Block Labels can be placed within a Template or within the drawing.

**78** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Creating a Drawing Template**

1. Select **Start** > **All Programs** > **Intergraph SmartPlant P&ID** > **SmartPlant** **P&ID**.
2. On the main toolbar, select **New Template**

OR select **File** > **New** **Template.**

1. Select **File > Page Setup**.
2. On the **Page Setup** dialog in the **Sheet size** box, choose a standard size or define a custom size for this template, and select **OK**.
3. Select **File** > **Properties**.
4. On the **Units** tab of the **File Properties** dialog box, specify the unit in the **Length**, **Angle**, and **Area readout** boxes to define default units of measurement.
5. You can also add general identifying information on the **Summary** tab.
6. Select **OK**.
7. Select **Edit** > **Insert** > **Object**.
8. On the** Insert Object** dialog box, perform one of the following:
- Check the **Link** option to link the border in the template.

OR

- Un-Check the **Link** option to embed the border in the template.
1. Select **Browse**, find the **border** **file** and select **Open**.
2. Select **OK**.
3. Select the **ESC** button OR select the Left Mouse button to position the Border File.
4. Right-click on the inserted border file, and select** Properties**.
5. On the **Properties** dialog, select the “**DrawingBorder**” layer, uncheck “**Use** **photographic style scale**”, and select **OK**.

SmartPlant P&ID Setup and Customization Course Guide79 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select **File > Save As** and specify a name for your template on the **Save As** dialog box.
2. **File** > **Exit** from **SmartPlant P&ID**.

**Options for Templates**

You may specify some P&ID environment settings in the template file. This will ensure that all users start with the same settings for the view properties, grid spacing and index, colors, and the behavior of OPC partner placement.

**Notes:**

- Make sure the units of measure for the border file (.igr file) and the **SPPID**

template are the same. Look at **File** > **Properties** in **SmartSketch** and **SPPID** and compare both the unit and the precision for each readout.

- When inserting the border into the template file in SPPID, you may need to select scale of **1:1 in** on the **Tools** > **Options** > **Files** tab.
- When specifying fonts for the border text in SmartSketch, make sure to install the fonts on end-user machines. Otherwise, the text on that user’s machine will not appear correctly.

**Properties Command (View Menu)**

The **View > Properties** command displays the **View Properties Dialog Box** which lets you define and control settings for the active view.

**80** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Display tab (View Properties Dialog Box)**

You may select any of the checkboxes on this tab. By default, most are already selected. However, you may want to include **Prevent Selection of inserted objects.**

This will prevent users from accidentally deleting the border file from their drawings.

The user may deselect this later if needed.

**Grid tab (View Properties Dialog Box)**

You may want to specify a standard grid spacing and grid index for the users. The user at an individual level if needed may change this.

**Note:**

- Do not use a dynamic grid when creating the border or template. A dynamic grid is not fixed and will not provide the degree of precision needed.

**Options Command (Tools Menu)**

The **Tools > Options** command displays the **Options Dialog Box** which lets you set options for the current drawing.

**Colors tab (Options Dialog Box)**

You may want to specify a background color for the P&ID drawings.

SmartPlant P&ID Setup and Customization Course Guide81 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Placement tab (Options Dialog Box)**

If you select Place partner OPC in plant stockpile, the software will default to placing OPC mates in the plant stockpile rather than giving the user **the Set Stockpile** **Location of Partner OPC** dialog box.

**82** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Using the SmartPlant Migration Wizard**

The **SmartPlant Migration Wizard** is a *data* migration tool provided by SmartPlant P&ID for converting and importing process flow diagrams (PFDs) and preliminary process and instrumentation diagrams (P&IDs) from SmartSketch into SmartPlant P&ID. When migrating your SmartSketch file to SmartPlant P&ID, the SmartPlant Migration Wizard maintains graphic visual fidelity. During processing, the SmartPlant Migration Wizard scans the SmartSketch file and maps all the objects to SmartPlant P&ID equivalent objects.

**Notes:**

- To import a SmartSketch drawing into SmartPlant P&ID, you must have SmartSketch installed on your computer.
- The SmartSketch Migrator converts entire files only. If you want to migrate only a portion of a file, select the geometry that you want to migrate and copy and paste it into another file in SmartSketch. Then use the file just created for the migration process.
- Any graphics that cannot be mapped are placed in a SmartSketch file that is then placed as an inserted object in the SmartPlant P&ID file. The *database* does not contain any information for these unmapped objects.
- You do not have to draw two identical symbols, one for SmartSketch and one for SmartPlant P&ID. You can create the symbol in SmartSketch and define it as needed for glue, drag points, origin, and so forth. You can then copy that symbol to the SmartPlant folder of symbols, open it in the SmartPlant P&ID

Catalog Manager, and define it in SmartPlant. In this way, you only need to create the graphics once.

- To determine if all the graphics in your file migrated correctly, view the **GetSmart.log** file in the Temp folder. This file contains information about the migration such as the file that was migrated, the time that the migration started and stopped, the symbols that were migrated, and any errors encountered during the migration.

**Importing a SmartSketch File**

1. Open the drawing that you want to import the SmartSketch objects into.
2. To start the SmartPlant Migration Wizard, select **File > Import > SmartSketch.**

SmartPlant P&ID Setup and Customization Course Guide83 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. Follow the instructions in the SmartSketch Migrator.

**Important**

Several criteria must be met before the symbol will migrate:

- The symbol must exist in both SmartSketch and SmartPlant.
- Both symbols should have the same origin location.
- Both symbols must have the same code. The SmartPlant Migration Wizard uses AABBCC codes to map the symbols. In SmartSketch, these are

referenced as *Code*; in SmartPlant they are referenced as *AABBCC_code*.

The AABBCC code value can be any string if it is unique in both

SmartSketch and SmartPlant.

**Files Used During the Migration**

Three files in the **~ *Program Installation Folder*\SmartPlant\P&ID**

**Workstation\bin** folder are used for migration:

- **SymbolMap.csv** is a symbol map of all the SmartPlant P&ID symbols and their corresponding AABBCC_codes.

When the SmartPlant Migration Wizard is executed, it creates a symbol map file.

This map file, **SymbolMap.csv**, is a listing of all SmartPlant symbols, their location and their associated AABBCC_code. You can open the SymbolMap.csv file in Excel to check for a duplicate code.

Delivered symbols with a matching AABBCC code are mapped intelligently to the equivalent SmartPlant P&ID symbol, or you can edit the symbol map file to equate the symbol names between SmartSketch and SmartPlant P&ID.

- **RotationMap.csv** is a map to add angular rotation between SmartSketch and SmartPlant objects. The map is primarily for Nozzles and is used for auto-aligning symbols (SmartSketch and SmartPlant handle auto-alignment

differently).

- **ConnectorMap.csv** is a map to make the connection between SmartSketch line styles and SmartPlant piping symbols.

**84** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- This file needs to be edited if you add new line styles in SmartSketch and want to migrate.

**Placement Order**

After the SmartSketch file is scanned and all its objects are mapped to SmartPlant P&ID objects, the Migrator uses rules to determine the order in which to place the resulting symbols. Certain symbols cannot be placed unless a rule has been met. For example, a nozzle cannot be placed unless it is attached to a piece of equipment.

SmartSketch does not have rule sets. To account for the rules in SmartPlant P&ID, the Migrator looks at the SmartSketch symbols to determine what the symbols are attached to. Symbol placement is performed in the following order:

1. Stand-alone symbols
2. Symbols attached to stand-alone symbols
3. Connectors and pipes
4. Symbols attached to connectors or pipes
5. Symbols attached to symbols that are attached to a connector or pipe 6. Labels
6. SmartSketch graphics that are not recognized as symbols

**Rule Considerations**

Because the SmartPlant Migration Wizard cannot account for all the rule possibilities that are defined in the default SmartPlant P&ID rule set or a customized rule set, you must create your SmartSketch drawing with the SmartPlant P&ID rule set in mind.

**Supported Templates** - Intergraph Process Flow and P&ID symbols map to the SmartPlant P&ID reference data included with the software.

**Symbols** - Delivered symbols with a matching AABBCC code are mapped intelligently to the equivalent SmartPlant P&ID symbol, or you can edit a symbol map file to equate the symbol names between SmartSketch and SmartPlant P&ID.

**Notes:**

- The Code attribute is visible in SmartSketch for the SmartSketch symbol; the AABBCC code is visible for SmartPlant P&ID symbols in Catalog Manager.

These attributes are not visible in Windows Explorer.

- Because SmartSketch is file-driven and SmartPlant P&ID is database-driven, both products have independent sets of symbols; therefore, symbol definitions and attributes migrated from a SmartSketch file are stored as properties in the SmartPlant P&ID database. SmartSketch symbol attributes are conditionally migrated; this means that the attribute must exist as a SmartPlant P&ID

SmartPlant P&ID Setup and Customization Course Guide85 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

property for that symbol. SmartSketch has a default set of attributes for vessels, pumps, compressors, and shell and tube exchangers. These attributes are the same as the SmartPlant P&ID properties for the same items. All those attributes, if given a value in SmartSketch, migrate to the SmartPlant P&ID

property database. You can add your own unique attributes to a P&ID symbol in SmartSketch, and if that same symbol with same properties is available in SmartPlant P&ID, custom SmartSketch attributes can migrate into those properties. You define custom properties for SmartPlant P&ID symbols by using Catalog Manager.

**Nozzles** - Nozzles are required for connection of piping in SmartPlant P&ID. Nozzles are required in the SmartSketch document for connections to be established when converted to SmartPlant P&ID.

**Non-Nozzle Connections** - Piping linear objects not connected to nozzles are placed in SmartPlant P&ID, but are not connected. You must make valid connections manually in SmartPlant P&ID.

**Flow** - Appropriate flow direction is established based on the terminator of the connector.

**Properties** - User-defined and default SmartSketch properties are mapped to an equivalent SmartPlant P&ID property.

**SmartLabels** - Item tags and other single property labels are maintained intelligently.

**Notes:**

- Labels in SmartSketch files are migrated very much like symbols. Any label placed in SmartSketch must have an equivalent label in SmartPlant P&ID

before it can migrate. SmartSketch does include a subset of the SmartPlant P&ID labels, and most of the common labels are smart labels, which are labels that are associated with one or more object properties. The properties of these smart labels are passed to the symbol to which they are attached and migrate to SmartPlant P&ID.

- To assign an AABBCC code to a SmartPlant P&ID label so that it matches a SmartSketch label, do the following.
1. Open the P&ID label in Catalog Manager.
2. Right-click the symbol page to open the **File Properties** dialog box, and select the **Symbol** tab.
3. In the **Name** box, type **AABBCC_code**.
4. In the **Type** box, select **Text**.
5. In the **Value** box, enter the appropriate AABBCC code, for example, **1F6Y01**.

**Unrecognized Graphics and Annotations** - All unrecognized graphics are inserted in the SmartPlant P&ID drawing as embedded SmartSketch graphics; inserted **86** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

objects. This rule maintains visual fidelity even if there are items that could not be mapped intelligently.

**Limitations** - The following list shows planned limitations of the Migrator:

- Multiple iterations are not supported.
- Flow direction that is indicated by using symbols is not understood.
- The primary goal is *not* to take fully developed P&IDs into a data-centric environment.
- The SmartSketch Migrator converts entire files only. If you want to migrate only a portion of a file, select the geometry that you want to migrate and copy and paste it into another file in SmartSketch. Then use the file just created for the migration process.

SmartPlant P&ID Setup and Customization Course Guide87 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Working with Catalog Manager**

**Catalog Manager** is a stand-alone application that you can use to define symbols and their properties for use in SmartPlant P&ID or SmartPlant Electrical. To open Catalog Manager, select **Start > All Programs > Intergraph SmartPlant Engineering** **Manager > Catalog Manager**.

From **P&ID Reference Data > Symbols**, Catalog Manager is supplied with a varied selection of symbols for use in different types of drawings. You can use these symbols as delivered, or edit them in Catalog Manager to create your own customized symbols. Catalog Manager includes several of the commands available in SmartSketch® for the creation of graphics.

**Catalog Manager** allows you to create and edit symbols. Symbols are comprised of a drawing (graphical representation) of the item as well as the properties associated with that item.

A symbol is stored as a document with a .sym extension. You can create a symbol by selecting the **New Item** command, when the bottom section is active, on the **Catalog** **Explorer > File** menu or with the **Create** **Symbol**

command on the Draw

Toolbar. An origin

is automatically inserted into the symbol upon opening of the

symbol. After defining the sym, you can save the symbol with the **File** > **Save** **command**.

**Creating a New Symbol**

Creating new symbols is different from cloning existing symbols. When you create a new symbol, you must define all the graphics and properties for the new symbol.

When you clone a symbol, the software copies all the graphics and associated properties for the original symbol to the new, cloned symbol. You can then modify the properties of the cloned symbol.

**Note:**

- When you create a new symbol, its pre-defined attributes and the graphic are stored in the .sym file.

**Create a Symbol w/ New Item Command**

1. In the **Catalog Manager > Catalog Explorer** **Tree** view, select the symbol node to which you want to add a symbol.
2. In the **List** view for the selected node, right-click to display a shortcut menu.
3. On the shortcut menu, select **New Item** to create a blank symbol named **New** **Item**.
4. Right-click the new item.

**88** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. On the shortcut menu, select **Rename** and type a unique name for the new symbol.
2. Double-click the new symbol to open it in the view window.
3. Assign an **Item Type** by choosing a selection in the list box at the top of the **Properties** Window.
4. From the Properties Window, set values for the following properties: a. **Type** (in this example the property is **Piping** **Comp** **Type**) b. **Class** (in this example the property is **Piping** **Comp** **Class**) c. **SubClass** (in this example the property is **Piping** **Comp** **Subclass**) d. AABBCC Code (only required if transferring to PDS 3D or migrating from SmartSketch into SPPID)
5. Draw the new symbol.
6. On the **Graphics** tab define the items, which the user will see, when the symbol is placed on the P&ID such as line, connect points and origin.
7. If applicable, on the **Heat** **Tracing** tab define the location of the Heat Tracing Graphics.
8. If applicable, on the **Label** tab define the properties for the symbol.
9. If applicable, on the **HiddenObjects** tab define the properties.
10. On the **Icon** tab define the graphics for the icon as it appears in the Catalog Explorer.

**Note:**

- If the **Icon** tab was empty prior to drawing items on the **Graphics** tab, then whatever is drawn on the **Graphics** tab will copy down to the **Icon** tab.
1. Select **File** > **Save**.

**Create a Symbol w/ Create Symbol Command**

1. From the **Catalog Explorer**, open an existing symbol. In this example, the Equipment > Mechanical > Pumps, **Horiz centrifugal Pump**, is being opened.

SmartPlant P&ID Setup and Customization Course Guide89 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select the symbol, right-click and then select **Open**.
2. From the **Catalog Manager View Window** select the items to create a symbol of.
3. Select the **Create Symbol**
- ***command from the **Draw** toolbar, and then click to

define the symbol origin.

1. Save the symbol with a unique filename such as **Pump_with_Base** in the Plant’s **P&ID Reference Data > Symbols > Equipment > Mechanical > Pumps** folder.
2. Select **File > Close** to close the symbol, **Horiz Centrifugal Pump.sym**, which is open. (If prompted, select **No** to saving the changes.)
3. Open the symbol, **Pump_with_Base**.
4. Draw the base on the pump and save the symbol.

**90** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Catalog Manager View Window**

The **Catalog Manager** **View Window** is a design area that you use to display, edit, and create symbols for SmartPlant P&ID and SmartPlant Electrical. If the view window is empty, you can display items in the view window by dragging the item from the **Catalog Explorer List** view. You can also display items by using the **Open** command or by double-clicking a symbol in the **List** view.

The tabs at the bottom of the view window help to control the display of information in the window. The tabs provide quick access to the primary categories (**Graphics**, **HeatTrace**, **Jacket, Label**, **HiddenObjects**, and **Icon**) of symbol data.

**Graphics** - Displays only the basic graphics associated with the symbol.

**HeatTrace** (P&ID only) - Displays the geometry of any heat tracing associated with the selected symbol. Line width and style are set in SmartPlant® P&ID Options Manager. To draw the heat tracing geometry, view both the **Graphics** and **HeatTrace** layers, then draw the heat tracing on the **HeatTrace** layer.

**Jacket** (P&ID only) - Displays the geometry of any jacket associated with the selected symbol. Line width and style are set in SmartPlant® P&ID Options Manager. To draw the jacket geometry, view both the **Graphics** and **Jacket** layers, then draw the jacket on the **Jacket** layer.

**Label** - Displays any label text associated with the selected symbol **HiddenObjects** - Displays any hidden objects associated with the selected symbol in the View window. Hidden objects are objects that users do not need to see in drawings, but that the software needs to check property values, such as attribute break labels.

SmartPlant P&ID Setup and Customization Course Guide91 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Icon** - Displays the icon bitmap representation that displays in the Catalog Explorer.

If you do not define a special icon for a symbol on the **Icon** layer, the software uses the graphics that you define on the **Graphics** tab as the icon for the symbol.

**Notes:**

- You may not use these tabs for all symbols, depending upon the intended behavior of the symbol.
- To view two layers at once, hold down the **Ctrl** key and select the second tab of the layer to be displayed. The layer name appearing in bold text is the layer you can modify. Only the **Graphics**, **HeatTrace**, **Jacket** and **Label** layers can be displayed simultaneously.
- To switch between the displayed layers, select the other tab.
- To stop displaying a layer, press the **Ctrl** key and select the tab of the layer you want to stop displaying.

**Catalog Tools Toolbar**

The commands on the **Catalog Tools** toolbar provides different options for creating or editing a new catalog item. The **Catalog Tools** toolbar allows you to place and manipulate connect points, edit Smart Text labels, and edit symbol properties.

Show Points Command

Place Point Command

Smart Text Editor Command

Set Item Type Command

Property Breaks

Fit to Symbol Command

Properties Command

Catalog Explorer Command

**Connect Points**

A connect point is a specially designated active point item in a symbol. A connect point is a location at which you can connect lines, labels, and other components (using their connect points) to one another. The software will apply a relationship at this point. To place connect points on your symbol, you will use the Place Point command on the Catalog Tools toolbar.

**92** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Place Point Command**

The **Place** **Point** command

allows you to place connect points in the symbol that

you are creating or editing.

**Notes:**

- Use care when editing existing symbols. If you change the number or type of connect points for symbols that have already been placed in drawings, you must manually edit each drawing and replace each changed symbol.
- Depending on the change you made to the symbol, the symbol graphics may no longer match the graphics of the symbol as it currently exists in drawings.

You must manually edit each drawing and replace each changed symbol.

- Be sure that Itemtype matches the PlantItemType property for the item. Such a mismatch can result in data loss in the plant structure.

**Place Point Ribbon**

The Place Point ribbon is available only after you select the **Place Point** command

on the **Catalog Tools** toolbar.

**Point type** - Select the type of connect point you want to add to the drawing sheet.

Choose from the following three types of connect points. You can also change the type of an existing connect point.

- **Piping Points** - Add these connect points to an equipment nozzle, piping component, or in-line instrument to connect a pipe run or another piping component, such as a nozzle and a flange or a reducer and a valve.
- **Signal Points** - Add these connect points to an equipment nozzle of an instrument connector or an off-line instrument to connect signal lines.
- **Auxiliary Points** - These connection points can be added to in-line instruments, off page connector or piping components. For in-line instruments, an auxiliary connect point in the middle of the component allows you to place an actuator on the instrument. For piping components, an auxiliary connect point(s) are utilized to place a jacket nozzle on the piping component.
- **Ducting Points** - Add these connect points to an equipment nozzle, ducting component, or in-duct instrument to connect a duct run or another ducting component, such as a nozzle and a flange or a reducer and a valve.

**Connect angle** - Indicates the angle at which the pipe run, piping component, signal line, or actuator will attach to the component at that connect point. This field is populated automatically when you create a connect point, but you can alter the value in this field if necessary.

SmartPlant P&ID Setup and Customization Course Guide93 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Number** - Each connector point on a nozzle, piping component, or instrument is assigned a number at the time it was created. In this field, you can see the number assigned to an existing connect point or assign a new number to a new or existing connect point.

**Notes:**

- The software will use connect points 1 and 2 for placement purposes. In many symbols, those points should be collinear. See the notes in Symbol Guidelines for information on how to align the connect points for different types of new symbols. For connect points 3-n, the pair should be across from one another on the symbol. An example of correctly numbered points is shown in the figure below.
- The recommended order of priority for connection points in P&ID is first by type and then by number. It is essential to follow this order when working in an integrated environment. All the numbers must run consecutively, starting from one (1) for the first connection point with no gaps in the numbering.

**Show Points Command**

The Show Points command turns the display of bolded connect points on or off. The software does not save bolding when you save the symbol.

**Smart Text Editor Command**

The **Smart Text Editor**

command displays the **Smart Text Editor** dialog box,

which allows you to create intelligent labels by building the labels from fields of information that the software fills in automatically when you place the label in your drawing.

***Smart Text Editor Dialog Box***

The **Smart Text Editor Dialog Box** allows you to create intelligent labels. You build the labels from static text and from fields of information that the software fills in automatically when you place the label in your drawing.

**94** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Item** - Select the type of item you want to label from the list.

**Property** - Select the property you want to add to the label from the list.

**Short value** - Check this option to display the short value defined in Data Dictionary Manager. Only select-listed properties can be displayed in their short value form. In a few cases, the short value is longer than the regular value.

**Format** - Selects the format you want to apply to the **Property** from the list. The Format box determines how the value appears.

**Notes:**

- Select **Plant Default** as the format if you want the data to be displayed in the SmartPlant P&ID **Properties** window or the **Engineering Data Editor** using the default format as specified in **SmartPlant® P&ID Options Manager >** **Formats** value for the property selected.
- Select** As Entered **as the format if you want the data to be displayed in the exact value precision (decimals) and in whatever units (UOM) it was entered with.
- The other formats listed are reading the entries from **Format** **Manager** for the property selected.

**Value** - Type the value you want to associate with the **Property**. This field is available only when the **Driving field** option is checked.

**Driving field** (only available in P&ID) - Check this option if you want the label to be a driving label, which means the specified value will overwrite the existing value for the object to which the label is attached in the drawing. Examples of driving labels include slope direction and mechanical driving labels. If you do not check this field, SmartPlant P&ID Setup and Customization Course Guide95 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

the label becomes a driven label, which allows users to specify the value when they place the label on a drawing. Examples of driven labels include line number labels, equipment name, and so forth.

**Insert field** - Select to add the Smart Text field to the label.

**Text** - Displays the Smart Text label as you create it. An  tag comes before each property definition, and a  tag ends each property definition. You can insert

“dumb” text, such as a – (dash) or ‘ ‘ (space) between the  tag and  tags.

Select **Apply** to see your latest changes.

**Visible** - Check this option to display the field in the drawing when you place the label. If you do not check this option, you cannot see this label value when it is placed on a drawing. These hidden values are located on the **Hidden Objects** layer.

**Text Font** - Displays the Font dialog box, allowing you to change the font of the selected text

**Ignore font size in preview** - Displays the entered text, in the **Text** pane, in a font size that can be easily read without altering the font size set in the **Font Properties** dialog box. Use this feature when using very large or small font sizes.

**Note:**

- If you use a font that does not exist on all machines used to view the symbol, undesirable font substitutions could result where the correct font is not installed. ** **

**Set Item Type Command**

The **Set Item Type**

command allows you to set the item type for labels you create

with Catalog Manager.

**Note:**

- This command is available only when you are creating a new label and you have selected **Label: Catalog Item** from the list box at the top of the Properties list.

**Property Breaks Command**

The **Property Breaks**

command displays the **Property Breaks** dialog box,

allowing you to define a catalog item as a break component, which allows properties to be different on the two sides of that item, suppresses the consistency checking, and **96** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

limits the propagation of the properties that are broken. For example, reducers break the nominal diameter property, and pressure relief devices break the pressure property. A component can break properties of the connected runs.

**Notes:**

- Currently, only the PipingComp, Instrument, and Nozzle items types can be defined as property breaks.
- To create a break component, you must first create a special pipe run or signal run filter that includes the properties to be broken as criteria in the filter. The value and comparison operator for each property in the filter is not important.

After creating this filter, open the component symbol in Catalog Manager and use the **Property Breaks** command to select the filter. When the resulting break component is placed into a drawing, it breaks the pipe run (or signal run) it is placed into. When a broken property value is changed on either side of the component, the break component limits the propagation of the changed value. For more information about consistency checking, properties, update drawing, and system editing, see the *SmartPlant P&ID User’s Guide*.

- Changes in filter definitions are not automatically detected when those filters are used by break components. Also, the Update Drawing process does not update a symbol when the property definition of the symbol changes. For example, when you assign a filter to a symbol as part of creating a break component, the definition of what properties are being broken are assigned to the symbol at that time. If you later change the filter definition (even if you change only a property), changing the filter does not change the nature of that symbol. To have the filter changes reflected in the drawings, you must edit the symbol in Catalog Manager so that it must be saved. Once the symbol is saved, it is flagged as out-of-date in SmartPlant P&ID, allowing the Update Drawing process to make the changes.
- If you place a catalog item in a drawing and then change its definition to be a break component, you may encounter problems with certain commands in

SmartPlant P&ID. For example, the **Replace** command does not allow a non-breaking component to be replaced with a break component. The **Update** **Drawings** command relies on the **Replace** command to replace out-of-date symbols. Therefore, **Update Drawings** does not update any symbol whose definition has been changed into a break component.

SmartPlant P&ID Setup and Customization Course Guide97 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- The IsReducing property still works like it always has in that setting the IsReducing property to True causes the symbol to be a break component for Nominal Diameter. To create a break component for any other property, you must create a filter as described above.

**Fit to Symbol Command**

The **Fit to Symbol**

command fits the active view to the open symbol in Catalog

Manager View window.

**Properties Command**

The **Properties**

command turns the display of the Properties Window on or off.

**Catalog Explorer Command**

The **Catalog Explorer**

command turns the display of the Catalog Explorer on or

off.

**98** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Catalog Manager Properties Window**

The **Catalog Manager** **Properties Window** displays properties for selected symbols.

Depending on your access privileges, properties can appear in either read-only or read/write mode. If the symbol displayed in the view window does not have any P&ID properties associated with it, the **Properties** window is blank.

The button located at the top of the **Properties** window allows you to sort properties either alphabetically or by category.

**Notes:**

- When you select an item in the **Catalog Explorer List** view but do not open the item, a short list of properties is displayed in the **Properties** window. You cannot edit properties in this list. You must open the symbol to edit properties.
- When a symbol is open for editing, if you subsequently select the symbol in the **Catalog Explorer List** view, then the short list of properties is displayed in the **Properties** window even though the symbol is open. To see the entire properties list, select the symbol page again or select the open symbol from the **Window** menu. You can view the short list of properties for any symbol by selecting it in the **Catalog Explorer List** view, regardless of whether any symbols are open in the view window.
- If you clone a symbol, the item type is derived from the cloned item. If you create a new symbol, the default item type is the last item type selected in the **Properties** window.
- Reference **Glossaries** in **SmartPlant P&ID Help** concerning all the Properties listed under the various categories.

SmartPlant P&ID Setup and Customization Course Guide99 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Identification Category**

The properties found in the Identification category of the Properties Window are those used to give a symbol distinguishing characteristics, including the plant item type, AABBCC code, etc. Below, you will find a list of properties that may be used when creating a new symbol but are not available when working in SmartPlant P&ID.

Not all properties are available for all types of plant items. Also, not all properties should be modified when creating a new symbol.

A user in Catalog Manager may modify the following properties for a symbol:

- **AABBCC code -** The aabbcc_code property sets or returns a string providing a unique code for the item. ** **This property is provided for compatibility with the legacy PDS P&ID software. It also provides compatibility with PDS 3D software when transferring from SmartPlant P&ID to PDS 3D and when migrating from SmartSketch to SmartPlant P&ID. This property is used for both data transfer and pipe specification validation. It is not used with SmartPlant 3D or integration.
- **Is Bulk Item** - The **IsBulkItem** property sets or returns a Boolean, if **True**, specifies that the item is bulk. As delivered, the item validation code that checks for uniqueness of item tags ignores an item with **IsBulkItem** set to **True**.
- **Is Owner** - The **IsOwner** property is a boolean whose true value is reserved for future use.
- **Is Shared** - The IsShared property is utilized in a Workshare environment and can be set in Catalog Manager of within SPPID for the specific Plant Item Groups (instrument loop, package, safety class, and test system). The **Is Shared** property is a Boolean value. If this property is set to **True** for **Plant Item Groups** (instrument loop, package, safety class, and test system), they can be shared with another site.
- **Is Specialty Item** - The **IsSpecialtyItem** property is a Boolean value. If this property is set to **True**, it indicates that the item is a specialty item. It is available for piping components. If this property is set to true, the Piping Specification Validation is not looked up for this item. This value can be used for filtering or reporting.
- **Tag Required Flag -** The **TagReqdFlag** property sets or returns a Boolean value specifying whether the item requires a tag. Used in combination with the **In** **Stockpile** items setting in **SmartPlant® P&ID Options Manager**, this property, if set to **True**, determines that an item will go to the stockpile if deleted from a drawing using the **Delete** command. ** **

**Important**

- The following properties (**Part of Type** and **Is Unchecked**) should not be modified by a user in **Catalog Manager.**

**100** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

o **Part of Type** - The PartOfType property sets or returns an enumerated value specifying the type of “PartOf” relationship. The value will be set to Implied if an item is placed based upon a rule that implies items. The value will be set to Composite in the case of a Tema End placed upon a Tema Shell. This value can be used for filtering or reporting.

o **Is Unchecked** - Not used by the software or by users. Possibly reserved for future use.

**Miscellaneous Category**

The Connectors Zero Length is set when routing pipe runs or creating adjacent components. The value if set to True, by the system, indicates a zero-length pipe run which can then be excluded from the EDE or Reports. The software does not publish pipe runs for which this parameter is set to ‘true’.

**Control Category**

Control properties are instrumentation–specific. They contain case data such as control case pressure and quality as well as instrument function type and fail mode.

These properties are also found in the property grid while working in SmartPlant P&ID. Instrumentation will have this category available in Catalog Manager and SmartPlant P&ID.

**Physical Category**

Physical properties store physical data about an item. They may include cleaning requirements, coating requirements, insulation type, etc. These properties are also found in the property grid while working in SmartPlant P&ID. A variety of physical properties may be found on any plant item.

- **Is Inline** - The **Is InLine** property is only applicable to Instruments. When the **Is** **InLine** property is set to **True** for **Instruments**, then a record will in the **T_InLineComp** table. Also, Offline Instruments, when Is InLine = false, will have a basic set of attributes whereas Inline Instruments, when Is InLine = True will have an extended set of attributes. The **Is InLine** property for Piping Components in the Properties Window of Catalog Manager is ignored by the software. It is assumed to have a value of True.

**Process Category**

Process properties store process case data. They contain design maximum and minimum properties as well as fluid system and flow rate. These properties are also found in the property grid while working in SmartPlant P&ID. Equipment, Pipe Runs, and Signal Runs will have this category available in Catalog Manager and SmartPlant P&ID.

SmartPlant P&ID Setup and Customization Course Guide101 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Property Break Category**

- **Is Reducing** - The **IsReducing** property is a Boolean value designating whether the component supports more than one size. This is set to **True** for reducers.
- **Property Break Filter** - **T**he **PropertyBreakFilter** property contains the name of a filter that specifies the list of properties to be broken by this component.

**Responsibility Category**

The responsibility category holds properties that the user can use to store design responsibility, construction responsibility, etc. These properties are also found in the property grid while working in SmartPlant P&ID. A variety of responsibility properties may be found on any plant item.

**Status Category**

The status category holds properties that the user can use to store information about the condition or stage of an item. These include construction status, hold data, and design responsibility, construction responsibility, etc. These properties are also found in the property grid while working in SmartPlant P&ID. A variety of status properties may be found on any plant item.

**Symbol Category**

The symbol category holds properties used to specify the behavior of a symbol while working in SmartPlant P&ID. Below, you will find a list of properties that may be visible when creating a new symbol but are not available when working in SmartPlant P&ID. Not all properties may be available for all types of plant items. Also, not all properties should be modified when creating a new symbol.

A user in Catalog Manager may modify the following properties for a symbol:** **

- **Is Mirrorable** - Sets a Boolean. If True, it specifies that the item can be mirrored.
- **Is Rotatable** - Sets a Boolean. If True, it specifies that the item can be rotated.
- **Is Scalable** - Sets a Boolean. If True, it specifies that the item can be scaled.

**Important**

- The following properties are used by the software while working in SmartPlant P&ID. However, a user in **Catalog Manager** should not modify these. ** **

o **File Last Modified Time**

o **File Name** - The **FileName** property sets or returns a String containing the full path to the file from which the item is derived.

**102** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

o **Is Mirrored** - The **IsMirrored** property sets or returns a Boolean. If the value is True, this specifies that the item is mirrored.

o **Param Bottom** - The **ParamBottom** property sets or returns a value specifying the bottom parameter of the parametric symbol.

o **Param Left** - The **ParamLeft** property sets or returns a value specifying the left parameter of the parametric symbol.

o **Param Top** - The **ParamTop** property sets or returns a value specifying the top parameter of the parametric symbol.

o **Param Right** - The **ParamRight** property sets or returns a value specifying the right parameter of the parametric symbol.

o **RAD Layer** - The **RADLayer** property sets or returns a String identifying the layer the item is placed on within the environment of the development platform.

o **Rep Class** - The **RepresentationClass** property sets or returns the class of the LMRepresentation object.

o **Rep Type** - The **RepresentationType** property sets or returns an enumerated type indicating the type of LMRepresentation object. Some examples are: Connector, Label Persist, Symbol, and Bounded Shape.

o **Rotation angle** - The **RotationAngle** property sets or returns a value specifying the symbol’s rotation angle.

o **Scale factor** - The **ScaleFactor** sets or returns a value specifying the scaling factor for a symbol.

o **Style** - The **Style** property sets or returns a String specifying the style (which includes color, weight, and pattern) of the indicated graphic item.

o **X Coordinate** - Indicates the **X coordinate** of the symbol origin for an instance of the symbol placed on the drawing.

o **Y Coordinate** - Indicates the **Y coordinate** of the symbol origin for an instance of the symbol placed on the drawing.

SmartPlant P&ID Setup and Customization Course Guide103 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **Symbol Guidelines**

**Equipment**

The graphical representation of a piece of equipment can often be described as consisting of outer graphics (which define the perimeter shape) and inner graphics (which are contained within the perimeter shape). The outer graphics should be drawn

“in front” of the inner graphics. The Bring To Front command can be used for this purpose. The front most graphics are located first. With the outer graphics in front, nozzle placement works much better.

**Piping Components**

These are valves and fittings of various kinds. They typically have one or more Piping connect points. The location of the origin depends on the number of connect points is as follows:

- **One Connect Point** - An end of line terminator may have a single connect point.

The origin must be at the same location as the connect point.

- **Two Collinear Connect Points** - A normal two-way gate valve has two collinear connect points. The origin must be midway between the two connect points.
- **Two Non-Collinear Connect Points** - A two-way angle valve is a good example of this. The origin must be at the intersection of the two connect point axes.
- **More than Two Connect Points** - The connect point axes should all intersect at a point. The origin must be at the intersection point. If there are additional connect points, whose axes do not intersect at that point, they will be ignored for placement purposes. However, you can still connect pipes to these points after it is placed.

**Flow Oriented Components**

This is a special category of piping components where the component has an inherent flow direction. The graphics within the symbol usually includes an arrow to indicate the flow direction. A check valve is a prime example of a flow-oriented component.

Flow direction consistency checking is handled differently for this type of component.

- Must be drawn with the “natural” flow direction from left to right along a horizontal line.
- The **Flow** **Direction** property is set in the Catalog Manager. ” **End 1 Is** **Upstream**” means the flow follows the natural direction. ” **End 1 Is** **Downstream**” means the flow is reversed from the natural direction.

**104** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- The downstream (or outlet) connect point must be oriented along the positive x-axis. An ordinary check valve should be drawn with the natural flow direction from left to right along a horizontal line. An angle check valve should be drawn with the outlet oriented along the positive x-axis.

**Reducers**

Piping components that are used to change the nominal diameter of a pipe are referred to as reducers. Reducers have some special behavior when they are placed and modified. To get that special behavior, there are some special requirements placed on the reducer.

- The **IsReducing** property must be set to ” **True**” in the Catalog Manager.
- The symbol must be drawn with the primary axis as a horizontal line. The large end of the reducer should be on the left and the small end on the right.
- The reducer should have a connect point at each end. Connect point 1 must be on the left (at the large end). Connect point 2 must be on the right (at the small end).

**Inline Instruments**

The requirements for inline instruments (such as control valves) are the same as for piping components. Piping connect points are used to allow the inline instruments to be placed into pipes. For an inline instrument that can accept an actuator, you should place an auxiliary connect point at the location where the actuator will be attached.

**Offline Instruments**

Offline instruments are usually created with eight Signal connect points (one every 45

degrees) around the perimeter of the instrument. This type of instrument usually contains Smart Text that defines an embedded label.

**Off Page Connectors**

- Each OPC should have two Auxiliary connect points - one at each end.
- The origin of the symbol must be midway between the two connect points.
- An OPC normally contains one or more Smart Text boxes that define an embedded label. The OPC may be mirrored and/or rotated at placement time. To make the text readable, the Smart Label rotates each textbox about its own center point. To ensure that the textbox remains positioned correctly during this process, the textbox properties should be set so that the center of the textbox remains fixed regardless of how much text it contains. There are two ways to accomplish this: o Set the alignment and justification to Center/Center.

o Set the width and height to Exactly.

SmartPlant P&ID Setup and Customization Course Guide105 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Scalable symbols**

Any symbol may be made scalable by setting the **Is Scalable** property to **True**. By default, all delivered reference data symbols have the property set to False.

When in SPPID, you can use scale handles on a symbol to resize it. Four black scale handles are displayed on the corners of the range box of a symbol. Drag any of the four handles up or down.

**Parametric Symbols**

Parametric symbols contain geometry constrained together using relationships, with driving dimensions that are defined as adjustable parameters. When in SPPID, yellow boxes in the middle of the range box lines represent standard parametric handles. You can drag a parametric handle to resize part of the symbol.

Standard parameter handles represent up to four driving dimensions that have been applied to the graphics in a symbol. The four standard positions where parameter handles can appear are top center, bottom center, left center, and right center of a symbol’s range box. Dragging a parameter handle changes the value of the dimension by the length readout precision set on the Units tab of the Properties dialog box when the symbol is created.

**106** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Working with Labels**

As you work on a P&ID, labeling is an important step in producing the drawing. This text and graphical information completes the drawing and constitutes its intelligence to the reviewer.

SmartPlant P&ID labels may include graphics as well as text. A label is also a document with a .sym extension. You can create a label by selecting **New Item** on the **Catalog Explorer File** menu.

When you work with labels, you may use several tabs in **Catalog** **Manager** to define various parts of the label. Most commonly, you will use **Graphics**, **Label**, **HiddenObjects**, and **Icon**. You may not use all tabs for all labels, depending upon the intended purpose of the label.

The textual part of a label may be a combination of user-defined text and attribute data from the database and is defined using the **Smart Text Editor** in Catalog Manager. Therefore, labels are a true reflection of information in the database. To allow you to maintain this data, you can also add and modify information as you place labels in a P&ID.

**Visible and Hidden Labels**

You can also divide labels in SmartPlant P&ID into two other categories: visible labels and hidden labels. A visible label is one that is visually represented in a P&ID.

An example of a visible label is a line number label. A visible label is defined on the **Label** layer in Catalog Manager**.**  Most labels in SmartPlant P&ID are visible.

On the other hand, you cannot see hidden labels in a P&ID unless you drag the cursor over the label. Hidden labels can be used to define specific properties for items when you place the label in the P&ID. For example, the slope label is a driving label that sets the Slope and Slope Direction of a piping segment. The slope label has graphics and text, the Slope is a visible property and Slope Direction is a hidden property. A hidden property is defined by deselecting the **Visible** checkbox on the Smart text Editor Properties dialog. This will place the property label textbox on the **HiddenObjects** layer in Catalog Manager and set the slope direction property of the line to a predefined value when you place the label.

SmartPlant P&ID Setup and Customization Course Guide107 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Driving and Driven Labels**

Every label in SmartPlant P&ID is either a driving label or a driven label. A driving label is a label that specifically defines the properties of a symbol. For example, if you associate an electric driver motor label with a pump symbol and the motor label is a driving label, the pump becomes an electric driven pump.

Driven labels are simply labels that display information about the object with which they are associated. For example, placing a nominal diameter label on a gate valve displays the size of the valve, but does not change any properties of the valve. Most the labels in SmartPlant P&ID are defined as driven labels.

To define whether a label is driving or driven, select the **Driving field** checkbox in the Smart Text Editor. You can clear this option to create a driven label.

**Embedded Labels**

Embedded labels are labels that use a combination of information defined on the **Graphics** layer, the **Label** layer, and perhaps the **HiddenObjects** layer. Symbols that contain embedded labels have both graphics and labels defined for them before they are placed in a P&ID. When you place a symbol with an embedded label, the label updates automatically. For example, the off-line instruments with implied components (Analyze, Flow, Level, Pressure) are made up of both graphics and embedded labels.

**108** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Smart Text Editor**

The **Smart Text Editor** allows you to create intelligent labels. Select the Smart Text Editor

command on the Catalog Tools toolbar to access it.

**Text Box Properties**

The **Text Box Properties** dialog box formats the font, paragraph, borders, or shading of a text box. To define graphical properties on the label, right-click on the label and select Properties. The Text Box Properties dialog box will appear allowing you to set the width, orientation, justification, alignment, text color, font, font size, and colors for the label. Choose options on the Info, Paragraph, Border and Fill, and User tabs: **Label Properties and Guidelines**

A label (**Label: Catalog Item**) is defined in the catalog by a symbol definition. At placement time the symbol is converted into a Smart Label. A label symbol usually contains one or more Smart Text objects and may also contain other graphical elements. The property values assigned to the symbol define what type of label it will be and how it will behave.

SmartPlant P&ID Setup and Customization Course Guide109 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Disable Flip Text** - This property disables the flip text behavior of the smart label when set to true. The text box within the label flips when it is rotated more than 90

degrees or less than or equal 270 degrees. This is done so that the text can be read bottom to top. When the Disable Flip Text is set, it disables that behavior.

**Is Break Label** - This property determines whether the label will be an attribute break label. An attribute break label is a special type of label that is used to suppress an inconsistency indicator at the end point of a piping segment. Smart Text fields within the label define the properties for which the inconsistencies are to be suppressed. If you do not want the text to be visible, you can make it hidden text.

**Is Fit To Text** - If this property is set to true, the graphics around the textbox will resize as the dynamic textbox size grows.

**Is Leader Visible** - Set this to **True** if you want the label to be placed with a leader line. For special cases, you can always turn the leader line on or off using the shortcut menu on the label when in SPPID.

**Label Behavior** - Defines if and how the label moves when the labeled item is moved. **Fixed** means that the label does not move, **Follow** means that the label is transformed the same as the labeled item and **Follow (no rotate)** means that the label is moved, but not rotated.

**Label Type** - (**Required**) Every label must have this property set. Available label types include **Component**, **Title Block**, **Flow Arrow**, and **Attribute Break** (also referred to as Segment Break labels).

**Labeled Item Type** - **(Required**) Every label must have this property set. To set it for new labels, you will use the **Set Item Type**

command on the **Catalog** **Tools**

toolbar. The software uses this to determine which set of database properties to make available for use with the label.

**110** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- When you select the **Set Item Type** command, you will see the Set Item Type dialog with the following item types available: **Drawing**,

**Equipment**, **Equipment: Mechanical**, **Equipment: Vessel**, **Equipment:** **Other**, **Equipment: Heat Transfer**, **Equipment: Component**, **Inline** **Component**, **Instrument**, **Model Item**, **Nozzle**, **OPC**, **Pipe Run**, **Piping** **Component**, **Plant Item**, and **Signal Run**.

**Leader Style** - Enter the name of the line style to be used for the leader line. This line style must be an existing style in the plant style file, **ProjectStyles.spp**.

**Offset Distance** - You can define the distance by which the label should be offset from the labeled item. This is only used with **One** **Point** placement and when **Offset** **Source** is set to **Local**.

**Offset Source** - This property works with the **Offset Distance**. You can set this property to define if an offset is to be used for **One** **Point** placement, and if so, where the offset should come from.

The possible values are: **None** (no offset), **Local** (use the offset distance defined for this label), and **Plant Settings** (use the offset distance defined in **SmartPlant®**

**P&ID Options Manager** > **Distances** > **Label** **Offset** **Distance**).

**Placement Type** - You must select either **One** **Point** or **Two** **Point** placement.

If you select **One** **Point**, the placement command automatically positions the label at an offset from the given point (Typically used for line labels.).

If you select Two Point, the placement command allows you to reposition the label after identifying the item to be labeled with the first click.

**Terminator Style** - You can select the type of terminator to be used on the end of the leader line. The choices are: **None**, **Solid** **Arrow**, **Solid** **Dot**, **Arrow**, **Ellipse** and **Use** **Default**. If you select **Use** **Default**, the terminator defined in **SmartPlant® P&ID**

**Options Manager** > **Settings > Terminator Style** will be used.

SmartPlant P&ID Setup and Customization Course Guide111 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Guidelines for Special Cases**

**Title Block Labels**

Title Block Labels are a special type of label used to display properties of the drawing itself. You can customize any symbol as a title block by adding graphical elements of the desired dimensions per the sheet size. To add labels to the title block for displaying various types of title block information such as plant data, revision data, date and time stamps, and display set data, a set of XML macros are available that display data entered in the tool itself or retrieved from SmartPlant Foundation.

Use the following recommended property values for title block labels.

**Property**

**Value**

Label Type

Title Block

Labeled Item Type Drawing

Placement Type

One Point

Label Behavior

Fixed

**Title Block Field Command (Insert Menu)**

The **Insert >**  **Title Block Field** command opens the **Place Label Ribbon**, which allows you to insert dynamic title block labels into your document. These labels use XML code and provide a means of retrieving updatable data such as revision numbers.

**Notes:**

- Some label sets are only relevant when you are working in an integrated environment, such as **Signature Area** and **Issue**. The field values for these label sets are only displayed in SmartPlant Foundation after publishing the drawings.
- In some instances, it may be necessary to close and reopen your drawing to populate some of the fields.

***Place Label Ribbon***

Utilize the **Place Label Ribbon** to set options for displaying specific title block fields, as labels, on a specific symbol.

**Label Set** - Lists available label sets, select from this list the label set you require.

**112** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Field** - Lists all fields for selected label set, select from this list the field you want displayed on your symbol drawing. For details of label sets and fields used with SmartPlant P&ID, see *Place Label Ribbon - Options for SmartPlant P&ID* topic.

**Function, Operator, and Range of Values** - These fields are only available when the **SPPID Revision** label set is selected, or when certain specific fields are selected from the **Issue** label set.

**Alternative Text Value** - Type a text string that will appear if the software is unable to retrieve a value for the selected property.

**Display Label Names**

- Select to toggle the display between the macro source

name and the label name.

**More**

- Select to display the **Text Box** ribbon for more options used in formatting the label.

**Editing XML Data of Title Block Label**

The **Place Label** **Ribbon** is used to create labels for symbols using properties and values taken from the title block label sets. By default, the software supports downward growth of the title block labels. It is possible to edit the .xml data of the label using the **Smart Text Editor** to achieve upward growth of the title block labels.

For example, a label with four rows of information to be displayed would look like this;

<intstgxml stream=“Revision”

SmartPlant P&ID Setup and Customization Course Guide113 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

select=“/Revision/RevisionRecord[last()-2]/MajorRev_ForRevise” alt=““/>

To alter the label to achieve upward growth instead of downward growth, the .xml data Last()-0, Last()-1, Last ()-2, and Last()-3 must be replaced with the .xml data:

[ ( (last() > 4) and position() = (last() - 0) ) or ( (last() <=4) and position() = 4 )]

[ ( (last() > 4) and position() = (last() - 1) ) or ( (last() <=4) and position() = 3 )]

[ ( (last() > 4) and position() = (last() - 2) ) or ( (last() <=4) and position() = 2 )]

[ ( (last() > 4) and position() = (last() - 3) ) or ( (last() <=4) and position() = 1 )]

Remembering that the “<” and “>” are special syntax symbols used by XML and should be replaced with the text “<” and > the new labels would look like this:

**Flow Arrows**

**Flow Arrows** are a special type of label used to indicate the flow direction in a pipe.

The flow arrow symbol must be built so that it is pointing along the positive x-axis and the origin must be at the tip of the arrow. Placing Smart Text in a flow arrow label is not necessary. Use the following recommended property values for flow arrow labels.

**Property**

**Value**

Label Type

Flow Arrow

Labeled Item Type Pipe Run

Placement Type

One Point

Label Behavior

Follow

**Segment Breaks (Attribute Breaks)**

**Segment Breaks** are a special type of label used to suppress an inconsistency at the end point of a piping segment. Smart Text fields within the label define the properties **114** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

for which the inconsistencies are to be suppressed. If you do not want the text to be visible, you can make it hidden text. A typical set of label properties for a segment break is shown below.

**Property**

**Value**

Label Type

Attribute Break

Labeled Item Type Pipe Run

Placement Type

Two Point

Label Behavior

Follow (no rotate)

The consistency criteria specified in the rules define the general behavior of the properties. Break labels provide a way to define exceptions to the general rules. A break label provides a visible and plottable symbol that signifies the end of one property value condition and the beginning of a new condition along a pipe. A changed property value is never propagated across a break label for that property. A break label also suppresses consistency checking for the property it breaks.

A break label can be created for any property or collection of properties of a pipe run.

A break label is created in the Catalog Manager just like any other label, except that the Label Type property is set to **Attribute Break**. A Smart Text field must be created for each property that is to be broken. In many cases the graphical shape of the label indicates which properties are broken. In these cases, the Visible flag on the Smart Text is set to False so that the text is not visible. It is also normal to turn the leader line on within the Catalog Manager so that it is automatically displayed at placement time. All the symbols under **Piping > Segment Breaks** in the delivered catalog are break labels.

A break label can only be placed at the endpoint of a graphical pipe line where it connects to a component or a branch point. Furthermore, a break label can only be placed at a point where the specified properties are listed in the consistency criteria for the applicable rules. The break label stays attached to the point it was placed on and cannot be dragged away from it.

When creating a label with hidden text, scale the text box down and/or move it to a position so that it does not affect the range of the label. Some label placement modes make use of the label range and will produce unexpected results if the range is inflated by the hidden text.

**Line Labels**

**Line Labels** are a common type of label used for labeling pipes consisting of a single Smart Text object. When the placement command sees this type of label, it does some special work to place the text box at the desired offset from the line. To accomplish this, set the vertical justification property on the text box at placement time. To get a SmartPlant P&ID Setup and Customization Course Guide115 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* good dynamic display during placement, we recommend that you set the **Vertical** **Justification** property on the text box to **Center**.

**Component Labels**

**Component Labels** are to be placed on components, and we recommend that you comply with the following guidelines during label creation to avoid undesirable results that may occur when drawings are recreated:

- Create separate component labels for placement on horizontal and vertical objects.
- If you want to pre-rotate a text box for a label, rotate it -90 degree rather than +90

degree, so that when the label is placed on vertical objects, it will be left-aligned and will grow towards the right if a value is assigned after placement.

- Do not combine mirror and rotate operations on a symbol for a label. This means that if a label needs to be rotated, then do not further mirror it; if a label needs to be mirrored, do not further rotate it.
- If you *do* need to mirror and rotate a symbol, make sure that the text box is center aligned and justified.

**116** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Working with Parametric Symbols**

SmartPlant P&ID parametric symbols function just as other symbols with the exception that they allow the user to resize the symbol using handles. The user can resize the symbol differently depending upon the handle selected. For a scaled symbol, the user may only resize it uniformly.

Like other symbols, parametric symbols include a drawing of the item as well as the heat tracing, labels, properties associated with that item, and the icon that represents the item in the Catalog Explorer. As with other symbols, you must define everything from the database properties such as item type (Equipment, Piping, Piping Component, and so forth) to the graphic and pre-defined properties for the symbol.

The predefined attributes and the graphic are stored in the .sym file. In addition, a parametric symbol will require the use of relationships, dimensions, and variables to provide the handles used for resizing.

**Using Relationships as You Draw**

You can use relationships to capture and remember your design intent as you draw.

Make your drawings associative by applying those relationships, or sketch designs that do not use relationships.

**How Relationships Affect a Drawing**

You can move and change an element that does not use relationships in various ways without affecting other parts of the design. For example, when no relationships exist between two lines, you can move and change each line without affecting the other.

When you modify a part of a drawing that has a relationship to another part of the drawing, the other part updates automatically. For example, if you apply a perpendicular relationship between two lines and move one line, the other line moves with it. The software remembers the relationship between these two elements and always maintains the perpendicular relationship between the lines. You can manipulate either of the two lines and the software will move or modify the line automatically to maintain the relationship.

Applying and maintaining relationships in the design simplifies changes to the design later. In the following drawing, all the relationships were automatically established as the design took shape on the drawing sheet. If you want to change the design, you simply modify one segment of it and all the relationships are maintained.

**SmartSketch Command**

The **Tools** > **SmartSketch** command sets up what relationships are recognized by the software. The relationships selected on the **SmartSketch Settings** dialog box are recognized as you draw. When you click with a relationship indicator displayed at the pointer, the relationship is established in the drawing.

SmartPlant P&ID Setup and Customization Course Guide117 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- Display or hide the relationship handles in your drawings by setting or clearing the relationships’ checkboxes on the **SmartSketch Settings** dialog box.
- Select **Tools** > **Relationship Handles** to turn on and turn off the display of relationship handles.

**Maintain Relationships Command**

The **Tools** > **Maintain Relationships** command places relationship handles as you draw. When this option is turned on, the software places relationship handles for relationships that the software recognizes, and for relationships that you apply using the commands on the **Change** toolbar. When **Maintain Relationships** is set and you apply relationships to new or existing elements, the software places relationship handles on the elements. Elements that share relationships are associative; when you move an element, the other elements on the drawing sheet move per the relationships they have with the element that you moved.

**Notes:**

- You can also use **Tools** > **Maintain Relationships** to toggle this command on and off.
- You can use **Tools** > **Relationship Handles** to turn on and turn off the display of relationship handles.
- The **Maintain Relationships** command is also available on the **Change** toolbar.

**Change Toolbar**

The **Change Toolbar** allows you change the appearance or position of symbols in Catalog Manager.

**118** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Applying Relationships**

You can apply relationships as you draw and place elements by using the relationship indicators that appear by the pointer. As you click commands on the **Draw** toolbar to place lines, arcs, and circles, you should watch the relationship indicators that appear by the pointer. When a relationship indicator appears by the pointer, click to apply that relationship to the element you are drawing. When you apply relationships, relationship handles appear on the related elements.

The relationship handles are symbols that show how elements are related. For example, the following four lines appear with relationship handles (A) turned off and with relationship handles (B) displayed.

(A)

(B)

You can also apply relationships to elements that you have already placed on the drawing sheet. To apply relationships to elements you have already placed on the drawing sheet, click a button on the **Change** toolbar and then select the elements you want to relate. When you apply a relationship between elements, the elements are modified to reflect the relationship. If **Maintain Relationships** is set when you use the commands on the **Change** toolbar to add relationships to your drawing, the added relationships will be maintained.

For example, selecting **Equal** and clicking two circles makes the two circles equal in size. If a line and arc are not tangent, applying a tangent relationship modifies one or both elements to make them tangent.

When you use commands on the **Change** toolbar, the software allows you to select only elements that are valid input for that command. For example, when you use **Concentric**

, the command allows you to select only circles, arcs, and ellipses.

**Modifying Elements That Share Relationships**

If two elements share a relationship, the relationship is maintained when you modify either one of the elements. For example, if you move a circle that has a tangent relationship with a line, the line also moves. The elements remain tangent. If you move a circle that does not have a tangent relationship with a line, the line does not move.

Other elements that share relationships maintain them in the following ways:

- If a line and an arc share a **tangent** **relationship**, they remain tangent when either is modified.

SmartPlant P&ID Setup and Customization Course Guide119 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- If a line and arc share a **connect** **relationship**, they remain connected when either is modified.
- If two lines are horizontal, they remain horizontal even if you change the position and length of one of the lines.

**Deleting Relationships**

You can delete a relationship as you would delete any other element. Select a **relationship** **handle**, and then select **Delete**. Relationships are automatically deleted when their deletion is necessary to allow a modification to occur. For example, if you rotate an element that has a horizontal relationship applied to it, the relationship is automatically deleted.

**Note:**

- If you want to change an element by adding or removing a relationship, and the element does not change the way you expect, it may be controlled by a driving dimension. Using the **Dimension Ribbon** toggle the dimension from driving to driven, and then make the change.

**Dimensioning Drawing Elements**

Dimensions supply information about the size, location, and orientation of elements, such as the length of a line, the distance between points, or the angle of a line.

Dimensions are associative to the elements they refer to, so you can make design changes easily. Dimensions will be utilized when you create a parametric symbol.

Variables will be created based upon these dimensions and will then control the sizing of the symbol as the user moves the handles.

**Notes:**

- Dimensions should be placed on the **Dimension Layer**.
- Do not create dimensions off origin symbol. We delete the origin

symbol during file save, and any dimensions created with respect to

the origin symbol will be deleted as well.

- Move the origin symbol temporarily to the place where you are not

going to be creating dimensions.

- After creating all the necessary dimensions for parametric, move back the origin symbol where it is appropriate.

**Label Toolbar**

You can use the commands on the **Label** Toolbar to place dimensions.

**120** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

Some dimension commands on the **Label** toolbar have a **Dimension Ribbon** that sets options for placing the dimension. When you select a dimension in the drawing, the same **Dimension Ribbon** options appear. Use the options to change the selected dimension. Some options on this toolbar are not available until you select an element on the drawing sheet.

To dimension elements, select a dimension command on the **Labels** toolbar, such as **Distance** **Between**, and then select the elements you want to dimension. As you place dimensions, the software shows a temporary,

dynamic display of the dimension you are placing. This temporary display shows what the new dimension will look like if you click at the current pointer position. The dimension orientation changes depending on where you move the pointer.

**Using Dimensions to Drive Elements**

You can place a dimension that controls the size or location of the element to which it refers. This type of dimension is known as a driving dimension. If you use the ribbon to change the dimensional value of a driving dimension, the element updates.

Dimensions that are not driving dimensions are called driven dimensions. The value of a driven dimension is controlled by the element it refers to. If the element changes, the dimensional value updates.

Because both driving and driven dimensions are associative to the element they refer to, you can change the design more easily without having to delete and re-apply elements or dimensions when you update the design.

**Note:**

- If you want to create a driving dimension, you must first set **Maintain** **Relationships** on the **Tools** menu. When you are placing dimensions, an option on the ribbon allows you to specify whether a dimension is driving or driven. A driving dimension and a driven dimension are distinguished by color. There are different colors for driving dimensions and driven dimensions in a dimension style.

**Using the Variable Table**

You can select the **Tools > Variables** command to access the **Variable Table** to define and edit functional relationships between the dimensions of a design in a familiar spreadsheet format. The software uses two types of variables: dimensions displayed in the design and variables you create directly in the **Variable Table**.

Dimension variables directly control elements of a design. A user variable must be set equal to a value or mathematical expression; for example, PI = 3.14159.

You can use variables to do the following:

SmartPlant P&ID Setup and Customization Course Guide121 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- Drive a dimension with another dimension; Dimension A = Dimension B
- Define a constant; pi=3.14
- Drive a dimension with a formula; Dimension A = pi * 3.5
- Drive a dimension with a formula and another dimension; Dimension A =

pi * Dimension B

- Drive a dimension with a formula that includes a function; Dimension A =

Dimension B + cos(Dimension C)

- Drive a dimension with a value from a spreadsheet, such as a Microsoft Excel document, by copying the value from the spreadsheet into the

**Variable Table**. Besides Excel, you can use any other spreadsheet software that can link or embed objects.

**Accessing the Variable Table**

Once you select **Variables** on the **Tools** menu, a table appears with the following columns: **Type**, **Name**, **Value**, and **Formula**. Each row of the table displays a variable.

**Entering Data into the Variable Table**

When you open the **Variable Table** in the document, all the dimensional values for the dimensions on the drawing sheet appear in the columns. The software automatically generates the name that appears in the Name column. You can change the name to something more logical if you want.

**Restricting the Display of Variables**

You can restrict the display of variables in the table using **Filter** on the **Variable** **Table** window:

- You can display only the variables for dimensions that the software created,
- You can display variables that are associated with elements in the current document or the active window, or
- You can display a set of elements that you have selected in the document.

**Defining Variables and Parametric Handles**

To define parametric handles for parametric symbols, you must first decide which parameter handles you want to control your symbol. You can have, at most, four **122** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

handles for a parametric symbol; these four handles include **Top**, **Bottom**, **Left**, and **Right**. These handles correspond to a variable and a dimension in your parametric symbol profile.

**Note:**

- The four handles of **Top**, **Bottom**, **Left**, and **Right** are case sensitive.

SmartPlant P&ID Setup and Customization Course Guide123 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Creating Symbols from a MicroStation Cell Library**

**File (.cel format)**

1. Start **Catalog Manager**
2. Select **File** > **Open**.
3. On the **Open** dialog box, select **MicroStation (*.cel)** file type.
4. **Browse** to the **MicroStation Cell** **Library** file, **lib1.cel**, and select the file.
5. Select **Open.**
6. A sub-folder, **lib1**, will be created in the location of the MicroStation Cell Library file.

**Note:**

- A symbol (.sym) file will be created in this sub-folder for each Cell in the MicroStation Cell Library file.
1. Select **File** > **Open.**
2. On the **Open** dialog box, select **Symbol (*.sym)** file type.
3. **Browse** to the **MicroStation Cell** **Library sub-folder**, and select one of the files.

**124** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select **Open.**

**Note:**

- After opening a symbol, if you receive the following message, please follow Steps 5 - 7.
1. Using the select tool, encompass the symbol with a Select Set.
2. From the **Change** toolbar, select the **Ungroup**

command.

**Note:**

- The **Ungroup** command will dissolve the association for all elements which are grouped or nested together.
1. Select **File > Save.**
2. Select and **Delete**

all the connect points which originated from the PDS 2D

product.

SmartPlant P&ID Setup and Customization Course Guide125 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select **Fit**

, and **Move**

the symbol onto the sheet.

1. Set the correct** Item Type **in the** Properties Window. ** In this example, it is an **Instrument**.
2. Set the **Instr** **Class** and **Instr** **Type** in the **Properties Window**.
3. Ensure the lines are on the **Default** layer.
4. Add the following connect points

to the symbol:

1. Add 2 **Piping Points**

on the ends of the symbol. This is

required since the item in placed on a **Pipe** **Line**

1. Add 1 **Auxiliary** **Point**

at the center of the symbol. This

is required for placing an **Actuator.**

1. Define the Heat Tracing location on the **HeatTrace** tab for the symbol, and/or define the Jacketing on the **Jacket** tab.
2. View the **Icon** tab and make any changes, if required.
3. Select** File > Save** the symbol, and **Exit** Catalog Manager.
4. From **Windows Explorer**, move the symbol to the P&ID Reference Data folder for the plant. For example, ~\P&ID Reference Data\Symbols\Instrumentation\InLine\Valves\2 Way Common.
5. **Open** a drawing, and place this symbol in space.
6. Select the symbol, and assign a heat trace medium.
7. Place this symbol on a piperun.

**Note:**

- The same steps can be followed for creating an AutoCAD block into a SPPID

Symbol.

**126** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Working with Data Dictionary Manager**

**Data Dictionary Manager** allows you to modify properties of the data model, including the database entries, select lists, and item types that form the underlying data structure. To open Data Dictionary Manager, select **Start > All Programs >** **Intergraph SmartPlant Engineering Manager > Data Dictionary Manager**.

**Notes:**

- Because your changes can affect the database for the entire plant, only system administrators and plant managers typically customize the database with Data Dictionary Manager.
- If you open and change your data dictionary from SmartPlant Engineering Manager, you must restart SmartPlant Engineering Manager for it to reflect any changes made in Data Dictionary Manager.

**Navigating in Data Dictionary Manager**

SmartPlant Data Dictionary Manager is divided into four main functions, each of which is accessed by a command button on the left side of the main window: **Database Tables**

**Database Item Types**

**Select List**

**Select Entry**

**Managing Database Tables**

In Data Dictionary Manager, you can view and customize various groups, components, and properties that compose the drawing database. For each table in the database, you can define its properties or items. These tables make up the data model, and their properties can be unique or common in several tables in the database.

With Data Dictionary Manager, you can control the display, calculation, format, data type, and other properties for groups, such as equipment, nozzles, equipment components, instruments, pipelines, piping components, inline instruments, signal lines, and plant groups.

SmartPlant P&ID Setup and Customization Course Guide127 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Managing Database Table Properties**

With database table properties, you can control various aspects of the database. These properties are characteristics or items in a database table.

You can define properties for items that you need to work with in drawings, as well as properties for items that you need in the background to run the software. You can also define class IDs of programs that validate and calculate specific properties.

You can also determine whether you want users to see each database property in the drawing software and whether you want users to see the property when creating filters in Filter Manager.

**Notes:**

- After you define properties, you cannot change the values for the name, data type, or maximum length of the property. You can make changes to the select list for the property if the selected data type has a select list associated with it.

Changing the select list for a property can affect the integrity of previously saved data for that property. You can make changes to any other attributes of the property at any time.

- New properties do not require specification of the **Format** attribute to appear in the design software. However, properties with **Format** equal to none do not appear in the plant data dictionary when opened from **SmartPlant**

**Engineering Manager**.

**128** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Add Property Dialog Box**

When the main window displays the **Database Tables** view, the **Edit > Add** **Property** command opens the** Add Property** dialog box which allows you to add new properties to database tables.

**Important**

- The **Value** column provides a place for you to enter or modify values for properties. After you save a property, you cannot change values for the name, display name, data type, or maximum length.

**Name** - Specifies the name used for the property in the database. You can select from a list of all existing property names or type a new name for the property. If you select an existing property name, the software automatically populates the following other fields: **Data Type**, **Select List**, **Format**, **Default Value**, and **Maximum length** property fields.

**Notes:**

- To avoid internal conflicts within the database, property names cannot begin with **SP_**. After you define a name for a property, you cannot change the name, but all properties must have a name defined for them.
- We recommend using ASCII characters for internal names of added properties to avoid potential failure if the plant database is accessed from a client machine with a different locale setting.
- After you enter values and save the new property, you cannot make changes to the name, data type, or maximum length of the property.
- When you add a unit of measure property, the property name is limited to 25

characters; for all other properties, the property name cannot exceed 30

characters.

- A property name cannot contain any of the following characters: ! # $ % ^ &
- ( ) - = + { } | \ ; : ’ / ? > , < @.

SmartPlant P&ID Setup and Customization Course Guide129 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

The **Display Name** is stored in three database tables: the data dictionary attributes table, uniqueatts table, and the ItemAttributions table. The entries in the ItemAttributions tables are the ones shown in the **Properties** window within SmartPlant P&ID. The uniqueatts display name is not used outside the data dictionary manager.

**Data Type** - Specifies the type of data associated with the selected property, such as string, number, or mass. Each unit of measure is also a data type. You can use only standard data types for properties. You cannot change the **Data Type** for a property after you save the property.

**Select List** - Specifies the select list that you want to associate with this property in the design software. If you select a list for this property, users choose a value for this property from the select list instead of typing a value for the property.

**Note:**

- If the **Data Type** selected for the property can have a select list associated with it, you can select or change the list for the property at any time. However, changing the select list for a property after you use the property in the design software can affect the reliability of previously saved data.

**Format** - Specifies the format for the **Data Type** that you selected for this property.

If you defined a plant-wide default format for the data type in the SmartPlant® P&ID

Options Manager, the default format appears here when you select a data type for the property. You can change the default format for this property in Data Dictionary Manager.

**Default Value** - Specifies the value that you want to appear by default for the selected property in the design software. The default value for a property must be consistent with the **Data Type**, **Select List**, and **Format** selected for the property.

This option is not available until you select a data type. The methods of entry and available options for this field vary, depending on the data type of the property. For example, if the **Data Type** defined for this property is a number, the **Default Value** must also be a number.

**Maximum Length** - Specifies the maximum number of characters that users can enter for the selected property. You can define maximum length only when the **Data** **Type** of the selected property is a string. This value must be a non-zero positive number.

**Display to User** - Specifies whether the selected property should appear to users in the design software, such as in the **Properties** window. Choose **Yes** when you want the property to appear in the software.

**Use for Filtering** - Specifies whether this property can be used for defining filters in Filter Manager. If this property is used for creating filters, all items in the database associated with this property appear when users select the filter in other software.

Choose **Yes** when you want the property to appear in the software.

**Calculation ID** - Specifies the program ID of the program that is used to calculate specific aspects of the property. For example, if you define a calculation ID for a **130** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

property (such as nominal diameter), you can launch the associated program to calculate the nominal diameter of a piping line by specifying the program ID in Data Dictionary Manager.

**Validation ID** - Specifies the program ID of the outside program that you want to use to verify that the data entered for this property is correct, if such a program exists.

**Category** - Specifies the category that you want to use to group the selected property.

You can use categories to group and display properties with similar characteristics by category, instead of alphabetically, in the categorized view of the **Properties** window.

You can define additional categories by using the **Select Entry** **> Property Category** option.

**Depends On** - Allows you to create a parent-child relationship between two select list properties. An example of this type of relationship is InstrumentClass and InstrumentType for Instruments. This relationship allows the software to automatically set InstrumentClass when InstrumentType is set since each item in the InstrumentType select list is related to a specific row in InstrumentClass.

This relationship is created by first relating the two select lists using the **Select List** task. In this case, the Instrument Component Type list is dependent on the Instrument Component Class list.

Then, using the **Database Tables** task, define the two properties using the two related select lists. Set **Depends On** for the property that uses the dependent select list.

SmartPlant P&ID Setup and Customization Course Guide131 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Modify Property Dialog Box**

When the main window displays the **Database Tables** view, select the database table that you want to modify, select the property, and then select **Edit > Properties** or double-click the property that you want to modify. The **Modify Property** dialog box opens allowing you to modify properties of database tables.

**Note:**

- When modifying item type properties, use the **Modify *Item Type**** Properties** dialog box accessed from the **Database Item Types** display to change **Display Name**, **Category**, and **Permissions**. Use the **Modify Properties** dialog box on the Database Tables tab to change all other editable properties.

**Defining Item Type Properties**

By selecting the **Database Item Types** button, you can modify the properties that have been assigned to items. For example, you can change the display name of a property or change the category it is associated with in the categorized display of the **Properties** window. Additionally, these tables are where you view or modify the Read/Write aspect of a property.

From the **Database Item Types** table, you can see if an item type is subject to a validation or calculation program, or you can apply a program to an item type.

**Note:**

- When modifying item type properties, use the **Modify *Item Type**** Properties** dialog box accessed from the **Database Item Types** display to change **Display Name**, **Category**, and **Permissions**. Use the **Modify Properties** dialog box on the Database Tables tab to change all other editable properties.

**Modify Item Type Properties Dialog Box**

After selecting the **Database Item Types** and then an item type, you can select **Edit**

> Properties command which opens the Modify Item Type** Properties dialog box 132** * SmartPlant P&ID Setup and Customization Course Guide *
> 
- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

allowing you to modify the data dictionary item type properties. The title of this properties dialog box changes depending on the item you selected. You can change the displayed name of the item type, group the properties, and assign permissions.

**Property Name** - Displays the item property name as it is defined in the database.

**Display Name** - Specifies the name of the property that the user sees while interacting with the design. You should define display names for properties when you do not want users to see the database name of the property in drawings.

**Notes:**

- The **Display Name** is stored in three database tables: the data dictionary attributes table, uniqueatts table, and the ItemAttributions table. The entries in the ItemAttributions tables are the ones shown in the **Properties** window within SmartPlant P&ID. The uniqueatts display name is not used outside the data dictionary manager.
- After you add an attribute/property to a table, changing the **Display Name** in Database Tables does nothing but update the text in the *DisplayName* column in the Uniqueatts table. When adding an attribute to a table, the **Display** **Name** is propagated to all its newly created occurrences in the Database Item Types. To make a change after creation, you must manually update the

individual instances of the display name in the Database Item Types.

**Category** - Specifies the category that you want to use to group the selected property.

You can use categories to group and display properties with similar characteristics by category, instead of alphabetically, in the **Categorized** view of the **Properties** window. You can define additional categories using the **Select Entry > Property** **Category** option.

**Permissions** - Defines permissions for the selected item type. These permissions control where users can affect change on that property.

- **Read-Only Both** - Assign to properties that you do not want users modifying values for at all. System properties such as PlantItemType, SP_ModelItemID, and SP_ID are set to this by default because the system requires them. Serious data integrity problems can occur if you change these delivered system properties to something other than Read-Only Both.
- **Write P&ID** - Allows users to modify value only in SmartPlant P&ID. In other words, the property is read-only in Catalog Manager. For example, if Flow Rate is SmartPlant P&ID Setup and Customization Course Guide133 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

set to Write P&ID, then the user can set a value for this property when placing a pipe run in SmartPlant P&ID.

- **Write Catalog** - Allows users to modify value only in Catalog Manager. In other words, the property is read-only in SmartPlant P&ID. For example, if you are defining a piping component type, you want to be able to set the value on the item symbol in Catalog Manager, but do not want a user changing the value when they place the item of this type in a drawing.
- **Write Both** - Assign this permission to properties for which you want to set a default value in Catalog Manager but still want SmartPlant P&ID users to be able to change when placing the item in a drawing. For example, use this setting for implied items so that you can provide default values that can be modified at placement.

**Complete list** - Displays all the properties of related items.

**Defining Select Lists**

Select lists are collections of values that perform the same functions as code lists in PDS 2D. Select lists are simply groups of related values that narrow the specification of various aspects of the data model.

When you define properties in Data Dictionary Manager, you can specify whether you want users to select property values from a select list or type the value directly into the **Properties** window. Select lists allow users to select a value from a list for specific properties when creating drawings, filters, and symbols. For example, you can use select lists to:

- Show applicable properties for equipment
- List available units of measure for a property
- Show available signal lines.

**134** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

Some select lists have dependent lists. These lists provide further descriptions for items in the original select lists. For example, if piping components are divided into classes and subclasses, the entries in the Piping Subclass select list further describe entries in the Piping Class list. In this example, Piping Class is a dependent list for Piping Subclass.

The amount of different select lists that you are allowed may vary. A column in the enumerations table determines whether you can add new entries to an existing select list. When the value in the DisplayUsage column is 1, you can modify only the text of existing entries. When the DisplayUsage column value is NULL, you have full access to edit or modify the select list.

**Note:**

- The following are system select lists: **do not customize any of the following** **system select lists**. The ID numbers in the table represent the ID column in the enumerations table in your data dictionary schema.

**ID**

**ID**

**System Select Lists**

**System Select Lists**

**Numbers**

**Numbers**

AliasType

67

ModelItemType

40

Application

88

NamingType

155

AppSchemaType

89

NoOfPhases

139

AreaBreakType

77

NoteType

68

AttributeType

87

OffsetSource

58

Boolean

73

ParentType

81

CableCategory

134

PartOfType

82

CableSetType

346

PhaseArrangement

323

CaseClass

54

PipeRunClass

96

CaseType

34

PlacementType

57

CellFunction

108

PlantItemGroupClass

91

CellUsage

129

PlantItemGroupType

37

CircuitMode

340

PlantItemType

38

CircuitType

175

ProjectSettingType

74

ConductorArrangement

136

Quality

41

ConformityToStandard

128

RepresentationType

39

ConnectPointType

31

RestartFlag

110

ElectricalEquipmentClass

277

Routing

284

ElectricalEquipmentSubClass 278

SlopeDirection

85

SmartPlant P&ID Setup and Customization Course Guide135 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

EquipmentClass

24

SP_BackupType

63

FLACalculationFlag

325

StatusType

51

Frequency

114

SupplyAcDcFlag

176

HistoryType

46

SystemCableCategory

313

InconsistencyStatus

72

SystemOfUnits

76

InconsistencyType

71

TaskStatus

105

ItemStatus

70

TaskType

116

LabelBehavior

56

TerminatorStyle

78

LabelType

53

UnitsOfMeasureType

66

**Create a Select List**

1. Select the **Select List** button on the left side of the main window.
2. In the last row of the **Select List** table, which is blank, type the name of the new select list.

**Note:**

- You cannot use duplicate names or blank names for select lists. The software checks these conditions before saving any data.
1. If the new list provides further classification of an existing list, specify that select list in the **Dependent List** column.
2. Select **Save** on the toolbar to save your changes.

**Defining Select List Entries**

The **Select Entry** table consists of four columns:

- **Disable**
- **Value**
- **Short Value**
- **Dependent Value**

A blank in the **Disable** column indicates that the list entry is available in the drawing software. A check mark indicates that the entry is hidden from users.

You specify the name of the select list entry in the **Value** column. You can add select list entries by typing in the **Value** column of the last row in the **Select Entry** table.

All entries in a select list must have unique values, and you cannot delete entries in select lists.

**136** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

You specify a shortened name for the select list entry, if necessary, in the **Short** **Value** column. Short values are not required for list entries now. Other SmartPlant software uses the short value to define the contents of reports.

The dependent value provides a way to link related select lists. For example, **Equipment Type** is dependent on **Equipment Subclass**, which is in turn dependent on **Equipment Class**. So, the range of values that you see in the **Properties** window is limited to values defined for a dependent list, if one is specified for the given property. For instance, if you were creating a new vessel in Catalog Manager, you would find your choice of properties for** Equipment Subclass** select-listed, even though you only specify the **Equipment Class** when you choose **Equipment: Vessel**.

And then specifying the **Equipment Subclass** likewise appropriately select-lists the **Equipment Type**.

**Notes:**

- You can change the dependent list associated with a select entry in the **Select** **List** table of Data Dictionary Manager.
- You cannot delete select list entries. However, you can hide the select list entry in the design software by selecting the check box in the **Disable** column for the entry.
- A dependent list is like a select list for a select listed property. Notice that the values available in the **Dependent Value** column are constrained much like select lists constrain the available properties of an item.
- Be careful when modifying delivered select set lists. Some, like **Option Code**, contain short values that correspond to indices in other products and are necessary for special functions.

**Add an Entry to a Select List**

1. Select the **Select Entry** button on the left side of the main window.
2. In **Selected list** pulldown menu, choose the appropriate select list.

SmartPlant P&ID Setup and Customization Course Guide137 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- If you selected a list in the **Select List** view before you clicked Select Entry, existing entries for the selected list appear by default.
1. In the last row of the Select Entry table, specify the Value, Short Value, and Dependent Value for the new entry.

**Notes:**

- If a select list does not have a dependent list already defined in the Select List table, you cannot define dependent list entries in the Dependent Value column.
- To define a dependent list, see the *Create a Select List* topic.
1. If you do not want the entry to be available in select lists in the design software, click the Disable column in the appropriate row.

**Note:**

- A check mark in the Disable column indicates that the list entry is not available in the design software. An empty check box indicates that the entry is available to users.
1. Select **Save** on the toolbar to save your changes.

**Move Up / Move Down Commands**

The **Tools > Move Up** and **Move Down** commands allows you to move a selected entry up or down in the list.

**Sort Command**

The** Tools > Sort**

opens the **Sort** dialog box. You can sort select entries based on entries in one or more column.

**138** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Using Filter Manager**

**Filter Manager** allows you to create and manage filters. Filters are used extensively throughout the SmartPlant Engineering Suite. To open Filter Manager, select **Start >** **All Programs > Intergraph SmartPlant Engineering Manager > Filter Manager**.

You can apply filters to either drawing views or table views in the design software.

For example, you could filter all pumps in a drawing view. After applying the filter, you see all pumps in the drawing as graphical symbols. You can then select all the pumps and edit their properties one-by-one or as a select set in the **Properties** window. That same filter applied to a table view displays a list of pumps and their characteristics in a tabular format, where you can also edit the properties of the pumps.

Filters can help you show different views of the same drawing and can make your workflow more efficient. For example, you can use a filter to display an “operational”

drawing, or an “under construction” drawing. You can show all items added after a certain date or after a certain revision number. You can also use filters if you want to delete items of a certain type.

You can filter for certain components in a stockpile, such as instruments or pipes, leaving the remaining items available to place in the drawing or vice versa. For example, when you use filters with a stockpile, you can keep track of specific items that are needed for completing a drawing.

You can use filters when you create report templates to display only certain items on a report. You can also use filters in Rule Manager to define how items interact within a view. You can associate filters with the source or target properties in rules, and you can use filters to find and replace items as well.

Filters can also be used to control the display of hierarchy items in Drawing Manager.

These filters are not saved to any folder in Filter Manager, but the methods of creating these filters are the same as those for creating filters saved in Filter Manager.

**Navigating in Filter Manager**

When you open Filter Manager, the main window opens. The **Tree** view in the main window shows the organizational structure of the filters. Filters appear either singly or grouped into compound filters. Folders contain all filters and compound filters.

You can create folders and nest folders. Nesting folders occurs when one folder contains another folder, which in turn contains filters and possibly still other folders.

All users working on a specific plant can access the plant filters. Filters can apply to an entire plant or to an individual user. Your plant administrator can create, edit, or delete the filters for the entire plant. The individual user can only view, select, and apply plant filters. However, you can create personal filters, saved on your local computer, which you can edit or delete.

SmartPlant P&ID Setup and Customization Course Guide139 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

The pre-installed filters that are supplied with Filter Manager are stored in folders per their usage, in the **Plant Folders** folder. The filters include:

- Display Filters
- Filters for Reports (Report filters)
- Filters for Rules (Rule filters)
- Gapping Filters
- Label Placement Filters
- Multipurpose Filters
- Symbology Filters

The **My Folders** folder contains personal filters. These filters appear only when the owner is the current user. You can create new filters and compound filters in the My Folders folder.

The **Display Filters** folder is a good place to organize the filters that you frequently use to control the display of the various views in the design software.

**Notes:**

- It is a good idea to create new filters, copy filters, or add shortcuts to filters in this folder rather than moving original filters from, for instance, the Filters for Rules folder.
- You can cut, copy, paste, and rename folders and filters.
- Double-clicking a filter in the **Tree** view displays the **Filter Properties** dialog box.

**Type of Filters**

Two types of filters exist in **Filter Manager**: **simple** and **compound**. You can nest one or more simple filters in compound filters to build a more complex collection of items. For example, if you have one filter that shows the secondary piping in the **140** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

drawing, and another filter that shows the primary piping, you can combine these filters to show all the piping without the hose. You can even nest compound filters for more complexity.

**Simple Filters**

A **simple filter** is a filter that only uses one criteria specification (either And or Or).

There may be two or more properties defined in the filter, but all are using the same criteria.

**Filter Properties Dialog Box**

The **Filter Properties** dialog box specifies properties of a filter, including the name, description, and the other properties for which you want to filter. The dialog box will look different, depending upon whether you have selected a simple filter or compound filter.

Each item type owns a set of properties. Examples of item types are Equipment, Instrument, and Pipe Run, and examples of properties for these item types are Equipment Type, Instr. Loop Part Number, and Estimated Length, respectively.

**Name** - Specifies the filter name. The name can be any combination of characters and any length. Filter names within a plant must be unique. This name appears as the filter name on the Filter Manager interface.

**Set as asking filter** - Select this check box to define the filter as an asking filter.

When an asking filter is invoked on its own or as part of a display set, you are prompted to change the values in the **Operator** and **Value** fields for the filter properties. Clear the check box to define the filter as a regular simple filter.

SmartPlant P&ID Setup and Customization Course Guide141 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **Description** - Allows you to specify a phrase or sentence about the filter. The description can be any combination of characters and any length. The description appears as a **ToolTip** when you point to the filter name on the Filter Manager interface.

**Filter for** - Contains the top-level items from the data dictionary. This area allows you to specify available properties in the **Definition** grid.

**Definition** - Displays all defined criteria associated with a filter. To add to or modify the definition list, you must select a line in the list and then define or edit the property in the **Edit** group.

- **Match all** - Specifies that items matching ALL the filtering criteria pass through the filter.
- **Match any** - Specifies that items matching any one or more of the filtering criteria pass through the filter. **Match any** is the default matching method.
- **Add** - Places a new entry at the end of the existing definition list and enables the options in the **Edit** group so you can edit the new entry.
- **Delete** - Removes the selected criterions from the definition list. This button is available only when you select a criterion in the definition list.

**Edit** - Allows you to define or edit a single line of filter definition criteria.

- **Property** - Displays a list of all properties for a certain item type. You define or modify filtering criteria by selecting a property, an operator, and a value.
- **Operator** - Specifies the relationship between the property and the specified value. Examples of relationships include greater than (>), equal to (=), not equal to (<>), and so forth.
- **Value** - Lists appropriate values for the property specified in the **Property** field. If a list of attributes is not already associated with the **Value** box, you must type a value, which can be free text, or choose null. You can type a percent sign (**%**) as a wildcard character to find multiple characters, or type a question mark (**?** ) as a wildcard character for a single character. (Do not use an asterisk () in the **Value** box.)

**Compound Filters**

A **compound filter** is a filter that combines **Match All** and **Match Any** criteria (**And** and **Or**). A compound filter is comprised of two or more simple filters.

**Compound Filter Properties Dialog Box**

The **Compound Filter Properties** dialog box specifies properties of a compound filter, including the name, description, and whether to match all or match any of the simple filter criteria. A compound filter consists of more than one simple filter.

Simple filters are added to the compound filter either by dragging the simple filter to **142** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

the compound filter folder or by creating new simple filters under the compound filter in the filter hierarchy. Compound filters apply only to homogeneous item types.

**Name** - Specifies the filter name. The name can be any combination of characters and any length. Filter names within a plant must be unique. This name appears as the filter name on the Filter Manager interface.

**Description** - Specifies a phrase or sentence about the filter. The description can be any combination of characters and any length. The description appears as a **ToolTip** when you point to the filter name on the Filter Manager interface.

**Filter Method** - Allows you to decide whether items must meet all or only one criterion to pass through the filter.

- **Match all** - Specifies that items matching ALL the filtering criteria pass through the filter.
- **Match any** - (Default) Specifies that items matching any one or more of the filtering criteria pass through the filter.

**Note:**

1. All the filters that make up the new compound filter need to be of the same item type, which appears in the **Filter for** list on the **Filter Properties** dialog box. For example, all the simple filters making up a compound filter can be of type **Equipment: Mechanical**. You cannot mix **Equipment: Mechanical** with **Equipment: Heat Transfer** or any other item type.

SmartPlant P&ID Setup and Customization Course Guide143 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Using SmartPlant® P&ID Options Manager**

**Options Manager** controls the look and feel of the design software and controls much of the data used throughout the life of a plant. For example, you can define how particular drawing items appear in drawings by selecting colors, line styles, gapping styles and heat tracing styles for the plant. To open SmartPlant® P&ID Options Manager, select **Start > All Programs > Intergraph SmartPlant P&ID > Options** **Manager**.

Using SmartPlant® P&ID Options Manager, you can identify the location of symbols, rules, and labels. You can also define symbology for graphics, default formats for data, and key distances that affect the behavior of the design software.

**Important**

- Any changes made using **SmartPlant® P&ID Options Manager** apply to all drawings in the plant.

You can customize the following options:

- **Symbology** - controls the look of items.
- **Gapping** - controls the style of gaps used and which lines gap.
- **Heat Tracing** - defines the available display for heat tracing.
- **Formatting** - specifies default formats used throughout the plant.
- **Default Distances** - specifies basic distances used throughout the plant.
- **Default Reference Settings** - controls where and how reference data is stored.

**Note:**

- Usually, an administrator sets these options when a plant is created. The administrator can later modify these options when plant requirements dictate a change.

**Navigating in SmartPlant® P&ID Options Manager**

**Options Manager** is divided into six main functions, each of which is accessed by a command button on the left side of the main window. Select one of these buttons to open a detailed view in the main window.

**144** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Symbology**

The **Symbology** option provides graphical clarity to a drawing by differentiating among various items by their appearance. Symbology refers to the color, line width, and style associated with items in a filter.

By default, the software offers a set of predefined symbology for different item types.

You can change the default symbology for any filter or define symbology for any other existing filters.

**Notes:**

- The order of the options listed in the **Symbology** table indicates a priority when assigned to an item upon placement in a design. You can change the priority of symbology assignment by selecting the symbology row and

selecting the **Move Up**

or **Move Down**

buttons. You can select only one

row at a time when changing symbology priority.

You can use color to differentiate among the different types of drawing items, such as equipment, piping, or instruments, while the software uses line widths and styles to represent various properties of those items. For example, you can define symbology to represent existing lines, future lines, and new lines by using filters that correspond to these in Filter Manager. You can also define symbology to represent lines carrying different fluids or items supplied by different manufacturers, if those properties exist for items in the data model.

**Plant Filter** - Set of filters for the plant structure available in **Filter** **Manager**. You may add a new filter by placing the cursor in the last row of the Plant Filter list, and select the three ellipses (…). This will bring up the Filter Manager interface and an existing filter can be selected or a new one can be created.

SmartPlant P&ID Setup and Customization Course Guide145 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Color -** Select a color for the items. This list is made up of the colors delivered with the operating system

**Width** - Sets the line weight for the item

**Pattern -** Sets a line pattern for the item. The patterns available come from the *projectstyles.spp* file. You may create a new pattern using the **Catalog Manager >** **Line Style Editor** and then import the pattern into **SmartPlant® P&ID Options** **Manager** using **Tools > Linear Patterns**.

**Update Symbology Command**

Changes in the symbology take effect only in those drawings that are created after those values are defined. To update the symbology of drawings that were created prior to the changes, you may open the drawing in SmartPlant P&ID and run the **Tools > Update** **Symbology** command. This utility will read the latest values in the **SmartPlant® P&ID Options Manager > Symbology** form and update the existing graphics in the drawing with the latest value, and allow newly placed graphics to have the new symbology.

**Gapping**

The **Gapping** option allow you to establish priorities and define symbols for displaying line intersections in drawings. In a drawing, when lines, hoses, capillaries, or other line routes intersect, you place gaps in the line with lower priority, while lines with higher priority remain unbroken.

The gapping style dictates whether the software displays a jumper or a gap when two lines intersect in a drawing. When you define gapping options, you choose from the following gapping styles:

- **Plain** **Gap (NoJumper** style**)**:
- **Gap** **with** **Break** **Marks (IsJumper1** style**)**:
- **Jumper (IsJumper2** style**)**:

**Important**

- Options set for gapping in SmartPlant® P&ID Options Manager apply only to automatically gapped lines. You can turn the automatic gapping of lines on and off with gapping commands in the design software.

**146** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Line Type -** Set of filters for the plant structure available in Filter Manager. ** **

**Orientation -** Refers to the orientation of the line routed in the drawing (Horizontal or Vertical). ** **

**Gapping Style -** Refers to the gap style that will be applied.

You can define a priority list to handle such intersections. The placement of the connector type in the **Gapping** list indicates its gapping priority. For example, when you place two lines that appear to intersect in the drawing but do not intersect in the plant model, the design software automatically gaps the line that appears lower in the list. By default, piping lines gap signal lines, and primary lines gap secondary lines; however, an undefined gapping style receives the highest priority by default.

As in Symbology, the **Edit >**  **Move Up** and **Move** **Down** buttons can be used to change the order of the gapping (remember the higher in the list, the higher the precedence). You can select only one row at a time when changing symbology priority.

To add a new line type filter, scroll to the bottom of the list, place the cursor in the last **Line Type** field, and select the three ellipses (…). Also, the **Edit >**  **Insert Row** button can be used to place a new definition anywhere in the list. **Edit >**  **Delete Row** will delete the filter from the list only.

**Gapping Lines in a Drawing**

In **SmartPlant P&ID**, the following three options are used to gap lines:

- The **Tools > AutoGap** command will check every time a line is routed that fulfills the gapping filter for an intersection and perform the appropriate gapping procedure. **AutoGap** will lower the performance of the software.
- The **Tools >**  **Gap Now** command will scan the drawing for crossed lines, and perform the correct gapping based on the fulfillment of the filter gapping criteria.

SmartPlant P&ID Setup and Customization Course Guide147 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- The third option is to place a manual gap from the **Catalog** **Explorer** (**Symbols** > **Piping** > **Gaps**). Software-generated gaps will not override manual gaps in a drawing.

**Tracing**

The **Tracing** option allow you to specify the default appearance and location of heat tracing symbology in drawings for a plant. You can define a variety of line styles to designate lines with heat tracing.

**Tracing Media -** Displays the values in the **Heat Trace Medium** Select List. If the symbol was created to be eligible to be heat traced and the **Heat Tracing Media** property is defined for the symbol, the defined graphics will display around the item. ** **

**Style -** Displays all available heat tracing line styles. The patterns available come from the **projectstyles.spp** file. You may create a new pattern using the **Line** **Style** **Editor** available with **Catalog** **Manager** and then import the pattern into **SmartPlant® P&ID Options Manager** using **Tools** > **Linear** **Patterns**. A style that may be used for heat tracing must contain the words “heat trace”. For example, steam heat trace. ** **

**Add a Tracing Media**

1. Modify the Select List (**Heat Trace Medium**) using **Data** **Dictionary** **Manager**. Refer to the *Modify a Select List Entry* topic in Data Dictionary Manager Help for details about modifying a select list.
2. After you add the new entry in the select list, open **SmartPlant® P&ID Options** **Manager** and select **Tracing**. The new heat tracing medium you added displays in the **Tracing Media** list.
3. In the **Tracing Media** list, locate the new media and select the **Style** box.

**148** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select a new heat tracing style from the list.
2. Select **Save**.

**Tracing Position**

The toolbar buttons** **

on the dialog allows you to change the

placement of Heat Tracing for lines in the Plant. The options in this list describe the default placement of heat tracing for both horizontal and vertical lines in the P&ID.

The options are **Bottom Right**, **Bottom Left**, **Top Right**, and **Top Left**. The **Heat** **Tracing Position** property applies to all types of heat tracing in the current Plant.

**Tracing Position**

**Heat Tracing Location**

**Options**

**Bottom Right** Below horizontal lines and to the right of vertical lines.

**Bottom Left**

Below horizontal lines and to the left of vertical lines.

**Top Right**

Above horizontal lines and to the right of vertical lines.

**Top Left**

Above horizontal lines and to the left of vertical lines.

**Formats**

The **Formats** option controls the default formats associated with various data types in the application database. Some examples of data types include length, area, volume, pressure, angular velocity, thermal expansion, signal intensity, integer, and string.

Data formats associated with data types control the length and type of specific information for the plant, such as text strings and numbers. Data formats also control the units associated with measurements in drawings and the placement of information in drawings. The formats assigned to these data types can change from plant to plant.

You can use the default data type formats, or you can create new formats with Format Manager.

These formats will be used in properties for a plant and in labels (depending upon how the labels are designed). The property grid works with these default formats so that when the user enters a value for a property, the software uses the plant format by default. The user can choose to enter data in some other format by first selecting the unit of measure format from the list in the properties grid and then entering a value.

When a label has the format Plant Default specified, then it will use the format that you specify for the data type in SmartPlant® P&ID Options Manager.

SmartPlant P&ID Setup and Customization Course Guide149 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Data Type -** Specifies a list of data types available from **Format** **Manager**. Some examples of data types include length, area, volume, pressure, angular velocity, thermal expansion, signal intensity, integer, and string. ** **

**Format -** Presents a list of available formats from **Format** **Manager** for the given data type. Formats may include different units of measure, precision, readout, etc. ** **

**Distances**

The **Distances** option allows you to define minimum distances between objects in drawings and to define default lengths for various entities in drawings in a plant. If you selected meters as the default format for thickness with the **Formats** option, these values appear in millimeters by default.

You can define default distances or lengths for the following:

**Label Offset Distance** - Defines the default distance between a label and the component being labeled. You can override this distance with the **Catalog** **Manager**

**> Offset** **Source** and **Offset** **Distance** values when you create the label.

**150** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Minimum Connector Segment** - Defines the minimum length for connector segments (the shortest length of pipe or signal run that can exist). However, the design software overrides this distance when you place piping components together.

The line created between two touching components is zero-length. The greater of the **Minimum Connector Segment** and **Routing Self-Avoidance** settings governs the shortest line length when, for instance, routing a line from a nozzle.

**Routing Self-Avoidance** - Defines the distance between a line route and an object that the line is avoiding. This setting also governs how long a segment must be to place an inline component into it. Once you place a line in your design, the self-avoidance setting is applied. If you later change this setting, it will only affect lines created after the change. The original self-avoidance distance remains a characteristic of any line once it is created. You can use the delivered utility, ***ApplySettingsCmd.dll***, to update existing lines with the next value. For information about this utility, refer to the *SmartPlant P&ID Installation Guide*.

**Settings**

The following reference data settings are defined in SmartPlant® P&ID Options Manager to specify the location of types of data. You can specify various default settings used in creating P&IDs and sharing data with other applications.

**Note:**

- Select the ellipsis beside the Setting value to navigate to the desired path.

**Catalog Explorer Root Path** - Specifies the node or server where the symbols for this plant are stored.

**Claim Mode -** Allows you to choose the appropriate claim mode for your plant: **Exclusive** or **Shared**. This option can be changed only if the Claim Table is empty. If it is not empty, a message box appears. Additionally, if you are operating in a project, rather than the Plant, this option is always read-only. Only model items can be claimed. For more information about claiming items, see *SmartPlant P&ID Help*.

**Copy Transformation Program -** Specifies the transformation program to be used during the copying process. A transformation program is delivered with the software. You can copy this delivered code and then create your own customized transformation program.

**Default Assembly Path -** Specifies the default folder where assembly files are stored.

If you want users to store new assemblies in the Catalog Explorer by default, enter the path for a folder in the **Catalog Explorer** root path.

**Default Duct Symbol File -** Specifies the default symbol used to represent ducting when two in-duct components are placed directly beside one another in a P&ID. For example, when two in-duct components, such as a duct nozzle and a flowmeter, are placed so that they touch, the software highlights the shared connect point. If you define a default ducting symbol in SmartPlant® P&ID Options Manager, the two SmartPlant P&ID Setup and Customization Course Guide151 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

items are automatically connected with a ducting segment. If no default ducting symbol is defined, the software does not generate the connecting ducting segment. ** **

**Default Pipe Symbol File -** Specifies the default symbol used to represent piping when two inline components are placed directly beside one another in a P&ID. For example, when two inline components, such as a nozzle and a valve, are placed so that they touch, the software highlights the shared connect point. If you define a default pipe symbol in SmartPlant P&ID Options Manager, the two items are automatically connected with a pipe segment. If no default pipe symbol is defined, the software does not generate the connecting pipe segment. This path is a relative path based on the path defined for the **Catalog Explorer** root folder. If you change this to a UNC path, once inside a P&ID, you cannot place two inline components adjacent to each other. For example, a valve adjacent to a nozzle.

**Default Report Template Path -** Specifies the folder where default report templates for this plant are stored, including the blank Excel template used for creating new templates. When a report template is created and added to the plant reports, the new template is also stored at this location.

**Default Signal Line Symbol File** - Specifies the default symbol used to represent signal lines when two offline instruments are placed directly beside one another in a P&ID. By default, this setting is blank. If no default signal line symbol is defined, the software does not generate a connecting signal line segment. For example, when two offline instruments are placed so that they touch, the software highlights the shared connect point. If a default signal line symbol is defined in SmartPlant P&ID Options Manager, the two items are automatically connected with a signal line segment. This path is a relative path based on the path defined for the **Catalog Explorer** root folder.

**Note:**

- If you change this to a UNC path, once inside a P&ID, you cannot place two offline components adjacent to each other. For example, discrete offline instruments, like a pressure transmitter and a pressure indicator.

**Delete Key Default Behavior** - Specifies the default behavior when you select drawing items and press the Delete key or select Delete on the toolbar. The available options are:

- **Delete from model** — Deletes the item from the database as well as from the drawing.
- **Delete to plant stockpile** — Deletes the item from the drawing and sends it to the plant stockpile.
- **Delete to drawing stockpile** — Deletes the item from the drawing and sends it to the drawing stockpile.

**Note:**

- The last two options only take effect for item types that appear beside the **StockpileItems** property.

**152** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Display Undefined As** - Allows you to define how you want a null value to appear in the **Properties** window. When you select **Display Null** from the **Properties** window toolbar, you see this value for all properties that are null. Use the **null** setting definition if you are using the PipeSpec Commodity Code Lookup utility.

**Drawing Properties - Optional** - Specifies the properties that appear on the **New** **Drawing** dialog box as optional when you create a new drawing in SmartPlant P&ID. If a value already appears on the **Drawing properties - Required** list, you are prompted before assigning it as optional. These fields are comma-delimited, for example: Version, Description.

**Drawing Properties - Required** - Specifies the properties that appear on the **New** **Drawing** dialog box as required when you create a new drawing in SmartPlant P&ID. If a value already appears on the **Drawing properties - Optional** list, you are prompted before assigning it as optional. These fields are comma-delimited, for example: Version, Description.

**DuctRun Name Attributes** - Specifies the common properties of ducts that belong to the same duct run. For example, if tag sequence number and fluid code are used to define a duct run, all connected ducts that have the same tag sequence number and fluid code belong to the duct run. To specify the properties used to define a duct run name, select the desired properties one-by-one from the list of properties in the Setting column. To remove a property from the duct run name, highlight that property including the preceding or following comma separator and on the keyboard, press Delete.

**DuctRunNextSeqNo** - Specifies the next number used to automatically generate a unique tag sequence number for duct runs. If the tag sequence number property is left blank or a duplicate is entered, the design software uses the value entered here as the tag sequence number for the duct run. As tag sequence numbers are used, this value changes dynamically to the next consecutive number. This value also determines the first tag sequence number that you want to use for duct runs in this plant. If you want to start with sequence numbers of more than three digits or with another value, you can modify the default value of 100 before you begin your design sessions.

**Enable “Keep Checked Out” on Checkin** - Allows you to check in a drawing but keep the drawing checked out for further work. All claims are maintained.

**Enable Piping Specification Validation** – Enables continuous service limits validation and automatic commodity code lookup if the **Use Piping Specification** setting is **PDS3D** or **SmartPlant 3D** and this setting is **Yes**. If the **Use Piping** **Specification** setting is **PDS3D** or **SmartPlant 3D** and this setting is **No**, service limits validation and commodity code lookup are not available. However, the PipeSpec Commodity Code Lookup utility continues to provide other capabilities in SmartPlant P&ID. If you enter the applicable program IDs in SmartPlant Data Dictionary Manager, you enable the **Calc**  button in the **Piping Material Class** property for a pipe run and in the **Commodity Code** property for a piping component.

SmartPlant P&ID Setup and Customization Course Guide153 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **Enable Plant Editing** - Specifies whether the Engineering Data Editor is enabled to manage data for all objects in the plant or only for objects in the active drawing and active drawing stockpile. If set to Yes, data values that you can change for objects that belong to a non-active drawing will be enabled for editing, if the drawing has not been opened by a user. If set to No, all data values for objects that belong to non-active drawings will be displayed as read-only. For new or upgraded plants, the default value of this setting is Yes.

**Enable System Editing -** Specifies if system wide changes in item values can be made automatically while editing. If set to **Yes**, when you change a value on an item, the new value is propagated to other connected items. These changes take place based on any existing rule settings.

**EquipNextSeqNo** - Specifies the next number used to automatically generate a unique tag sequence number for equipment. If the tag sequence number property is left blank or a duplicate is entered, the software uses the value entered here as the tag sequence number for the piece of equipment. As tag sequence numbers are used, this value changes dynamically to the next consecutive number. This value also determines the first tag sequence number that you want to use for equipment in this plant. If you want to start with sequence numbers of more than three digits or with another value, you can modify the default value of 100 before you begin your design sessions.

**Export to CAD Definition File** - Specifies the Excel workbook used to associate filters in the design software with layer names in AutoCAD and level numbers in MicroStation. The software uses this definition file to tag items in a drawing with the layer name or level number on which the item should appear when the drawing is saved as an AutoCAD or MicroStation file. This definition file is only used when the ExportLayer.dll macro is run before the drawing is saved in a different file format.

**Heat Tracing Media – Double Heat Trace -** Specifies a list of heat tracing media used to define which connectors are double heat traced. If a value already appears on the **Heat tracing media - Jacketed pipe** list, you are prompted before assigning it as double heat traced. These fields are comma-delimited, for example, FAJ, FBJ.

**Heat Tracing Media - Jacketed Pipe -** Specifies a list of heat tracing media used to define which connectors are jacketed. If a value already appears on the **Heat tracing** **media - Double heat trace** list, you are prompted before assigning it as jacketed. These fields are comma-delimited, for example, FAJ, FBJ. ** **

**Import Map Path** - Defines where your map files reside on the system. An import map file is used to match attributes during the import process.

**Import Transformation Program -** Specifies the transformation program to be used during the import process. This program controls the depth of the data transformation. A transformation program, CopyTransformation.Import, is delivered with the software. You can copy this delivered code and then create your own customized transformation program.

**InstrLoopNextSeqNo** - Specifies the next number used to automatically generate a unique tag sequence number for instrument loops. If the tag sequence number **154** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

property is left blank or a duplicate is entered, the design software uses the value entered here as the tag sequence number for the instrument loop. As tag sequence numbers are used, this value changes dynamically to the next consecutive number.

This value also determines the first tag sequence number that you want to use for instrument loops in this plant. If you want to start with sequence numbers of more than three digits or with another value, you can modify the default value of 100

before you begin your design sessions.

**InstrNextSeqNo -** Specifies the next number used to automatically generate a unique tag sequence number for instruments. If the tag sequence number property is left blank or a duplicate is entered, the design software uses the value entered here as the tag sequence number for the instrument. As tag sequence numbers are used, this value changes dynamically to the next consecutive number. This value also determines the first tag sequence number that you want to use for instruments in this plant. If you want to start with sequence numbers of more than three digits or with another value, you can modify the default value of 100 before you begin your design sessions. ** **

**Max-Temperature Unit in PDS3D** - Specifies the units used for maximum temperature in PDS 3D. You can select **Deg-F**, **Deg-C**, **Deg-K**, or **Deg-R** from the list for this setting. The PipeSpec Commodity Code Lookup utility uses this setting.

**OPCItemTag** - Specifies the next number used to automatically generate a unique tag sequence number for off-page connectors (OPCs). If the tag sequence number property is left blank or a duplicate is entered, the design software uses the value entered here as the tag sequence number for the OPC. As tag sequence numbers are used, this value changes dynamically to the next consecutive number. This value also determines the first tag sequence number that you want to use for OPCs in this plant.

If you want to start with sequence numbers of more than three digits or with another value, you can modify the default value of 100 before you begin your design sessions.

**PDS Approved Reference Database Schema Name** - Enter the user name created for the **ra** schema of the PDS 3D project.

**PDS Approved Reference Database Schema Password** - Enter the password for the user created for the **ra** schema of the PDS 3D project.

**PDS Database Name -** Enter the name of the PDS database. This field is required for Microsoft SQL Server databases.

**PDS Database Server/Alias -** Enter the name of the PDS server or an alias. This server name is required for Microsoft SQL Server database. An **Alias** name on the client machine is required for an Oracle database.

**PDS Database Type** - Sets the type of database PDS is utilizing. Valid options include ORACLE or MSSQL.

**PDS Project Control Database Schema Name -** Enter the user name created for the **pd** schema of the PDS 3D project.

**PDS Project Control Database Schema Password** - Enter the password for the user created for the **pd** schema of the PDS 3D project. This user must have access privileges in both the **ra** and **pd** database schemas.

SmartPlant P&ID Setup and Customization Course Guide155 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **PID Template Path** - Specifies the storage location of templates used to create drawings in the design software. When a new template is created, the template is also stored in this folder by default.

**Pipe Jacket Nominal Diameter Configuration File** - Specifies the name and path of the XML file used to store the spec showing the allowed jacket nominal pipe diameters available for each core pipe diameter. You define this information on the Pipe Jacket Nominal Diameter dialog box. Select the ellipsis beside the Setting value to select the desired file.

**Pipeline Name Attributes** - Specifies the common properties of lines that belong to the same pipe run. For example, if tag sequence number and fluid code are used to define a pipe run, all connected lines that have the same tag sequence number and fluid code belong to the pipe run. To modify the properties used to define a pipe run, type the new properties in the **Setting** column. The property name must be spelled exactly as it appears in the data dictionary.

**PipeRunNextSeqNo** - Specifies the next number used to automatically generate a unique tag sequence number for pipe runs. If the tag sequence number property is left blank or a duplicate is entered, the design software uses the value entered here as the tag sequence number for the pipe run. As tag sequence numbers are used, this value changes dynamically to the next consecutive number. This value also determines the first tag sequence number that you want to use for pipe runs in this plant. If you want to start with sequence numbers of more than three digits or with another value, you can modify the default value of 100 before you begin your design sessions.

**Plant Insulation Specification File** - Specifies the storage location for the file that contains all the available insulation information for this plant. The plant insulation file is an .isl file.

**Plant Style File** - Specifies the storage location for the file that contains all the available symbology for this plant, such as line patterns and styles. The plant style file is an .spp file.

**Revision Management Software For Publishing Documents** - Allows you to select the software that will add new revisions to the documents that are intended to be published in an integrated environment.

- **SmartPlant Foundation** - Instructs the software to add new revisions using SmartPlant Foundation revision management tools. This option is only available if the plant was registered with SmartPlant Foundation.
- **SmartPlant P&ID** - Instructs the software to add new revisions using SmartPlant P&ID revision management tools. If desired, you can select this option for a registered plant so that when publishing documents, the software sends SmartPlant P&ID revisions to SmartPlant Foundation instead of using the SmartPlant Foundation revision feature. This option always applies for plants that are not registered with SmartPlant Foundation.

**RoomNextSeqNo -** Specifies the next number used to automatically generate a unique tag sequence number for rooms. If the tag sequence number property is left **156** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

blank or a duplicate is entered, the design software uses the value entered here as the tag sequence number for the room. As tag sequence numbers are used, this value changes dynamically to the next consecutive number. This value also determines the first tag sequence number that you want to use for rooms in this plant. If you want to start with sequence numbers of more than three digits or with another value, you can modify the default value of 100 before you begin your design sessions. ** **

**Rules Library** - Specifies the location of the rules library for this plant. The rules library contains rules that customize the interaction of model items when you place or manipulate these items. You can define and modify rules in Rules Manager. The rules library is a .rul file.

**Signal Name Attributes** - Specifies the common properties, or attributes, of signal lines that belong to the same signal. To modify the properties used to define an instrument loop, type the new properties in the **Setting** column. The property name must be spelled exactly as it appears in the data dictionary.

**SmartPlant 3D Plant Name** - Specifies the name of the SmartPlant 3D plant. The PipeSpec Commodity Code Lookup utility uses this setting if SmartPlant 3D is specified in the **Use Piping Spec** option.

**SmartPlant 3D Server Name** - Specifies the server that contains the SmartPlant 3D

COM Application. The PipeSpec Commodity Code Lookup utility uses this setting if SmartPlant 3D is specified in the **Use Piping Spec** option.

**SmartPlant Reference Data Plant Name** - Specifies the name of the SmartPlant Reference Data plant. The PipeSpec Commodity Code Lookup utility uses this setting if SmartPlant Reference Data is specified in the Use Piping Specification option.

**SmartPlant Reference Data Server Name** - Specifies the name of the server that contains the SmartPlant Reference Data database. The PipeSpec Commodity Code Lookup utility uses this setting if SmartPlant Reference Data is specified in the Use Piping Specification option. The SmartPlant Reference Data server name must be entered as a connection string in the form of *:<TCP/IP Port* *Number>/* , for example: IN-SPMATDBSRV:1521/SDB2012

**SmartPlant Resources Path** - Specifies the path to the EFResources file for this plant or project.

**SmartPlant Retrieve - Apply Default Formats** - Allows you to specify to use either the units defined in the source or the units defined in the target when retrieving data. If set to **No**, the retrieved property’s preferred display UOM is mapped to the P&ID format. This value is used to reformat the retrieved UOM property value for display as the new value in the **To Do List**. If set to **Yes**, the default format for the attribute is retrieved. This value is used to reformat the retrieved UOM property value for display as the new value in the **To Do List**.

**StockpileItems** - Specifies the item types that should appear in the stockpile when they are deleted from a drawing. Pipe runs appear in the stockpile by default when you delete them. For example, if you want only vessels, exchangers, and instruments (along with pipe runs) to appear in the stockpile when deleted from a drawing, type, **Vessel**, **Exchanger**, **Instrument** in the **Setting** column.

SmartPlant P&ID Setup and Customization Course Guide157 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Terminator Style** - Specifies the type of terminator used at the terminal end of all leader lines, such as an arrow, solid dot, solid arrow, or none.

**To Do List Placement Zone** - Controls the freestanding placement of items called when the **SmartPlant> To Do List** command in SmartPlant P&ID is selected. The items are placed in the area around the drawing border. Options include **Left**, **Right**, **Top**, **Bottom**, and **Pinwheel** (the default setting).

**Use Piping Specification** - Presents the choices for using the PipeSpec Commodity Code Lookup utility.

- **No** - No type of calculation or validation for PipeSpec.
- **PDS3D** - Specifies the PDS 3D database for piping specification. When specified, SmartPlant P&ID Options Manager checks corresponding settings to make sure that the PDS 3D database connections are defined.
- **SmartPlant 3D** - SmartPlant 3D database is used for piping specification. Once specified, SmartPlant P&ID Options Manager checks corresponding settings to make sure that the server and plant name are defined.
- **SmartPlant Reference Data** - SmartPlant Reference Data database is used for piping specification. Once specified, SmartPlant P&ID Options Manager checks corresponding settings to make sure that the server and plant name are defined.

**Notes:**

- If **Enable Piping Specification Validation** is set to **Yes** and the value for this option is set to **PDS3D**, **SmartPlant 3D**, or **SmartPlant Reference** **Data**, continuous service limits validation and automatic commodity code lookup are invoked.
- If the value for this option is set to **No**, continuous service limits validation and automatic commodity code lookup are not available. Also, the **Calc** buttons for the **Piping Materials Class** and **Commodity Code** properties are not functional.
- The **Short Value** entries in the **Piping Component Type** select list in Data Dictionary Manager are populated from the contents of the

PDS3D_SP3D_ShortCode_Correlation.txt file (located in the ~ *Program* *Installation Folder*\SmartPlant\P&ID Workstation\bin folder) per the **Use** **Piping Specification** setting as follows:

o **PDS3D** — The **Short Value** column is populated with data from the second column of the PDS3D_SP3D_ShortCode_Correlation.txt file

(AABBCC code).

o **SmartPlant 3D** or **SmartPlant Reference Data** — The **Short Value** column is populated with data from the third column of the

PDS3D_SP3D_ShortCode_Correlation.txt file.

o **No** — The data in the **Short Value** column is not updated and remains what it was previously.

**158** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Configuring Jacketed Piping**

1. Start **SmartPlant® P&ID Options Manager**.
2. Select **Settings** and locate the **Heat Tracing Media – Jacketed Pipe** setting.
3. In the **Heat Tracing Media – Jacketed Pipe** > Setting field, utilize the dropdown list to select which Heat Tracing Mediums will be utilized for Jacketed Piping.
4. Select the **SmartPlant® P&ID Options Manager > Tools > Pipe Jacket** **Nominal Diameter** command.
5. The **Pipe Jacket Nominal Diameter** command opens the **Pipe Jacket Nominal** **Diameter** dialog box, from which you can specify standard jacket diameters suitable for the core nominal pipe diameter of each jacketed pipe.
- **Add Row** - Allows you to add a new row with a specific pipe diameter from the Data Dictionary. Select an empty cell for a list of available pipes.

SmartPlant P&ID Setup and Customization Course Guide159 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Add Column** - Allows you to add another column to the table.
- **Delete Row** - Deletes the row for the currently selected cell. To delete a row, select a cell in the desired row and select **Delete Row**, or right-click a cell and on the shortcut menu, and select **Delete Row**.
- **Delete Column** - Deletes the column for the currently selected cell. To delete a column, select a cell in the desired column and select **Delete Column**, or right-click a cell and on the shortcut menu, and select **Delete Column**.
- **Save** - Sorts the data values in ascending order in each row and column and saves any changes made to the table in the XML file defined as the Jacket Pipe Nominal Diameter Configuration file in the SmartPlant® P&ID Options Manager settings.
1. Select **Add Row** and enter values for the **Core NPD** and **Jacket NPDs**.
- **Core NPD** - Specifies the core pipe diameter as set in Data

Dictionary. Values in this column cannot be deleted. Within SPPID, this is the value which will be validated when a value is set for Nominal Diameter.

- **Jacket NPD Min** - Allows you to specify the minimum jacket diameter available for the core pipe. The value must always be greater than the corresponding core pipe value. Values in this column cannot be deleted.

Within SPPID, this is the J_Nominal Diameter value which will automatically be set based on the value defined for Nominal Diameter (Core NPD).

- **Jacket NPD 2**, **Jacket NPD 3, and so forth** - Allows you to add optional jacket sizes for a specific pipe. Select on an empty cell in the specific pipe row to add an optional jacket size.

**160** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- In SPPID, the following dialog will appear when you have Nominal Pipe Diameter defined on a Pipe Run pipe, with a value which is not defined in the Core NPD, and you apply a Jacketed Heat Tracing Medium (SSJ, SNJ, SMJ, SLJ).
- In SPPID, the following dialog will appear when Jacketed Heat Tracing is set for a Pipe Run and the value for Nominal Pipe Diameter, which you are setting, is not equal to the Core NPD defined in **SmartPlant® P&ID Options** **Manager > Tools > Pipe Jacket Nominal Diameter**.

SmartPlant P&ID Setup and Customization Course Guide161 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Updating Drawings in Drawing Manager**

The **Drawing Manager >**  **File** > ** Out-of-Date Drawings** command contains the **Update**, **Report**, and **Schedule Update** commands. The **Update** command allows reference data changes, i.e. symbology, to be applied to existing drawings without having to open the drawings, and you can also locate and resolve missing symbols.

The **Report** and **Schedule Update** commands are used to create reports and schedule updates for drawings, respectively.

**Note:**

- The **Drawing Manager >**  **Tools** > ** Out-of-Date Drawing Criteria **command** **

can be used to establish some criteria for defining out-of-date drawings.

**Out-of-Date Drawing Criteria Command**

The **Drawing Manager >**  **Tools** > ** Out-of-Date Drawing Criteria **command displays the** Out-of-Date Drawing Criteria** dialog box. Items selected in this list define what criteria is used to search for out-of-date values when you use the **File >** **Out-of-Date Drawings** commands.

The analysis to determine a drawing is out-of-date is based on the following criteria: **162** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Select List Changes**

- Data Dictionary Select List GUID on the drawing item is not equivalent to select list GUID in Data Dictionary.
- PID Select List GUID on the drawing item is not equivalent to the select list GUID in PID schema.

**Format Changes**

- Formats GUID on the drawing item is not equivalent to Formats GUID from the Database.
- Default Formats GUID on the drawing item is not equivalent to Default Formats GUID in SmartPlant® P&ID Options Manager setting.

**Out-of-Date Symbols**

- File Last Modified Time Stamp on at least one representation in the drawing is not equivalent to the File Last Modified Time Stamp on the corresponding symbol definition file.

**Missing Symbols**

- Filename specified for at least one representation in the drawing does not have the corresponding symbol definition file available in the current catalog.

**Rules Changes**

- Rules GUID on the drawing item is not equivalent to the GUID from the Rules file.

**Heat Trace Changes**

- Heat Trace GUID on the drawing is not equivalent to the Heat Trace GUID in SmartPlant® P&ID Options Manager setting.

**Gapping Changes**

- Gapping GUID on the drawing item is not equivalent to the Gapping GUID in SmartPlant® P&ID Options Manager setting.

**Symbology Changes**

- Symbology GUID on the drawing item is not equivalent to the Symbology GUID in SmartPlant® P&ID Options Manager setting.

**Out-of-Date Model Items**

- SP_ModelItemTimeStamp for at least one representation in the drawing is not equivalent to the TimeStamp on the History Item of its Model Item. These criteria cover model items updated via Llama (Outside the drawing).

SmartPlant P&ID Setup and Customization Course Guide163 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Moved OPCs**

- MatingOPCPath (will have Drawing ID of its mate) on the OPC is not equivalent to the SP_DrawingId of its mate OPC. The OPC label is in a to-be-updated state as its mate has been moved.

**Recreate State**

- The drawing is in a Recreate state.

**Drawing Property Changes**

- Property Changes GUID on the drawing item is not equivalent to Drawing Property Changes GUID on the drawing item. Drawing Property Changes

GUID is set when drawing properties are modified from Drawing Manager.

**Update Command**

The **Drawing Manager >**  **File** > **Out-of-Date Drawings** > **Update** command displays the **Update** **Drawings** dialog box. When you select drawings and then select this command, those drawings are analyzed based on the *Out-of-Date Drawing* *Criteria*  and the results display on the **Update Drawings** dialog box.

**Total drawings selected** - Displays the number of drawings selected.

**Report** - Generates a Microsoft Excel report describing the details of out-of-date drawing(s).

**Out-of-date drawings:** - Displays the number of drawings that are out-of-date based on the criteria selected using the **Out-of-Date Drawing Criteria** dialog box.

**Resolve** - Displays the **Resolve Missing Symbols** dialog box. Use this button to resolve any missing symbols.

**Drawings with missing symbols:** - Displays the number of out-of-date drawings containing symbols that do not exist in the catalog.

**164** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- Intergraph recommends to backup your work or create a version of your work prior to using this command.
- **Update** does not update any symbol whose definition has been changed into a break component. This situation occurs when you have a catalog item that has been placed in a drawing and then you change its definition to be a break component. The SmartPlant P&ID **Replace** command does not allow a non-breaking component to be replaced with a break component. The **Update** command relies on the SmartPlant P&ID **Replace** command to replace symbols that are out-of-date.
- If an item type property has **Write P&ID** or **Write Both** permissions in Data Dictionary Manager and a symbol belonging to the item type is changed in Catalog Manager, running the **Update** command on a drawing in Drawing Manager will NOT overwrite values assigned to this property with any

defaults that may have been pre-defined in Catalog Manager. If the property permissions are **Write Catalog** in Data Dictionary Manager, **Update** will restore any default property values defined in Catalog Manager.

- If the path to your Rules file is set incorrectly in SmartPlant P&ID Options Manager, then the **Update Drawings** command will not work. For example, if the path is invalid, then all drawings in the project are in an out-of-date state but the software cannot update them. This error also occurs if the **Catalog** **Explorer Root Path** specified in SmartPlant P&ID Options Manager is invalid. An error message displays and the report displays **Drawings with a ?**

**in the criteria column have missing or incorrect reference data**.

**Report Command**

The **Drawing Manager >**  **File** > **Out-of-Date Drawings** > **Report** command displays detailed information about out-of-date drawings. Criteria that can be checked includes select list values, formats, out-of-date symbols, missing symbols, rules, heat tracing, gapping, symbology, OPCs, and so forth.

You must select one or more drawings prior to selecting this command. The information displays in Microsoft Excel and is based on options selected using the **Out-of-Date Drawing Criteria** command. If all drawings are up-to-date, a message box displays stating that all selected drawings are up-to-date.

**Schedule Update Command**

The **Drawing Manager >**  **File** > **Out-of-Date Drawings** > **Schedule Update** command displays the **Schedule Task Wizard**. Use this wizard to schedule the update operations for any out-of-date drawings. For information about using this wizard, refer to Schedule Task Wizard.

SmartPlant P&ID Setup and Customization Course Guide165 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **Using SmartPlant® P&ID Rule Manager**

SmartPlant® P&ID Rule Manager is used to create, manipulate and manage sets of rules, or rule bases. These rules define how items within the model act and interact.

Rules are used in SmartPlant P&ID for the following reasons:

- Placement rules ensure that the correct relationships are created when you place a new item or move an item in a drawing.
- Rules govern how properties are copied from one item to another in a relationship, how properties are designated at placement, or when the **Reapply** **Rules** command is used.
- Rules check consistency.
- Implied items are defined in rules.

Rules provide the capability to customize how model items behave during placement and manipulation within a drawing. A rule can identify two items and define the placement behavior and the relationship between these items. The items can be catalog items or specified using a filter. When you place or modify an item within the model, the software evaluates that placement using the rules in SmartPlant P&ID

Rule Manager.

The software tests applicable rules for the new or modified item against items located within the model. When a rule matches both items, the rule is carried out, and the software performs the associated actions. These actions can include the following:

- Geometric changes to the two items, such as moving a source item into place with respect to a target item.
- Graphical connections between items, such as ownership, fitting, or gluepoint.
- Creation of relationships between two items for drawing consistency.

When an inconsistency is detected in the model, the software marks the location of the problem with an error or warning symbol. These inconsistencies are based on criteria defined in SmartPlant P&ID Rule Manager, which must be considered when correcting the inconsistencies. It is possible to override some rules while you are in the drawing software by approving inconsistencies.

By setting up typical or standard design rules that define the placement characteristics of items and how items interact with each other, you can quickly and easily place the required equipment, interconnecting piping, instrumentation, and other accessories and confirm that you are satisfying proper design criteria. All rules are applied while you create your drawing, not at some arbitrary later time.

You can generate a **Rules Summary Report** that displays a detailed list of your current rules. You can view the report in you default Web browser.

**166** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Navigating in SmartPlant P&ID Rule Manager**

To open Rule Manager, select **Start > All Programs > Intergraph SmartPlant** **P&ID > Rule Manager**. When you open the SmartPlant P&ID Rule Manager software, the **Rule List** window displays all rule folders stored in your rule base. You can create folders in this window to help organize rules. Organizing rules into folders does not affect rule performance. The rules appear alphabetically in each folder and can be moved between folders using the **Cut**, **Copy**, and **Paste** commands.

**Generate Report Command**

The **File** > **Generate** **Report** command compiles a **Rules Summary Report** of all rules. The report displays in your web browser. If you need a printed copy, select Print in your web browser.

**Creating and Modifying Rules**

During your design work, you can create new rules to add to an existing rule base, or you can modify the rules delivered with SmartPlant P&ID Rule Manager. Use the **Edit >**  **Add Rule**

command to create an entirely new rule, or select a rule and use

the **Edit >**  **Properties**

command to modify an existing rule. These commands

open the **Rule Properties** dialog box.

SmartPlant P&ID Setup and Customization Course Guide167 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Rule Properties Dialog Box**

The **Rule Properties Dialog Box** displays information about the active rule, and allows you to define all the properties for the selected rule. The components or properties that make up a rule are listed in the **General**, **Items**, **Consistency** and **Implied** **Items** Tabs.

- **General** Tab
- **Items** Tab
- **Consistency** Tab
- **Implied Items** Tab

**General Tab**

The **General** tab on the **Rule Properties** dialog box contains general information that controls the way you perform rule checking.

**Name** - Defines the name of the rule. If the name is blank, the software creates a new rule named **New Rule n**, where **n** is the next available number since the last new rule that you created. If you change the name of a rule, select **OK** and the new name appears in the **Rule** list.

**Description** - Identifies the purpose or function of your rule. Rule names must be unique. In addition, you can create an Internet link by entering a URL address, which provides another way to include detailed information about a rule.

**Priority** - Determines which rule applies when rules conflict with each other. You can define a value from 1 to 100: 1 is the lowest priority. When you place items in a drawing, if several rules apply to the source and target items, the software selects the **168** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

rule with the highest priority to control placement. When you create a relationship, if several rules apply to the source and target items, the highest priority rule copies property values first, and then each of the other applicable rules copies unpopulated property values in order. Assigning a priority is required.

**Prohibit** - Specifies whether to prohibit the relationship between the two items defined on the **Items** tab. When you check the **Prohibit** box, the relationship this rule describes cannot be created. If you need to, you can create an exception to a broad rule by specifying more specific filters or by using catalog items for **Item 1** and **Item** **2** and checking **Prohibit**. This option works for freestanding placement as well as placement on a target.

**Items Tab**

The **Items** tab on the **Rule Properties** dialog box defines items to which a rule applies, including connect point and placement information.

**Item 1** - Displays the following options for the first item involved in this rule.

- **Name (Item 1)** - Displays either a filter or catalog item. For a new rule, the field initially appears as  ****. To choose an item name, select **Browse** and display the **Select Item** dialog box. **Name** is a required field.
- **Connect point type (Item 1)** - Displays valid connect point types. This property defines the type of connect point to use when you connect one item with another. If the placement method is inline, only the connect point type for the item you are placing is valid. The **Label** and **Geometric** placement methods do not use connect point information.
- **Placement method (Item 1)** - Defines the placement method to apply when placing an item to a target object.

SmartPlant P&ID Setup and Customization Course Guide169 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Browse (Item 1)** - Opens the **Select Item** dialog box. You can select a new item that is either defined by a filter or catalog item. You must specify this property for **Item 1**.
- **Properties (Item 1)** - Displays the appropriate properties for your selected placement method. If a placement method does not have properties to specify, the **Properties** button is not available.

**Item 2** - Displays the following options for the second item involved in this rule.

There can be no second item, in other words, this item can be defined as freestanding.

- **Name (Item 2)** - Appears either as a filter, catalog item, or freestanding. To select an item name, select **Browse** to display the **Select Item** dialog box.
- **Connect point type (Item 2)** - Displays valid connect point types. This property defines the type of connect point to use when you connect one item with another. If the placement method is inline, only the connect point type for the item you are placing is valid. The **Label** and **Geometric** placement methods do not use connect point information, and this option is not available if you have not defined a second item.
- **Placement method (Item 2)** - Defines the placement method to apply when placing an item to target object.

**Note:**

- Rules can be bi-directional. If a placement method exists for both **Item** **1** and **Item 2**, then both rules are invoked when establishing such a relationship in the drawing.
- **Browse (Item 2)** - Opens the **Select Item** dialog box, allowing you to select a new item that is either a filter, catalog item, or freestanding. Item selection is not required for **Item 2**.
- **Properties (Item 2)** - Displays the appropriate properties for your selected placement method. If a placement method does not have properties to specify or you did not define a second item, the **Properties** button is not available.

**Placement Methods**

On the **Items** tab of the **Rule Properties** dialog box, you can specify the placement method and options for the placement method that you choose. Placement methods and their properties allow you to specify how items appear in the drawing and how they are related to other items. There are six placement methods available: **None**, **Geometric**, **In-Line**, **Label**, **Snap-On**, and **Line Run**.

***None***

Use the **None** option for freestanding or non-existent items or for rules that do not pertain to the placement of an item. For example, a rule that prohibits the placement of an item can naturally use None for the placement method.

**170** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

***Geometric***

**Geometric** placement type is frequently used for equipment and equipment components. You can select Properties to define the options for this placement method on the **Geometric Placement Properties** dialog box.

The Geometric placement method is designed to support placement of one item, the source, as a freestanding item or relative to an existing item, the target. The method assumes that the source item is a symbol and does not use connect points.

This placement method allows you to snap to the target, rotate perpendicular to the target, and mirror to the inside or the outside of the target. You can specify rotation and mirroring with this placement type, making it the appropriate way to control how, for example, a nozzle behaves when you place it inside or outside of a piece of equipment.

**Geometric Placement Properties Dialog Box**

When you select the placement method of **Geometric** on the **Items** tab of the **Rule** **Properties** dialog box and then select the **Properties** button, the **Geometric** **Placement Properties** dialog box opens. This dialog defines placement methods per the geometry of the items that you are placing. You can select options that allow you to define snap placement (using connect points), orthogonal placement, mirroring, assign ownership of items, and so forth. Distances can be defined for items you are placing inside other items.

**Position** - Defines the action to take when positioning the target item. Choose from the following options:

- **None** - Allows you to place an item without it touching the item on which it is being placed.
- **Snap** - Allows you to place an item that automatically attaches to the geometry of the item on which you are placing it.

**Rotation** - Defines the action to take when rotating an item that you are placing.

Choose from the following options:

SmartPlant P&ID Setup and Customization Course Guide171 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **None** - Indicates that no rotation applies.
- **Align** - Rotates the item that you are placing perpendicular to the geometry of the item on which you are placing it. You can place the item at any angle.
- **Orthogonal** - Sets the rotation to 90 degrees using the north, south, east, and west positions.

**Mirror** - Defines an action to take when mirroring an item. Choose from the following options:

- **None** - Does not allow mirroring of the item you are placing.
- **Mirror to Cursor** - Mirrors the item per location of the pointer. If the pointer is outside the item, then you can mirror and place your item there. If the pointer is inside the item, then you can mirror the item and place it.
- **Mirror to Outside** - Mirrors the item that you are placing outside of the geometry of the item already placed.
- **Mirror to Inside** - Mirrors the item that you are placing inside of the geometry of the item that you already placed.

**Owner** - Defines the item that owns the item that you are placing. For example, if you are placing a nozzle on a pump, then the pump is defined as the owner of the nozzle. If the pump is moved later, then the nozzle moves with the pump. Choose from the following options:

- **None** - Implies items that you are placing are not associated and do not move with the item already placed.
- **Glue to Target** - Establishes an association with the item you are placing and the item already placed. If one of these items is moved, all associated items move also.

**Reach** - Allows you to place an item inside another item without touching the geometry of the item already placed.

**Reach distance** - Defines the effective distance between the source and target items for associated actions to exhibit their behavior. This distance is measured in meters.

***In-Line***

When you select the placement method of **In-Line** on the **Items** tab of the **Rule** **Properties** dialog box and then select the **Properties** button, the **In-Line Placement** **Properties** dialog box opens. Use the **In-Line** option to control how an item is placed in relationship to a signal or pipe run. This placement method is used for inline piping and instrument components.

Inline placement is designed to support placement of one item, the source, relative to an existing item, the target. The method assumes that the source item is a symbol and the target item is a line run. Inline placement uses connect point information in the source item and calculates placement configurations with the geometry of the target line run. When you use this placement method, you specify the connect point type for the source item, but you do not specify connect point type for the target item.

**172** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

This placement method works in two ways:

- If the **Rotate and mirror to fit** option is **True**, the software explores all possible combinations of rotation and mirroring to find the ways that the source can fit on the target geometry. The software can generate multiple configurations and display them by using the configuration tool in the design software.
- If the **Rotate and mirror to fit** option is **False**, the software finds the connect points on the source that match the target geometry. If a match is found, the software generates a single configuration with zero rotation.

Placement is available for both the endpoints and at any internal points within a line.

If you place an item at an internal point, the line is broken into two runs, and the new item is inserted. Use this placement method primarily to place instruments and piping components into pipes and signal lines. You can place off-page and utility connectors on end-points by using this method, too.

**In-Line Placement Properties Dialog Box**

This dialog defines inline component placement methods. This dialog box opens when you select the **Properties** button next to the **Placement type** list when you select **InLine** on the **Items** tab of the **Rule Properties** dialog box.

- **Rotate and mirror to fit** - Enables mirroring and rotating to fit options.
- **Place only at end point** - Allows for inline placement only at an endpoint.
- **Add to line run** - Allows you to add items to a run. This option is ONLY

available if you select the **Place only at end point** option.

***Label***

Specify **Label** placement type for rules governing the placement of a label on its target.

***Snap-On***

When you select the placement method of **Snap-On** on the **Items** tab of the **Rule** **Properties** dialog box and then select the **Properties** button, the **Snap-On** **Placement Properties** dialog box opens. Use the **Snap-On** option to connect items without the geometric implications of the geometric placement type. It is used, for example, to connect an instrument to an instrument.

Snap-On placement supports placement of one item, the source, relative to an existing item, the target. The method assumes that symbols represent both the source and target items. Snap-on placement relies on connect points in both the source and target SmartPlant P&ID Setup and Customization Course Guide173 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

to define the placement configurations. When you use this placement method for an item, you specify the connect point types for both items.

You can use this placement method to place actuators on valves, TEMA ends on TEMA shells, and instrument functions on instruments. You can also use this method to place inline components, such as valves, directly on nozzles and other inline components.

This placement method works in two ways:

- If the **Rotate To Fit** option is **True**, the software generates a configuration for each connect point in the source. Each configuration rotates the source by an angle to allow the source and target connect points to match.
- If the **Rotate To Fit** option is **False**, the software finds the one connect point on the source that matches with the target connect point. The software generates a single configuration with zero rotation.

**Snap-On Placement Properties Dialog Box**

This dialog specifies placement options for the Snap-On placement method. You can define the mirroring options, an owner for the item being placed, and a gap distance that defines the placement distance between items. This dialog box opens when you select the **Properties** button next to the **Placement type** list when you select **Snap-On** on the **Items** tab of the **Rule Properties** dialog box.

**Rotate to fit** - Rotates the item being placed so that the connect points fit together. If not selected, the software locates the connect points and no rotation is applied.

**Mirror** - Allows you to choose to mirror, or flip, the orientation of an item. For example, set this option if you want nozzles to always point out from the geometry of equipment.

**Owner** - Defines how the item being placed is related to the target item. Choose from the following options:

- **Glue To Target** - Implies items are kept together during a move. For example, when you move equipment, all components attached to it also move.
- **Connect to Target** - Implies the item being placed is connected to the target item by means of a pipe run or a signal run.

**174** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **None** - Implies items you are placing are not associated and do not move with the item already placed.

**Gap distance** - Defines the distance between your items. This distance is in meters.

***Line Run***

Use the **Line Run** placement method to attach piping and signal lines to instruments and piping components.

Line Run placement supports placement of one item, the source, relative to an existing item, the target. The method assumes that the source item is a line run and the target item is a symbol. Line run placement uses connect point information in the target item to calculate the placement configurations. When you use this placement method, you specify the connect point type for the target item. Do not specify connect point types for the source item.

**Consistency Tab**

The **Consistency** tab on the **Rule Properties** dialog box defines consistency check criteria and specifies the copying guidelines for property values between items when you create relationships. Each row defines one pair of properties to copy and compare. You can enter as many rows as necessary.

Inconsistency indicators display the results of Consistency Checking. If the items do not satisfy one or more of the consistency criteria, the inconsistency indicator changes to either a warning or an error symbol.

The software copies property values only when you create a relationship. You create relationships when you place an item on another item or connect items in a drawing.

You can place items from **Catalog Explorer**, the **Engineering Data Editor**, or by moving a placed item into a new position. The software also compares property values whenever you change any property. This validation process can happen many times during the lifetime of an item.

SmartPlant P&ID Setup and Customization Course Guide175 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Consistency Criteria** - Lists the values for applying consistency criteria when items are placed in a drawing.

- **Property of Item 1** - Displays the name of a property from **Item 1** to be used for consistency checking and system editing.
- **Copy** - The copy action to be performed is displayed in this column. This column controls how the property value is propagated when **System Editing** is turned on.

The following table describes the possible values and their meanings.

- **Compare** - Displays how the property values from Items 1 and 2 are compared.

The comparison occurs whenever any property on either item is changed. The following table describes the possible values and their meanings.

- **Property of Item 2** - Displays the name of a property from Item 2 to be used for consistency checking and **System Editing**.
- **Status** - Defines the display status of the inconsistency marker when an inconsistency is generated. If this value is set to **Error**, the inconsistency marker **176** * SmartPlant P&ID Setup and Customization Course Guide *
- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

appears as a red **X** in your drawing. If it is set to **Warning**, the marker displays a blue exclamation point. This list appears after you select the field.

- **Severity** - Displays a list for you to specify the severity of the inconsistency. Severity displays as a number between 1 and 10.

The following columns appear when both **Item 1** and **Item 2** are used. For example, **Nominal Diameter** is frequently different in a branch as compared to the main run it connects to. Therefore, you may want to set the value for **Non-colinear** to **None** for the **Nominal Diameter** property.

- **Colinear Copy** - Defines the copy action to be used at a colinear connection. Values for this column are the same as the **Copy** column.
- **Colinear Compare** - Defines the comparison operator to be used at a colinear connection. Values for this column are the same as the **Compare** column.
- **Non-colinear Copy** - Defines the copy action to be performed at a non-colinear connection. Values for this column are the same as the **Copy** column.
- **Non-colinear Compare** - Defines the comparison operator to be used at a non-colinear connection. Values for this column are the same as the **Compare** column.

**Add** - Adds a new row to the bottom of the list of consistency criteria. You must select the name of the Item 1 property from the drop-down list in the first column. Default values for the remaining columns are automatically displayed.

**Add All** - Fills in the table with default values for all matching properties of **Item 1**

and **Item 2**. For each matching pair, the **Compare** field is set to “=” by default, and the **Copy** field is set to **None**.

**Delete** - Removes the selected rows. It is enabled when one or more rows in the consistency criteria list are selected.

**Notes:**

- When defining consistency criteria in a rule, and the property you select is a connect point (**Piping Point**, **Ducting Point** or **Signal Point**) property, you are not defining a specific connect point. The specific connect point is defined dynamically by the software when the rule is applied to a specific relationship. Although the displayed property name in the **Rule Properties** dialog box may display **End 1 Nom Diam**, it means the **Nominal Diameter** property on that connect point in this relationship.
- It is possible that no matching properties can be found for the two items. If no match is found, defining consistency criteria for the two items is not possible.
- You can highlight one or several rows by selecting the row tab at the far-left side. A row marker is shown to indicate the current row. Once a row or several rows are selected, you can delete the rows by pressing **Delete** or change the **Compare**, **Status**, **Severity**, and **Copy** values for selected rows by clicking on the appropriate heading and choosing from the list.

SmartPlant P&ID Setup and Customization Course Guide177 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Implied Items Tab**

The **Implied Items** tab on the **Rule Properties** dialog box defines implied items for a rule. An implied item is an item in the database with no graphical representation in the drawing file. You can establish implied items by the existence of a single item, or by the existence of a relationship between two items.

A common example of a symbol with implied items is a vent drain detail. In the drawing, the vent drain detail is represented graphically by only one symbol.

However, when the symbol is placed, it represents a 1-inch secondary pipe, a 3/4-inch root valve, and a plug in the database.

If you associate implied items with a single item on the **Items** tab (**Item 2** is freestanding), then the software creates implied items for each instance of that item in the design. If you associate implied items with a pair of items, then the software creates implied items for each instance of the relationship between those two items.

Because implied items are not graphical, you cannot see them in a drawing. However, you can display the items in the table view and in reports generated from the database. When you delete an item, the software deletes all the implied items that the item owns.

**Owned by** - Defines the items that own the implied items you are defining.

- **Item 1** - Defines ownership of the implied item you are identifying.
- **Item 2** - Defines ownership of the implied item you are identifying. If you have not defined a value for a second item, or defined it as freestanding, this option is not available.

**Implied items** - Displays a list of the implied items to claim. A thumbnail icon appears beside the symbol name.

**178** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Add** - Displays the **Select Implied Items** dialog box allowing you to select a catalog item, and it appears in the **Implied Items** list.

**Delete** - Removes the selected implied item from the list.

**Approve All Rules Command**

The **Edit > Approve All Rules** command automatically approves all the rules that are in a disabled state because of modifications to the filters they depend on.

**Note:**

- If you get a message stating “**One or more rules did not load correctly”**

when you open **Rule Manager**, this indicates that a filter used by a rule has been edited or deleted in **Filter Manager**. If this message box displays, select **OK** to open **Rule Manager**. Then, expand the **Tree** views. Any rules that do not load properly display the **Disabled** icon.

If you are sure all the changes to the filters are acceptable, you can use the **Approve** **All Rules.**  You can also review and approve each individual disabled rule using the **Rule Properties** dialog box.

**Rule Options Command**

The **Edit > Rule Options** command displays the **Rule Options** dialog box.

SmartPlant P&ID Setup and Customization Course Guide179 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Rule Options Dialog Box**

The **Rule Options** dialog box which shows the inconsistency error types. You can select from any one of the cells and change the value by selecting from the displayed list.

**Inconsistency Type -** There are six inconsistency error types listed on the **Rule** **Options** dialog box. ** **

- **Inconsistent property value** — When you add a new consistency criterion to a rule, the software uses the **Status** and **Severity** values you enter as defaults in the **Consistency Tab** of the **Rule Properties** dialog box. You can then modify these default values as desired.
- **Unattached connect point** — Allows you to specify the status and severity where the software finds an unconnected piping connect point on a piping component, instrument, or nozzle.
- **Inconsistent flow direction**— When you add a new consistency criterion to a rule, the software uses the **Status** and **Severity** values you enter as defaults in the **Consistency Tab** of the **Rule Properties** dialog box. You can then modify these default values as desired.
- **No applicable rule** — Allows you to specify the status and severity where the software finds two connected items for which there are no rules that allow the connection. This can happen, for example, when you work with two different plants that have two different sets of rules. When drawing data is copied from plant A to plant B, using **Assemblies** or **Import Drawings**, items that were legally connected in drawing A may not be legally connected in plant

B. Also, such an inconsistency may be generated if you edit a plant rule after drawings have been created based on that rule. If the drawings contain connected items and the rules that supported those connections are deleted, the result is connections that have no applicable rules.

- **Unattached connector** — Allows you to specify the status and severity where the software finds an unconnected end of a PipeRun or SignalRun.

**180** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **Cannot evaluate consistency** — When a PipeRun or SignalRun is attached to an **Off-Page Connector** (**OPC**) but there is no run attached to the mate **OPC**

the consistency cannot be evaluated. This can happen when working in a project environment. Two drawings that contain an **OPC** and its mate may be complete in the AsBuilt plant. If only one of the drawings is fetched into the project, the consistency of the **OPC** connection cannot be evaluated because the other drawing does not exist in the project.

**Status -** This column has two possible values:** **

- **Warning** - The status is used to alert you of possible inconsistencies in your drawing. These inconsistencies are of a non-critical nature. When you select this option, a **Warning** symbol

appears on the appropriate drawing object

indicated with a blue forward slash. You can double-click the symbol to open the Consistency Check dialog box. In the **Consistency Check** dialog box, you have the option to approve the inconsistency, and therefore leave it in your drawing, or you can correct the drawing and remove the inconsistency.

- **Error** - This status is used to alert you of critical inconsistencies within your drawing. These errors must be fixed within the drawing for the inconsistency to be removed. When you select this option, an **Error** symbol

appears on the

appropriate drawing object. You can double-click the symbol to open the Consistency Check dialog box for a more detailed view of the inconsistency.

**Severity** - This column can have numeric values from 1 to 10, with 10 being the highest severity. The software can be configured to show only those inconsistencies above a specific value. For more details, see *View Properties Dialog Box* within SmartPlant P&ID Help.

SmartPlant P&ID Setup and Customization Course Guide181 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **Using the Line Style Editor**

All the styles used by drawings in a P&ID plant are stored in the **ProjectStyles.spp** file. The **SmartPlant® P&ID Options Manager > Symbology** page is the primary user interface for working with those styles. In many cases, the user can obtain the desired graphic results by making changes directly in the Symbology page. However, if the user needs a new linear pattern or certain other advanced features that are not available on the Symbology page, the **Catalog Manager > Line Style Editor** can be used to get the desired results.

The **Catalog Manager >**  **Line Style Editor** allows you to create and modify point styles, linear patterns, and linear styles through a user-friendly interface. This tool can be used to extend and customize the styles that are delivered with the product.

You can create custom styles based on existing ones, modify the properties of existing styles, or delete styles that are not used or referenced by others.

Using the **Line Style Editor**, you can create the following custom tools, which are saved within the active symbol (.sym) file:

- **Point Styles** - Holds graphical images used periodically throughout a line or as a terminator at the beginning or end of a line. Examples of common point styles might include arrowheads used at one end of a line or symbols drawn over a line to indicate what the line represents. Point styles are used by linear patterns and linear styles.
- **Linear Patterns** - Adds point styles, if applicable, to a series of dashes and gaps (strokes). When defining a linear pattern, you set the order in which dashes, gaps, and point styles appear, as well as the position of the point styles relative to the stroke. Linear patterns are used by linear styles.
- **Linear Styles** - Provides point styles and linear patterns in a format that can be used in drawings. When you define a linear style, you provide width and color to linear patterns so they can be applied to linear geometry.

**Installing the Line Style Editor**

1. Open a symbol in **Catalog Manager**.
2. Select **Tools > Add-Ins…**  (the Add-in Manager dialog will appear).
3. Select the **Browse** button and browse to the ~ *Program Installation Folder** **

**\SmartPlant\Engineering Manager\bin** folder.

1. Select the **igrseaddin420.dll** file
2. The **Line Style Editor** will be added to the list of Available add-ins in the Add-in Manager dialog.
3. Select the checkbox next to Line Style Editor to place a checkmark in the box.
4. Select **OK**.

**182** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select **View > Toolbars…**
2. In the Toolbars dialog under Toolbars, scroll to the bottom of the list.
3. Select the checkbox next to Line Style Editor to place an ‘X’ in the box.
4. The **Line Style Editor** will now display in **Catalog Manager**.

**Style Resource File**

The predefined set of linear patterns is often adequate for P&ID drawing requirements. However, some customers have unique requirements for different linear patterns that are not available in the predefined set. Furthermore, some customers have a need to control less frequently used properties of linear styles that are not available on the Symbology page.

The **ProjectStyles.spp** is a style file that is opened by **Options Manager**. Changes to the Symbology page result in changes to the styles contained in this file. This file is automatically attached to every P&ID drawing as a style resource file. The linear style definitions from the file are applied to the drawing objects that are created in the drawing. When a linear style is applied to a drawing object, it is copied from the style resource file into the drawing itself. If a single linear style is applied to multiple drawing objects, only one copy of that style is created in the drawing.

To modify one of the existing P&ID styles, the plant’s **ProjectStyles.spp** file should be attached to the active .sym file as a style resource. After the resource file is attached, any of the styles from that file can be imported into the active document and edited.

**Attaching the Style Resource File**

1. Open a symbol in **Catalog Manager**.
2. Select **Format > Style…**
3. In the **Style** dialog box, select **Resources…**

SmartPlant P&ID Setup and Customization Course Guide183 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. In the **Style Resources** dialog box, select **Add**.
2. In the **Add Style Resource** dialog box, browse to the P&ID Reference Data folder for the plant.
3. In the **File name** field, key in ‘**p**’.

**184** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- The ProjectStyles.spp file is *not shown* because of the file types listed.

Files with the .spp extension are not currently displayed as selectable file types. You must key in the letter ‘p’ for it to appear in the dropdown list.

1. Select the **ProjectStyles.spp** file, and then select **Open**.
2. In the **Style Resources** dialog box, select **OK**.
3. In the **Style** dialog box, select **Apply** and then select **Close**.

**Line Style Editor Toolbar**

The following commands are available on the Line Style Editor toolbar: **Create New Style** - Creates a new point style, linear pattern, or linear style.

Depending on what you have selected in the tree window of the Line Style Editor, selecting this button will open either the **Create New Linear Style**, **Create New** **Point Style**, or **Create New Linear Pattern** dialog box, from which you can define a new style.

**Copy Style** - Creates a copy of the style selected in the tree window of the Line Style Editor.

**Import Style** - Imports a selected style into the active document. This command is available only when you have selected a style object in a resource file.

**Delete Style** - Removes the selected style from the active document only if the style is not in use or referenced by another style as a base style or as a component of another style.

**Properties** - Opens the **Properties** dialog box for the selected style.

**Place Point Style Graphics** - Places the selected point style graphic into the active drawing so that it can be modified using the standard drawing tools. This command is available only if you have selected a point style in the tree.

**Define Point Style Graphics** - Defines the graphic for a point style from ordinary graphics in the active drawing. This command is available only when you have selected a point style in the tree and one or more objects are selected in the drawing.

**Show Styles in Resource Files** - Displays or hides styles from attached styles resource files in the tree window.

**Importing Styles and Patterns**

1. In the **Line Style Editor** Tree view, find the style or pattern in the resource file that you want to import, and select it.

SmartPlant P&ID Setup and Customization Course Guide185 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- The styles in the active document are displayed in **bold** text within the Line Style Editor window. The styles in the resource files are displayed in normal text.
- Only the styles in the active document can be edited. All the styles in the resource files are read-only. The Import command allows you to copy a style from a resource file into the active document. After a style has been imported into the active document, it is available for modification.
- If styles in resource file are not displayed in the tree, select **Show Styles in** **Resource Files** on the Line Style Editor Toolbar.
1. Select **Import Style** on the Line Style Editor Toolbar. The software copies the style from the resource file into the active document.

**Creating Custom Point Styles**

1. On the tree in the **Line Style Editor**, select **Point Styles**.
2. On the **Line Style Editor** toolbar, select **Create New Style**

.

1. Name the new point style and add any applicable notes on the **Point Style** **Properties** dialog box.
2. Draw the image for the new point style in the drawing sheet.
3. Select the image using the **Select** **Tool** on the **Draw** menu.
4. On the **Line Style Editor** toolbar, select **Define Point Style Graphics**.
5. Click on the image to place the origin of the point style.

**186** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Point Style Properties Dialog Box**

The **Point Style Properties** Dialog Box** **displays specific descriptive information and an image of the selected point style.

**Notes** - Enter a brief description or other useful information about the point style.

**Units** - Specifies the geometric definition for the point style. **World** units define the width of the point style in geometric space. **Paper** units define the width of the point style on paper. Changing the drawing scale has no effect on styles defined in **Paper** units; however, it does change styles defined in **World** units.

**Note:**

- When using the Line Style Editor to create new styles, if a linear style uses a linear pattern and/point style it is recommended that they all have the same units.

**Preview** - Displays the point style image.

**Creating Custom Linear Patterns**

1. In the tree in the Line Style Editor, select **Linear Patterns**.
2. Select **Create New Style**

on the **Line Style Editor** toolbar.

1. On the **Create New Linear Pattern** dialog box, name the new linear pattern.
2. If applicable, select the existing linear pattern on which the new one should be based, and select **OK**.
3. Configure the settings on the **Linear Pattern Properties** dialog box as necessary.

SmartPlant P&ID Setup and Customization Course Guide187 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Linear Pattern Properties Dialog Box**

Displays specific descriptive information and attributes of the selected linear pattern.

**Notes** - Enter a brief description or other useful information about the linear pattern.

**Based** **on** - Displays the name of the pattern on which this linear pattern was based.

**Units** - Specifies the geometric definition for the linear pattern. World units define the width of the line in geometric space; Paper units define the width of the line on paper. Changing the drawing scale has no effect on styles defined in Paper units; however, it does change styles defined in World units.

**Note:**

- When using the Line Style Editor to create new styles, if a linear style uses a linear pattern and/point style it is recommended that they all have the same units.

**Phasing** - Select how dashes will be displayed.

**188** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **Normal** - Repeats the stroke sequence without altering the strokes between repetitions.
- **Single** **Stroke** **Sequence** - Scales the stroke sequence uniformly so that the first stroke sequence begins the line and the last stroke sequence appear at the end of the line.
- **Autophasing** - Adjusts the length of stretchable strokes so that the line always starts and ends with a dash.

**Fraction of first dash(%)** - Set the value, a numeric between 0 and 100, that represents the fraction of the first dash to be used as the last dash of a line when the phasing is set to Autophasing or Single Stroke sequence.

**Display dashes** - Indicates whether dashes in this pattern are visible.

**Break on change in direction** - Indicates that a break in the linear pattern occurs whenever the line changes direction.

**Stroke index** - Indicates the location within a stroke sequence where each stroke is displayed. Each stroke within a sequence appears as a gap or a dash. Information about the stroke located in a selected index location appears in the remaining fields in this section of the dialog box.

**Dash length** - Set the length of the current stroke.

**Fixed length** - Indicates that the length of the stroke is definite and cannot be lengthened or shortened for phasing.

**Stretchable** - Indicates that the active stroke may be altered for phasing.

**Dot** - Indicates that the stroke should be displayed as a dot.

**Note:**

- Selecting the **Dot** option disables the **Dash length** field, as the length is set by the selection.

**Zero length** - Indicates that the active stroke has no length. A stoke with no length is often used as a placeholder for a point style or as the last stroke if no gap is wanted between cycles.

**Note:**

- Selecting the **Zero Length** option disables the **Dash length** field, as the length is set by the selection.

**Name** - Select a point style from this list box to apply to the active stroke.

**Angle** - Set the angle by which the point style should be rotated when it is displayed.

This value is measured from the selected **Orientation**. This field is available only when you have selected an option from the **Name** list box.

**Orientation** - Specifies the reference from which rotation is measured, as specified in the **Angle** field. This reference may be the sheet or the line to which the point style is SmartPlant P&ID Setup and Customization Course Guide189 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

applied. This field is available only when you have selected an option from the **Name** list box.

- **Relative** - Indicates rotation should be calculated from the slope of the line.
- **Absolute** - Indicates rotation should be calculated relative to the sheet.
- **Always Up** - Indicates rotation should be calculated relative to the slope of the line, but that the x-axis of the point style is aligned with the line before the specified rotation is applied. In other words, if a line is horizontal, the top of the point style is aligned toward the top of the page, or if the line is vertical, the point style is aligned toward the left side of the page before the rotation is applied.

**Note:**

- This setting allows you to ensure that text within a pattern is displayed so that it is readable from left to right or from bottom to top. Even if a line is drawn from right to left the images within the pattern are

displayed as if the line was drawn from left to right.

**Position along stroke(%)** - Using a numeric value between 0 and 100, set the fraction into the stroke from which the X and Y offsets are measured. For example, if you set this value to 50, the offsets will be measured from the middle of the selected stroke. This field is available only when you have selected an option from the **Name** list box.

**X offset** - Distance along the stroke, at which the point style’s origin is located. This distance is measured from the point specified in the **Position along stroke** field. This field is available only when you have selected an option from the **Name** list box.

**Y offset** - Distance perpendicular to the stroke at which the point style’s origin is located. This distance is measured from the point specified in the **Position along** **stroke** field. This field is available only when you have selected an option from the **Name** list box.

**Add stroke** - Creates a new stroke. A new number will be added to the **Stroke index** list box, and the new stroke is made active in the dialog box.

**Remove stroke** - Removes the active stroke from the linear pattern. This button is available only when more than two strokes exist.

**Creating Custom Linear Styles**

1. In the tree in the Line Style Editor, select **Linear Styles**.
2. Select **Create New Style**

on the **Line Style Editor** toolbar.

1. On the **Create New Linear Style** dialog box, name the new linear style.
2. If applicable, select the existing linear style on which the new one should be based, and select **OK**.

**190** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. Configure the settings on the **Linear Style Properties** dialog box as necessary.

**Linear Style Properties Dialog Box**

Displays specific descriptive information, attributes, and an image of the selected linear style.

**Notes** - Enter a brief description or other useful information about the linear style.

**Based on** - Displays the style on which this linear style was based.

**Units** - Specifies the geometric definition for the linear pattern. **World** units define the width of the line in geometric space. **Paper** units define the width of the line on paper. Changing the drawing scale has no effect on styles defined in **Paper** units; however, it does change styles defined in **World** units.

**Note:**

- When using the Line Style Editor to create new styles, if a linear style uses a linear pattern and/point style it is recommended that they all have the same units.

SmartPlant P&ID Setup and Customization Course Guide191 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Component index** - This list contains a number for each of the components within the linear style. Information about the component selected in this field is displayed in the remaining fields in this section of the dialog box.

**Override point style color** - Indicates that the color specified for this component will override the color defined for any point style used as the component.

**Override point style width** - Indicates that the width specified for this component will override the width defined for any point style used as the component.

**Do not print** - Displays objects using this linear style on screen but does print them.

The option is applied per component. For example, a style can have two components, both of which will display but only one of which will print.

**Color** - Select the color to be used for the active component.

**Note:**

- If the component you are defining is a point style, and the color you select is not the color with which the point style was defined, you should select the **Override point style color** check box.

**Transparency (%)** - Indicate how transparent the drawn line will be. Zero (percent) indicates that you will not be able to see through the line at all, while 100 (percent) indicates the line will not be visible, as it will be completely transparent.

**Linear pattern** - Select a defined linear pattern to use as the active component in the linear style.

**Width** - Select the width to be used for the active component.

**Note:**

- If the component you are defining is a point style, and the width you select is not the width with which the point style was defined, you should select the **Override point style width** check box.

**Offset** - Specify the distance the active component should be placed from the centerline of the linear style. The offset distance appears in the default length units set in the host application; however, the field accepts any distances in any unit of measure applicable to a distance.

**Crossover orientation** - Controls how the component with offset crosses over the component without an offset. As such, this option is typically used on a style with two components, one of which has an offset and one which does not. In the following illustration, the darker line is the component without the offset, while the lighter line is the component with the offset and the Crossover orientation.

**192** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Start terminator** - Select the point style with which you would like to start the line.

**End** **terminator** - Select the point style with which you would like to end the line.

**End cap type** - Indicate the type of cap you want to place at the end of the line. You can choose from a flat, square, triangle or round end.

**Join type** - Select the kind of join you want to use for line strings and complex strings created through automation. You can choose from round, bevel, and miter joints.

**Note:**

- The selected type of joint is not applied to regular lines joined at the end point.

**Add component** - Creates a new component. A new number will be added to the **Component index** list box, and the new component is made active in the dialog box.

**Remove component** - Removes the active component from the linear style. This button is available only when more than one component exists.

**Preview** - Displays the linear style.

SmartPlant P&ID Setup and Customization Course Guide193 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Linear Patterns Command (Options Manager)**

The **SmartPlant® P&ID Options Manager** **>**  **Tools > Linear Patterns** command opens the **Linear Patterns** dialog box, which allows you to import or delete linear patterns.

**Linear Patterns Dialog Box**

The **Linear Patterns Dialog Box** allows you to import or delete linear patterns.

**Patterns** - Lists all the available linear patterns. This list supports single entry selection only.

**Import** - Opens the **Import Linear Patterns From** dialog box, where you can browse to the file that is your linear style and import it. Linear patterns and styles are stored in symbol (.sym) files. When you import a linear pattern or heat tracing style, you must close the **Linear Patterns** dialog box and re-open it to see the newly imported information.

**Delete** - Deletes the pattern you have selected in the **Patterns** list. If a style is in use, it cannot be deleted.

**Importing a Linear Pattern**

1. Open **SmartPlant P&ID Options Manager**, and select **Tools** > **Linear** **Patterns**.
2. On the **Linear Patterns** dialog box, select **Import**.

**194** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. On the **Import** **Linear** **Patterns** **From** dialog box, browse to the **.sym** file that contains your linear pattern.
2. Select **Open**.
3. Select **Close** on the **Linear** **Patterns** dialog box.

**Notes:**

- If you import a new pattern or style that has the same name as a pattern or style that is already listed on the **Linear Patterns** dialog box, the latest information immediately overwrites the older pattern or style.
- As soon as you import linear patterns or styles, the latest information is immediately written into the project styles file. There is no option to save the changes later.
- Any supporting styles referenced by the pattern that you choose to import are also imported.
- You can also import linear styles, which incorporate linear patterns, for heat tracing symbology. The words *heat trace* must appear in the name of the style for SmartPlant P&ID Options Manager to import the style.

SmartPlant P&ID Setup and Customization Course Guide195 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Using Format Manager**

To open Format Manager, select **Start > All Programs > Intergraph SmartPlant** **Engineering Manager > Format Manager**. SmartPlant® Format Manager defines the characteristics and format for labels, report data, and formatted properties. Format Manager is a stand-alone manager for the plant administrator to create and edit formats.

**Notes:**

- Formats may include alphabetic and numeric characters as well as special characters such as !, @, #, %.
- The double-quote, “, is a special character and should not be used in format names.

**Navigating in Format Manager**

In Format Manager, the data types are displayed at the base level on the **Tree** view as folders. The **Tree** view displays all the available data types and formats. Formats are displayed subordinate to the related data type.

You can rename, edit or add a format, but you cannot add or remove a data type. Data types are pre-defined in the software. A data type is formatted data that represents text with strings; numbers with integers, fractions, decimals, and so forth; and measurements with inches, BTUs, ergs, ohms, and so forth. All data types contain formats that the design software can use.

**Note:**

- Right-clicking in the main window opens a shortcut menu where you can quickly access common commands.

**196** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Add Format Command**

The **Edit > Add Format** command opens the **Add Format** dialog box which allows the user to add a new format.

**Add Format Dialog Box**

The **Add Format** dialog box allows the plant administrator to create a format for the entire plant. After the plant administrator creates the format, the Format Manager display is updated. The new format appears subordinate to the selected data type, or format folder, in the **Tree** view.

**Name** - Specifies the name of the format as it appears in the **Tree** view in the main window. This name must be unique and can be any combination of characters.

**Format category** - Specifies the category of the format and determines where the format appears in the **Tree** view in the main window. The format category is specified by the folder you select in the main window.

**Format -** Displays the format item that is currently active, lists all the format fields included for the selected text format, and contains the command buttons needed to change format properties. ** **

- **Item** - Displays the numeric value that indicates the text or format item that is currently selected in the **Format mask** field and the total number of items that comprise the format. You can use this list to select the portion of the format you want to edit. The scroll-up button increases the number in the Item list.

The scroll-down button decreases the number in the Item list. The numbers in the **Item** list update automatically when you add or delete text or fields.

SmartPlant P&ID Setup and Customization Course Guide197 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Format mask** — Displays the text and field items that comprise the format.
- **Edit** - Per the type of item selected in the **Format mask** field, displays the **Field Properties** dialog box or **Text Properties** dialog box. You can use these dialog boxes to specify the properties for the selected item.
- **Insert Text** - Displays the **Text Properties** dialog box to add text to a format.

This dialog box allows you to append text to the text format string that is currently selected.

**Note:**

o To ensure that unit-conversion is performed successfully, any

additional texts that are added using the **Text Properties** dialog box must be placed to the right of the units that have already been added using the **Field Properties** dialog box. When creating a new format always add the format fields before adding any text. You can also use Smart text in Catalog Manager to embed text into label

formats. Formats that have embedded text should be used only for

label formats and not for properties that appear in the **Properties** window.

- **Insert Field** - Displays the **Field Properties** dialog box to create a field. You can append a format field to the format that is currently selected.
- **Delete** - Removes the format definition. The software prompts you to confirm the deletion of a format.

**Notes:**

- You can create compound formats, which use a combination of fields to create a complete format. An example of a compound format is 10 ft. 4 in. This example includes format fields for 10 ft., which defines the measurement in feet; and 4 in., which defines the measurement in inches.
- You can also define a format using a single field that involves

secondary/tertiary units. Unlike compound formats, when converting to a format using a single field that involves secondary/tertiary units, only the last unit used will display decimal values. For example, 98 cm would display as 3

ft 2.6 in; 16.8 l would convert to 17 quart 1 pint 8.1 oz.

**Properties Command**

The **Edit > Properties** command opens the **Format Properties** dialog box which allows the user to edit an existing format.

**Note:**

- You must select a format in the **Tree** view before the **Properties** command is available.

**198** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Format Properties Dialog Box**

The **Format Properties** dialog box allows the plant administrator to change an existing format for the entire plant. After the plant administrator edits a format, the Format Manager display is updated. The updated format appears subordinate to the selected data type, or format folder, in the **Tree** view.

**Name** - Specifies the name of the format as it appears in the **Tree** view in the main window. This name must be unique and can be any combination of characters.

**Format category** - Specifies the category of the format and determines where the format appears in the **Tree** view in the main window. The format category is specified by the folder you select in the main window.

**Format -** Displays the format item that is currently active, lists all the format fields included for the selected text format, and contains the command buttons needed to change format properties. ** **

- **Item** - Displays the numeric value that indicates the text or format item that is currently selected in the **Format mask** field and the total number of items that comprise the format. You can use this list to select the portion of the format you want to edit. The scroll-up button increases the number in the Item list. The scroll-down button decreases the number in the Item list. The numbers in the **Item** list update automatically when you add or delete text or fields.
- **Format mask** — Displays the text and field items that comprise the format.

SmartPlant P&ID Setup and Customization Course Guide199 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Edit** - Per the type of item selected in the **Format mask** field, displays the **Field** **Properties** dialog box or **Text Properties** dialog box. You can use these dialog boxes to specify the properties for the selected item.
- **Insert Text** - Displays the **Text Properties** dialog box to add text to a format.

This dialog box allows you to append text to the text format string that is currently selected.

**Note:**

o To ensure that unit-conversion is performed successfully, any additional texts that are added using the **Text Properties** dialog box must be placed to the right of the units that have already been added using the **Field** **Properties** dialog box. When creating a new format always add the format fields before adding any text. You can also use Smart text in Catalog Manager to embed text into label formats. Formats that have

embedded text should be used only for label formats and not for properties that appear in the **Properties** window.

- **Insert Field** - Displays the **Field Properties** dialog box to create a field. You can append a format field to the format that is currently selected.
- **Delete** - Removes the format definition. The software prompts you to confirm the deletion of a format.

**Text Properties Dialog Box**

When you select **Insert Text** on the **Add Format** dialog box or the **Format** **Properties** dialog box, the **Text Properties** dialog box appears. If a text format is selected, this dialog box allows you to append text to the text string. If a string format is not active, the **Text Properties** dialog box allows you to append a text string. You can also use this dialog box when you are adding or editing a compound text format.

**User text** - Allows you to type the text that you want to append to the format.

**Field Properties Dialog Box**

If you have selected a field in a format, as opposed to text, when you select **Edit** on the **Add Format** dialog box or the **Format Properties** dialog box, the **Field** **Properties** dialog box appears. This dialog box also opens when you select **Insert** **Field** on either the **Add Format** dialog box or the **Format Properties** dialog box.

**200** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Format category** - Defines the overall category, such as **Energy** or **Length**, of the information associated with the format. Format categories are delivered with Format Manager and correspond to folders in the main window. You cannot add or remove a format category.

**Readout** - Lists the types of characters appropriate for the format. The format changes for integers, upper case or lower case, numeric, fraction, decimal, and so forth. Choose the appropriate readout type from the list.

**Precision** - Lists the degrees of accuracy available that the text format uses when reporting numeric values. Choose the appropriate level of accuracy.

**Alignment** - Specifies the text alignment of the field. Selections are **left**, ** right**, and** center**.

**Minimum length** - Quantifies the minimum number of characters that this field can contain. The **Padding character** options are available if you specify a minimum length.

**Fixed-length string** - Applies to the **String** format category only. Defines the field as fixed in length. The **Padding character** options are available if you specify a fixed length.

**Display units** - Indicates whether the unit of measure are displayed. Clearing this check box removes the format from the **Properties** window in the SmartPlant P&ID

modeler, necessitating the modification of all labels using this new label. For example, if you want 50.00 psi to appear as 50.00 in your label, you must create a * *

*Pressure* format to display *50.00 psi* in the **Properties** window and then create another Pressure format to display *50.00* in the label. The only difference between these two formats is that the **Display units** check box is selected for the former and cleared for the latter.

SmartPlant P&ID Setup and Customization Course Guide201 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- You cannot clear the **Display units** check box if the selected format unit of measure is the default unit.

**Units of Measure** - Displays the primary, secondary, and tertiary units that define the text properties of the format.

- **Primary** - Defines the main unit of measure that the software uses in the format.

You should always select a value for the primary unit of measure, unless the format is of format category **Number**.

- **Secondary** - You use a secondary unit of measure most commonly when a format is to show additional units that are related to the primary unit but are subsequently smaller units of measure, for example meter – centimeter; foot – inch.
- **Tertiary** - You use a tertiary unit of measure most commonly when a format is to show additional units that are related to the primary and secondary units but are subsequently smaller units of measure, for example quart – pint – oz; hr – min –

sec.

**Note:**

- Unlike compound formats, which use a combination of fields to create a complete format, when converting to a format using a single field that involves secondary/tertiary units, only the last unit used will display decimal values. For example, 98 cm would display as 3 ft. 2.6 in; 16.8 l would convert to 17 quart 1 pint 8.1 oz.

**Padding character** - Sets a filler character that constructs the remaining character in a fixed-length or minimum length string. Select the **Space**, **Zero**, or **User-defined** option to determine the padding character. This option is available only if you complete the **Minimum length** or **Fixed-length string** fields.

**202** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Using Insulation Specification Manager**

The complex process plants of today require the use of extreme temperatures, both hot and cold, to manufacture the products that you need. To make the plants energy efficient and economical and to provide safety to workers, the use of insulation is required. Over the years, company standards have been developed that dictate the type and thickness of insulation based on temperature and other operating factors.

These standards make it feasible for the design software to select the proper insulation required and automatically enter it into the database. This practice insures proper design and speeds up the design process by freeing users from the laborious and error-prone task of entering property data.

Detailed insulation thickness calculations are necessary for each pipeline and piece of equipment in a plant. However, since insulation typically comes in a standard thickness, companies commonly generate tables of data that match the thickness required versus temperature and diameter. Different tables are generated for different conditions, for example, personnel protection or energy conservation. SmartPlant®

P&ID Insulation Specification Manager provides users with a way to enter their table data such that it is electronically stored so that the software can access the data as required. In other words, the software does the table look-ups for you, so you do not spend valuable time looking through stacks of insulation tables. To open SmartPlant®

P&ID Insulation Specification Manager, select **Start > All Programs > Intergraph** **SmartPlant P&ID > Insulation Manager**.

**Navigating in SmartPlant P&ID Insulation**

**Specification Manager**

SmartPlant P&ID Insulation Specification Manager displays a plant insulation specification file in a **Tree** view. Folders organize specifications into insulation types: cork, glass wool, asbestos, and so forth. Within folders individual specifications are described. Open a folder by double-clicking it or by selecting the plus sign preceding the name. Review the properties of an individual specification by double-clicking it. The **Insulation Specification Properties** dialog box displays all the information about each specification.

SmartPlant P&ID Setup and Customization Course Guide203 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Generate Report Command**

The **File > Generate Report** command creates and open an Excel workbook. A separate page for each insulation type and insulation specification is created with all available information.

**Creating a New Plant Insulation Specification File**

Since each plant that you design can have different insulation specifications needs, you can create and edit plant insulation specification files using SmartPlant P&ID

Insulation Specification Manager. Insulation specification files end with the extension

**. *isl***. The path to the active plant insulation specification . *isl* file is defined in the reference data settings in SmartPlant P&ID Options Manager.

**New Command**

The **File > New** command creates a new insulation specification file.

**Notes:**

- If a plant insulation specification file is already open, you are prompted to save it before creating the new file. Be sure to save it in the correct reference data location for the plant to which it applies.
- You can save insulation specification files with the other reference data, or wherever you want, by using the **Save As** command.

**204** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- You can switch between plants and specifications files by using the **Open** **Database** command.
- You can also edit some of the properties that are associated with an entire specification file by using the **Options** command.

**Options Command**

When select the **Edit > Options** command or create a new plant insulation specification .isl file, the **Options** Dialog Box opens.

***Options Dialog Box***

The **Options** Dialog Box sets options for default temperature and thickness units for the current plant insulation specification file.

**Temperature units** - Allows you to choose the default temperature units, such as **Deg**-**F** for Fahrenheit.

**Thickness units** - Lists the available default thickness units, such as **Thickness-in** for inches.

**Add Specification Command**

You can create custom specifications for a wide variety of uses from any standard insulating materials, with behaviors preset for use with both piping and equipment.

Thickness options, layering, and exclusion filters let you create the necessary level of detail for your design. By setting up temperature and size ranges, you can create a specification that applies across a wide variety of piping systems and equipment. The SmartPlant P&ID Setup and Customization Course Guide205 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

temperature range refers to the operating range for the insulation specification only. It is not constrained to match any defined temperature for the item that you insulate in the design software. The **Edit > Add Specification** opens the **Insulation** **Specification Properties** dialog box so you can create a new insulation specification.

**Insulation Specification Properties Dialog Box**

The **Insulation Specification Properties** Dialog Box appears when you create a new insulation specification. You can name the specification, change temperature ranges, define equipment exclusions, and so forth. To open this dialog box without creating a new specification, select an existing specification and select **Edit > Properties**.

There are three tabs on the Insulation Specification Properties dialog box:

- **General**
- **Piping**
- **Equipment**

***General Tab***

The **General** Tab on the **Insulation Specification Properties** Dialog Box** **sets naming options for the selected insulation specification. Additionally, this dialog box informs you if you choose options that match an existing specification.

**206** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Name** - Displays the name of the selected insulation specification.

**Description** - Allows you to enter a description of any length. This description is not required.

**Insulation purpose** - Lists the available insulation specifications purposes. You can choose one; however, if the insulation type and purpose match an existing insulation specification, you receive a warning. Insulation purposes are read from the insulation purpose select list which you can modify by using Data Dictionary Manager.

**Insulation type** - Displays the insulation type of the selected insulation specification.

**Insulation density** - Displays the insulation density of the selected insulation specification.

***Piping Tab***

The **Piping Tab** on the **Insulation Specification Properties** Dialog Box allows you to specify the thickness of insulation required for a given temperature and nominal diameter range.

**Piping insulation thickness** - Displays the piping insulation thickness values based on temperature values you assign on the **Piping Range Setup** dialog box. Empty spaces are not allowed in this table.

**Heat trace medium** - Allows you to define the heat trace medium that will automatically be assigned with this insulation specification (such as FAJ, I, SN, and so forth). Only the defined heat trace medium can be used in combination with that insulation spec. You can also choose one of the following options:

- **Undefined** - No heat trace can be used if that insulation spec is assigned.
- **Ignore** - Any heat trace can be used with that specified insulation spec.

**Range Setup** - Opens the **Piping Range Setup** dialog box, allowing you to set up temperature ranges that appear in the top row of the **Piping insulation thickness** table and the diameter ranges that appear in the left-hand column.

SmartPlant P&ID Setup and Customization Course Guide207 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Exclusions** - Opens the **Insulation Specifications - Exclusions** dialog box, allowing you to apply filters to exclude the application of an insulation specification on a specific piping type.

**Piping Range Setup Dialog Box**

Selecting the **Range Setup** button on the **Piping** tab of the **Insulation Specification** **Properties** dialog box opens the **Piping Range Setup** dialog box which sets options for nominal diameter and temperature ranges for insulation when it is applied to a pipe run. This dialog box is like the **Equipment Range Setup** dialog box, but equipment does not require nominal diameter ranges.

**Nominal diameter** - Lists the available nominal diameters which are specified in Data Dictionary Manager. This dialog box also displays the ranges that result from your choices. Select values in the list, and select a value again to remove it from selection.

**Temperature** - Allows you to enter temperature values, constructs ranges from those values, and displays the **Resulting ranges**. Enter a temperature, and then enter another. Inspect the results.

**Resulting ranges** - Lists the results of your choices in diameters and temperatures.

**Insulation Specification - Exclusions Dialog Box**

Selecting the **Exclusions** button on either the **Piping** tab or the **Equipment** tab of the **Insulation Specification Properties** dialog box, opens the **Insulation Specification -**

**Exclusions** Dialog Box** **allowing you to define items that should not have insulation when this specification is used.

**208** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Filters** - Displays the filters defining the items that cannot have this insulation specification applied.

**Add Filter** - Opens the **Exclusion Filters** dialog box, which allows you to select new filters to add to the **Filters** list or to view the properties of filters.

**Remove Filter** - Removes the selected filter from the **Filters** list.

***Equipment Tab***

The **Equipment Tab** on the **Insulation Specification Properties** Dialog Box allows you to specify the thickness of insulation required for a given temperature range.

**Equipment insulation thickness** - Displays the equipment insulation thickness values based on temperature values you assign on the **Equipment Range Setup** dialog box. All equipment is assumed to be flat; therefore, this tab requires only temperature values, not diameter values. Empty spaces are not allowed in this table.

**Heat trace medium** - Allows you to define the heat trace medium that will automatically be assigned with this insulation specification (such as FAJ, I, SN, and so forth). Only the defined heat trace medium can be used in combination with that insulation spec. You can also choose one of the following options: You can also choose one of the following options:

- **Undefined** - No heat trace can be used if that insulation spec is assigned.

SmartPlant P&ID Setup and Customization Course Guide209 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Ignore** - Any heat trace can be used with that specified insulation spec.

**Range Setup** - Opens the **Equipment Range Setup** dialog box, allowing you to set up temperature ranges that appear in the top row of the **Equipment insulation** **thickness** table.

**Exclusions** - Open the **Insulation Specifications - Exclusions** dialog box allowing you to apply filters to exclude the application of an insulation specification on a specific equipment type.

**Equipment Range Setup Dialog Box**

Selecting the **Range Setup** button on the **Equipment** tab of the **Insulation** **Specification Properties** dialog box opens the **Equipment Range Setup** dialog box which sets options and temperature ranges for insulation when it is applied to equipment. This dialog box is like the **Piping Range Setup** dialog box, but equipment does not require nominal diameter ranges.

**Equipment diameter** - Not applicable to this dialog box. All equipment is assumed to be flat; therefore, this tab does not require diameter values.

**Temperature** - Allows you to define or modify the temperature range for the insulation specification.

**Resulting ranges** - Displays the results of the specifications that you enter in **Temperature**. You can delete inappropriate data from the list.

**210** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Importing Data into SmartPlant P&ID**

There are several ways you can import data into SmartPlant P&ID. You can import data and items into the database using reports and other files. Also, you can also populate or redefine pipe run properties by importing an Aspen Basic Engineering stream data file. During the import process, you can assign the stream and its associated engineering data to the pipe run.

**Data File Command**

The **File > Import > Data File** command allows you to import data and items into the database from reports and other files.

**Note:**

- Relationships between items cannot be imported, only items and their properties.

**Importing Data from a Spreadsheet**

1. Select **File** > **Import** > **Data File**.
2. Browse to the location of your spreadsheet, select it, and select **Open**.

**Note:**

- The status bar at the bottom of the SmartPlant P&ID window displays the progress of the import activity.
1. On the **Import Log** dialog box, you can select **Report** to open the log file and view notes on the import process, or you can select **Close**.

**Notes:**

- You can use the **Equipment List**, **Pipe Run List**, and **Equipment Nozzle** **List** Reports from SmartPlant P&ID to define properties of items already placed in the drawing and that already exist I the database. Items must have an assigned item tag prior to definition or modification of properties.

You must first run the report, add or edit property values for the items returned in the report, and then import the items back into the drawing. The SmartPlant P&ID Setup and Customization Course Guide211 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

property values for the items are updated**.** In addition, these reports can create occurrences of items in the stockpile.

SmartPlant P&ID looks for an item tag match in the SmartPlant P&ID

database. If a match is found, the item is removed from the **Stockpile**, the item properties are updated in the database, and the change is reflected in the **Properties** window for the item. If no match is found, the data is written to the database, and you can place the item from the **Stockpile**.

You can use the Equipment List and the Pipe Run List to import new items into the stockpile. This capability allows you to define values for an item that does not yet exist in the database. Both reports have hidden columns that store some key information that is necessary for importing this information.

The imported spreadsheet must be in a specific format. You can add other spreadsheet formats by customizing the SmartPlant P&ID Import

Implementation project included with SmartPlant P&ID.

- Aspen Basic Engineering spreadsheets in either Microsoft Excel or XML

format are supported. These spreadsheets include the **Vessel Equipment List**, **Pump Equipment List**, and **Heat Exchanger Equipment List**.

- Stockpile items that come from importing Aspen Basic Engineering data can be easily updated by re-importing a data file. Previously imported items, whether they remain in the stockpile or have already been placed in the drawing, are updated with data from the newly imported file.
- Importing Aspen Basic Engineering XML data files allows greater flexibility when importing data into the software. All three reports: Equipment, Pumps, and Exchangers, are included in a single XML report so that only one file should be imported.

**Important**

- If a format change is made to an exported Aspen Basic Engineering report, you must make modifications to the import code to accommodate the changed report layout.
- The Aspen Basic Engineering (Zyqad) spreadsheets and the SmartPlant P&ID

reports that may be imported have hidden columns containing a relative path and symbol name to be placed in the stockpile when importing. Typically, these columns are hidden in the spreadsheet. These hidden columns may be exposed in Excel by selecting the surrounding columns, right–clicking, and selecting **Unhide**.

**212** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Importing Using XML**

SmartPlant P&ID supports importing Aspen Basic Engineering (Zyqad) data using XML (Extensible Markup Language). Different item types can be imported in the same XML file, including PipeRun, Vessel, Exchanger, etc. You can specify as many attributes for those items as you wish.

To import data, select **File>Import>Data File** and select the xml file from the Windows Explorer so that it is imported into the Stockpile. The software looks at the Item Type, Symbol Path, and attributes per Item Type. Just as with import using spreadsheets, an item is either created in the stockpile or updated on a drawing.

Some beneficial characteristics of XML include that it is industry standard syntax, non-proprietary, and license free, and it is language and operating system independent. To exchange data between applications requires that those applications agree on the tags and their meanings. Aspen Basic Engineering (Zyqad) formats its XML files with tags SmartPlant understands.

**XML Format**

An XML document is composed of markup and content. Each item is enclosed in

< **Item>** tags, and within those tags there are < **ItemAttribute>**  tags that specify the different attribute values. In the < **Identification>** tag, there is a < **SymbolFile …>** and a < **Classification** …> tag that specifies the symbol file to use and the item type that is being imported.

**XML Tags and Descriptions**

SmartPlant P&ID Setup and Customization Course Guide213 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* The following is an excerpt of an XML import file that will import a vessel with an Item Tag of F-2, and define Operating Max Pressure and Liquid Level properties.

**214** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Generating Reports**

Reporting is the process of retrieving information from the database and displaying the information as formatted output. At any time during the design creation process, you can create a report. Each report consists of a Microsoft Excel workbook and a report definition, which describes the data to collect and how to organize the data in the workbook.

Each report that you create is based on an item type. This item type serves as the starting point for collecting data for your report. Examples of item types include equipment, nozzle, instrument, and pipe run. Several default report templates already exist; however, reports are fully customizable. You can create your own reports that contain the information that you want to see in a format you choose.

The relationships that exist between the various item types constitute additional available information for a report. When creating your report, only items that have a relationship with your selected item type can be used as input. To discover how items and their properties are related, and thereby how you can map the properties that you want into your report templates, see the *Properties Glossary*, which is included in the glossaries attached to online Help.

Your report definition contains one or more report items organized in a tree hierarchy.

Each report item is based on an item type. Each report contains at least one report item to define the item type of the report. For example, a report based on the equipment item type contains a report item named **Equipment**. This report item makes the properties associated with each piece of equipment available for inclusion in your report; however, you do not have to include every available property in your report if it is not appropriate. You can define additional report items to access more properties for more item types. For example, a nozzle report item can be added to access data about nozzles because nozzles and equipment are related.

The location of a report item in the tree hierarchy affects the properties that are collected for the associated item type. For example, if a nozzle is added as the top-level item in the tree, all nozzles in the database are collected for your report. If the nozzle is added as a child of **Equipment: Mechanical**, only the information about nozzles that are associated with pumps is collected.

**Notes:**

- You must have installed Microsoft Excel on your computer to display reports.
- To create a Plant wide report, use the Engineering Data Editor commands of **View** > **Plant Reports** or **My Reports**.
- The software stores the reports that you generate in your Windows folder under **~**:\**Users\ *username*\My Reports\Output** as defined in the smartplantpid.ini file.

SmartPlant P&ID Setup and Customization Course Guide215 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Creating and Editing Report Templates**

Although the software includes several default report templates, you can create your own custom report templates or modify the delivered templates to gather and display the specific information that you want. The software allows you to define report templates in several different formats and with all manner of information from the design database.

**Important**

- In previous versions of the software, when a property was mapped to a report template, the template file stored an internal identifier for that property; thus, that report template is tightly linked to the plant that creates the property. Now the property *name* is mapped into the report template; therefore, if all plants use the same property name, the same report template is valid.

**Fixed Format Report Template**

The **Fixed Format** Report Template creates one Microsoft Excel worksheet for each item. When defining the report template, you only edit the first worksheet. When you generate your report, all fixed format worksheets, one for each item of the report item type, follow the format of the first Microsoft Excel worksheet.

**Note:**

- The **Options** command on the **SmartPlant Reports** toolbar is not available for editing a fixed format report template because you are free to place headers and data anywhere you want on your worksheet.

**Tabular Format Report Template**

All the delivered report templates are **Tabular Format** Report Templates. When the report is generated, all properties populate the report by using the same format defined for the first row. In other words, tabular format reports are row-based.

**Note:**

- The **Options** command on the **SmartPlant Reports** toolbar is important for setting aside space for the header and empty rows between lines in the report because the placement of report item properties is restricted in the tabular format report template.

**216** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

For example, the report template for an Equipment List can appear like this: **Equipment Name**

**Equipment Description**

**Equipment Type**

#Equipment::Name#

#Equipment::Description#

#Equipment::Type#

When the report is generated, the output appears like this:

**Equipment Name**

**Equipment Description**

**Equipment Type**

D-100

Horizontal Drum 100

Horizontal Drum

T-100

Potable Water Tank

Vertical Tank

**Composite Format Report Template**

The **Composite Format** Report Template is a combination of fixed and tabular format reports. In your Microsoft Excel workbook, the first sheet contains the fixed format report, and the second sheet contains the tabular format report. Subsequent fixed format worksheets are created after sheet two for each item of your report item type when you generate your report.

**Note:**

- Because the delivered report templates are tabular format, choose **Blank** from the **Source template** list if you want to create a composite format template.

**New Command**

The **Reports > New** command displays the **New Report Template** dialog box. This dialog box provides options for defining plant-level and user-level templates. You can assign source templates, names, formats, and descriptions for your report template and define the item type upon which you base your report. You do not have to edit the report template when you first create it.

**New Report Template Dialog Box**

The **New Report Template** Dialog Box displays options for creating plant-level and user-level report templates.

SmartPlant P&ID Setup and Customization Course Guide217 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Source template** - Lists the names of all existing report templates (user-level or plant-level) and Blank. Templates in this list appear in alphabetical order.

**Note:**

- The *Blank* option creates a Microsoft Excel workbook with no predetermined formatting information. If you choose *Blank*, you must specify an item type; whereas, if you do not choose *Blank*, the item type automatically displays the item type that corresponds to your source template.

**Name** - Allows you to enter a meaningful name to describe the report that you are creating. This name matches your Microsoft Excel workbook. The software appends

.xls to the name when you save the Excel workbook.

**Item type** - Defines the item properties available in your report. The *Item type* option automatically displays the item type that corresponds to your source template unless you select a *Blank* source template type.

**Report Type** - Specifies your report format. Available options include **Fixed**, **Tabular**, and **Composite formats**.

**Description** - Describes the report type that this template produces.

**Add to plant reports** - Allows you to add the report to the Plant Reports.

**SmartPlant Reports Toolbar**

The **SmartPlant Reports** Toolbar** **appears when you are editing or creating a report template in Microsoft Excel.

- **Define**
- **Options**
- **Map Properties**

**218** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Define Command**

The **Microsoft Excel > SmartPlant Reports Toolbar > Define** command opens the **Define Report Contents** dialog box which allows you to define a report template specifying the layout and contents of your report. This template is a Microsoft Excel workbook that contains cells and worksheets. You map properties to the individual Microsoft Excel cells to define the content and layout of your report.

***Define Report Contents Dialog Box***

The **Define Report Contents** Dialog Box** **defines new items to include in your report and selects the cells to include for the new items.

**Report on** - Displays a tree view of item types available for inclusion in your report template. To include the properties, you must select an item from the **Report on** list and select **Define**. Then you can map the properties that you select to cells in your report template.

**New** - Displays the **New Items** dialog box. You use this dialog box to specify new item types to include in the **Report on** tree. If you add a new item type, its properties are available for inclusion in your report template.

**Define** - Displays the **Define Report Items** dialog box. For the selected item in the **Report on** tree, you define the properties that you want available for inclusion in your report template.

**Delete** - Removes an item from the tree view and from your report structure. Its properties are no longer available for your report template.

SmartPlant P&ID Setup and Customization Course Guide219 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**New Command (Define Report Contents Dialog Box)**

The **Define Report Contents Dialog Box > New** command opens the **New Items** dialog box. ** **

***New Items Dialog Box***

The **New Items** Dialog Box displays a list of items that are related to the item that you selected there. Select an item type to make its properties available to include in your report.

**Items related to** - Displays a list of item types related to the item type that you selected in the **Report on** tree on the **Define Report Contents** dialog box. Select item types from this list to include in your report template. The properties of the new item types are then available to use in your report.

**Name** - Displays the name of the selected item type. You can rename the item. If you have duplicate item type names in your report item type hierarchy, the software prompts you to rename the new item type uniquely.

**Apply** - Adds the selected item type to the **Report on** tree on the **Define Report** **Contents** dialog box. The software adds this item type as a child of the item type selected on the **Define Report Contents** dialog box.

**220** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Define Command (Define Report Contents Dialog Box)**

The **Define Report Contents Dialog Box > Define** command opens the **Define** **Report Item** dialog box. ** **

***Define Report Item Dialog Box***

The **Define Report Item** dialog box specifies the report item properties available for your report. Select the properties to include for each report item type and define sorting and filtering for those properties using the **Properties**, **Sort** and **Filter** tabs, respectively.

Properties Tab (Define Report Item Dialog Box)

The **Properties** Tab** **displays properties for a report item so you can select properties to use in your report template.

SmartPlant P&ID Setup and Customization Course Guide221 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Group by the selected property** - Automatically adds a special **Report Item Group** **Total** property to the Map Properties menu on the SmartPlant Reports toolbar. The Report Item Group Total property displays the number of items that have identical reported properties. If you want to tally similar items in this way, be sure not to map unique properties, such as item tags, onto your report. If you do, then items are never grouped together because a unique tag is a property that items never share. For example, you can use this feature to give you the total numbers of valves with 1”

nominal diameter, 1.5” nominal diameter, 2” nominal diameter, and so forth.

**Repeat parent data** - Displays the cells of parent item data in your report. For example, if your report contains Unit and then Drawing as a child of Unit, selecting this option for Drawing causes repetition of Unit cells on any line containing Drawing cells.

**Select properties to include in the report for this report item.**

- **Available properties** - Displays all properties for the report item you specified on the **Define Report Contents** dialog box.
- **Selected properties** - Lists the report item properties you have selected from the **Available properties** list that are consequently available for inclusion in your report.
- **Left Arrow** - Moves the selected item in the **Selected properties** list to the **Available properties** list. You can select more than one item by using the **Shift** and **Ctrl** keys and then clicking the left arrow. Also, double-clicking an item in the **Selected properties** list moves it to the **Available properties** list.
- **Right Arrow** - Moves the selected item out of the **Available properties** list and into the **Selected properties** list. You can select more than one item by using the **Shift** and **Ctrl** keys and then clicking the right arrow. Also, double-clicking an item in the **Available properties** list moves it to the **Selected properties** list.

**222** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **Use short text** - Displays the short text value, which is defined in SmartPlant Data Dictionary Manager. Only select-listed properties can be displayed in their short value form. In a few cases, the short value is longer than the regular value.
- **Use select list index** - Includes the numerical index of the select entry along with either the short value or select list value for that property. For more information about select lists and their values and indices, see *SmartPlant Data Dictionary* *Manager Help*.

Sort Tab (Define Report Item Dialog Box)

The **Sort** Tab** **defines the cells that you use to sort the report items and how.

**Available properties** - Lists all the properties of your report item.

**Left Arrow** - Moves the selected item in the **Sort properties** list to the **Available** **properties** list. You can select more than one item and then select this button. Also, double-clicking an item moves it to the **Available properties** list.

**Order** - Specifies the sorting order (**ascending** or **descending**) for the report data.

**Right Arrow** - Moves the selected item in the **Available properties** list to the **Sort** **properties** list. You can select more than one item and then select this button. Also, double-clicking an item moves it to the **Sort properties** list.

**Sort properties** - Displays the properties selected for sorting.

**Down Arrow** - Moves the selected item down in sorting priority.

**Up Arrow** - Moves the selected item up in sorting priority.

Filter Tab (Define Report Item Dialog Box)

The **Filter** Tab defines the filter that you want to use for your report item.

SmartPlant P&ID Setup and Customization Course Guide223 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Applied filter** - Displays your selected filter. To select a new filter, type a valid filter name or select **Browse** to locate a filter.

**Browse** - Displays the **Select Filter** dialog box which allows you to choose or to further define item types for your report template.

**Options Command**

The** Microsoft Excel** > **SmartPlant Reports Toolbar** > **Options** command opens the **Report Options** dialog box, which provides options for defining header and spacing details in your report template.

***Report Options Dialog Box***

The **Report Options** Dialog box** **allows you to set various options for a report template. You can specify the number of blank lines between each row between in your report, the number of rows in your report header, and sort the map properties.

**224** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- The **Options** command is available for tabular and composite format report templates only. It is not available for fixed format report templates because you are free to place captions and properties in any configuration that you want. In fixed format report templates, you are not constrained to have a header or rows at all.

**Skip lines between rows** - Defines the number of blank lines between each row in your report. You can enter a value in the box or use the scroll buttons to select a value. The maximum value allowed is 1000.

**Rows in report header** - Specifies the number of rows in your report header.

**‘Map Properties’ sort order** - Allows you to sort the properties in the report the report template. These properties are available when you select **Map Properties** on the report template toolbar.

- **Ascending** - Sorts the list of properties in the report template in ascending alphabetical order.
- **Descending** - Sorts the list of properties in the report template in descending alphabetical order.
- **None** - Leaves the properties in the original order in which they appear in the list.

**Notes:**

- When sorted in ascending or descending order, the properties that have sub-properties appear first sorted alphabetically, followed by the properties that do not have sub-properties, sorted alphabetically.
- For a summary report, the list entry **Report Item Group Total** that appears at the lowest level is always at the bottom of the list regardless of the sort order selected.

**Prompt for alternative format** - Select this check box to display a prompt for an alternative format when reporting on a property that has units of measure. When cleared, the property will display using the format specified in the Properties window.

***Select Alternative Format for Display Dialog Box***

The **Select Alternative Format for Display** Dialog Box appears when, on the Report Options dialog box, the **Prompt for alternative format** check box was selected.

SmartPlant P&ID Setup and Customization Course Guide225 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Property** - Shows the display name of the selected property.

**Format** - Select the desired format from the list. The default format is always selected initially.

**Display units of measure** - Select this check box to display the selected units of measure in the report. Clear the check box to display the property values without units of measure.

**Notes:**

- Formats with primary, secondary, and tertiary units are truncated to the primary value with no rounding when the units are not displayed. Therefore, if you clear the Display units of measure check box, you may not get accurate results when using such a format. *If you do not want to display units of* *measure, consider using a format that has primary units only.*
- Use caution when importing a report that contains numerical values without units of measure. In such cases, these numerical values will be imported using the plant default formats, potentially altering the items’ properties. For example, if a report was created with a temperature in Celsius without displaying the units (using an alternative format), a numerical value of 100 in the report (intended as 100 ºC) will be imported as 100 ºF (37.78 ºC) into a plant with ºF as the plant default.

**Map Properties Command**

The **Microsoft Excel > SmartPlant Reports Toolbar > Map Properties** command displays a menu of all properties associated with your report. This menu is populated with the items that you define with the **SmartPlant Reports** Toolbar **Define** command. The **Map Properties** menu contains a subset of all the properties in the plant database.

You can select a cell in your report template and then assign a property from the **Map** **Properties** list. The software places the corresponding property in the selected cell.

You do not have to map all the properties in the **Map Properties** menu, and you can add properties to the menu by using the **Define** command again.

**Note:**

- The SmartPlant Reports toolbar appears in Microsoft Excel when you create or edit a report template.

**Edit Command**

The **Reports > Edit** command opens the **Edit Report Template** dialog box.

**226** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Edit Report Template Dialog Box**

The **Edit Report Template** Dialog Box** **lists all the available report templates. You can select a template, view its properties, and edit it in Microsoft Excel.

**Delete Command**

The **Reports** > **Delete** command opens the **Delete Report Template** dialog box.

**Delete Report Template Dialog Box**

The **Delete Report Template** Dialog Box** **allows you to select and delete a report template.

SmartPlant P&ID Setup and Customization Course Guide227 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Running Reports**

You can run a report from **SmartPlant P&ID** or the **Engineering Data Editor** **(EDE)**. The EDE allows the display of data from multiple drawings or the whole project. If you want to run a report on drawing items, use the **SmartPlant P&ID >** **Reports** menu. If you want to run a report based on items in the EDE, use the **Engineering Data Editor** > **View** menu.

**Plant Reports Command**

The **Reports > Plant Reports** command opens the **Plant Reports** dialog box which displays a list of all plant-level reports associated with the current plant. This list is alphabetical. The location of these report templates is defined in **SmartPlant® P&ID**

**Options Manager** > **Settings** > **Default Report Template Path**.

**Plant Reports Dialog Box**

The **Plant Reports Dialog Box** opens when you select either **Reports > Plant** **Reports** on the main toolbar or when you select **View > Plant Reports** on the **Engineering Data Editor** Toolbar, and allows you to choose a report and specify what items to report on.

**228** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Report using** - Displays options for specifying the scope of your report. The options that appear in this area depend on whether the Drawing view or **Engineering Data** **Editor** is active when you access this dialog box.

- **Current Selection** - Produces a report containing the items currently selected in your drawing or table. This option is not available if no drawing or table items are selected. You cannot choose the **Include items in drawing stockpile** option when you choose **Current Selection**.
- **Entire drawing** - Produces a report containing the contents of the entire drawing.

This option is available only when you use the **Reports** menu command.

- **Include items in drawing stockpile** - Allows you to specify if you want items that reside in the drawing stockpile in your report. This option is available only when you use the **Reports** menu command.
- **All items in the Engineering Data Editor** - Produces a report of all the items in the Engineering Data Editor based on the EDE scope. This option is available only when you use the **EDE > View** menu command.

**My Reports Command**

The **Reports > My Reports** command opens the **My Reports** dialog box which lists all user-level reports. They can be stored on your local workstation. This list is alphabetical. If you want to run a report based on drawing items, access this command from the **Reports** menu on the main toolbar; if you want to run a report based on table items, access this command from the **View** menu on the **Engineering** **Data Editor** Toolbar.

SmartPlant P&ID Setup and Customization Course Guide229 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- You can define the location for storing user-level report templates (**My** **Reports** location)** **from** SmartPlant P&ID > ** **Tools** > **Options** > **Files** tab.
- To utilize a **My Report Template** as a **Plant Report Template,**  move the template into the folder for the **Plant Report Templates** as defined in **SmartPlant® P&ID Options Manager** > **Settings** > **Default Report** **Template Path**.

**My Reports Dialog Box**

The **My Reports Dialog Box** opens when you select either **Reports > My Reports** on the main toolbar or when you select **View > My Reports** on the **Engineering** **Data Editor** Toolbar, and allows you to choose one of your custom reports and to specify what items to report on.

**Report using** - Displays options for specifying the scope of your report. The options that appear in this area depend on whether the Drawing view or **Engineering Data** **Editor** is active when you access this dialog box.

- **Current Selection** - Produces a report containing the items currently selected in your drawing or table. This option is not available if no drawing or table items are **230** * SmartPlant P&ID Setup and Customization Course Guide *
- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

selected. You cannot choose the **Include items in drawing stockpile** option when you choose **Current Selection**.

- **Entire drawing** - Produces a report containing the contents of the entire drawing.

This option is available only when you use the **Reports** menu command.

- **Include items in drawing stockpile** - Allows you to specify if you want items that reside in the drawing stockpile in your report. This option is available only when you use the **Reports** menu command, not the **Engineering Data Editor** command.
- **All items in the Engineering Data Editor** - Produces a report of all the items in the Engineering Data Editor based on the EDE scope. This option is available only when you use the **EDE > View** menu command.

SmartPlant P&ID Setup and Customization Course Guide231 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Working with Drawing Revisions and**

**Versions**

You can create revisions for drawings consisting of major and minor revisions and include the revision information in the drawing title block if desired. You can also associate a version with the latest revision if you need to archive drawings for viewing or comparing. You can compare two archived drawings or you can compare an archived drawing with the current drawing.

**New Revision Command**

The **Revisions > New Revision** command opens the **New Revision** Dialog Box allowing you to create a new revision for the selected drawings and to enter values for the revision properties. You can also associate a version with a new revision.

**Note:**

- If you are working in an integrated environment, when you select the **New** **Revision** command, the software opens either the SmartPlant Foundation **Revise** dialog box or the **New Revision** dialog box, depending on the option selected in Options Manager for the **Revision Management Software for** **Publishing Documents** setting.

**New Revision Dialog Box**

The **New Revision** Dialog Box allows you to enter values of properties pertaining to the creation of a new revision that applies to one or more drawings.

**232** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Alphabetized Button** - Displays drawing properties alphabetically. This button acts as a toggle and is available when properties are displayed categorically.

**Categorized Button** - Displays drawing properties in categories. This button acts as a toggle and is available when properties are displayed alphabetically.

**(Properties and Values List**) - Displays a list of shipped properties used for the revision. You can specify additional properties for display on this dialog box by defining them in the Data Dictionary Manager. Note that **Major Revision** is a mandatory property and that the combination of the **Major Revision** and **Minor** **Revision** values must be unique in the plant or project.

**Associate version** - Check to associate drawings. When you select **OK**, the **New** **Version** dialog box opens, which allows you to create a new version and associate it with the revision.

**OK** - Generates the new revision, and if specified, an associated version. This command only becomes available when you enter a value for **Major Revision**.

**Associate Version Command**

The **Revisions > Associate Version** command opens the **New Version** dialog box, which allows you to associate a version with the last revision of the selected drawings. Once you associate this version, it can only be deleted at the same time as you delete the revision.

SmartPlant P&ID Setup and Customization Course Guide233 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Revision Properties Command**

The **Revisions > Revision Properties** command opens the **Revision Properties** dialog box allowing you to view and edit drawing revision properties.

**Revision Properties Dialog Box**

The **Revision Properties** Dialog Box allows you to view and edit revision properties for a drawing.

**234** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Revision History Command**

**The** Revisions > Revision History** command o**pens the Revision History dialog box, which displays the revisions of the selected drawing.

**Revision History Dialog Box**

The **Revision History** Dialog Box lists all the available revision of a drawing.

**History** - Lists all the revisions of the drawing in the current plant or project. Note that when you check out or fetch a drawing from As-Built into a project, only the last revision record is displayed on this dialog box, regardless of whether that revision is associated with a version or not.

- **Major Revision** - Indicates the number or other designation of the major revision. This is a required property, so a value will always appear in this column.
- **Minor Revision** - Indicates the number or other designation of the minor revision. This is not a required property, so a value may or may not appear in this column.
- **Revision Date** - Shows the date on which the revision was created.
- **Approved By** - Shows the name of the person who approved the revision.
- **Created By** - Shows the name of the user who created the revision.

SmartPlant P&ID Setup and Customization Course Guide235 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Checked By** - Shows the name of the person who checked the revision.

**Properties** - Opens the **Revision Properties** dialog box, allowing you to view or edit all the revision properties.

**Associate Version** - Opens the **New Version** dialog box, allowing you to create and associate a new version with this revision. This option is only available for the last revision.

**Delete** - Removes the selected drawing revision. To be able to delete revisions, you must have appropriate permissions assigned in SmartPlant Engineering Manager. If the revision has an associated version, the software deletes the version together with the revision.

**Note:**

- The **Delete** command is disabled if the plant is registered with SmartPlant Foundation, regardless of any permission settings.

**New Version Command**

The **Revisions > New Version** command displays the **New Version** Dialog Box allowing you to save or schedule a new version of the selected drawing. The current state of a drawing and all associated data can be saved using the New Version command. If drawing versions are saved on a regular basis, the sequence of drawing versions in a project becomes a sort of archive that shows the development of the drawing over the life of the project.

**Important**

- Drawing versions allows you to create, compare, and recover versions of your drawings. Using drawing versioning is helpful in the following situations.

o Restoring a drawing after it has been deleted

o Restoring a drawing after items have been deleted from the drawing o Restoring a drawing after making design errors

o Archiving a drawing before making major design changes

**236** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**New Version Dialog Box**

The **New Version** Dialog Box allows you to enter notes pertaining to the creation of this new version. When you select **OK**, the **Creating Version of Drawings** dialog box opens and you can follow the version creation process.

**Comments -** Enter notes pertaining to the creation of this new version. These notes can be viewed by other projects and the Plant when they check the history of a drawing.

**Schedule** - Opens the Schedule Task Wizard which allows you to schedule version creation for a later time or at a regular interval.

**Save a Version of a Drawing**

1. From **Drawing** **Manager**, in the List view, select a drawing.
2. Select **Revisions** > **New** **Version** or right-click and select **New** **Version.**
3. On the **New** **Version** dialog box, enter any comments that you want to attach to the new version.
4. Select **OK** to create the version.

**Notes:**

- Select **View Log** on the **Creating Version of Drawings** dialog box to open the log file and review notes on the version creation operation.
- **New Version** skips open drawings, notes them in the log, and then continues.

**Version History Command**

The **Revisions > Version History** command opens the **Version History** dialog box, which displays a record of the versions of the selected drawing and allows you to view the drawing or compare the drawing with other versions of the drawing.

SmartPlant P&ID Setup and Customization Course Guide237 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Version History Dialog Box**

The **Version** **History** Dialog Box lists all available versions of a drawing. You can compare two versions of the drawing, view a version of the drawing without opening SmartPlant P&ID, or fetch a version from the list.

**History** - Lists all the versions of the drawing in the current plant or project.

**Compare** - Opens the **Compare** dialog box, allowing you to compare two versions in the **History** list. This button is not available unless two versions are selected in the list or if you open this dialog box by selecting **History** on the **Fetch** dialog box. Use the **Compare With** button to compare one version in the active project to a version in another project or the Plant.

**Compare With** - Opens the **Compare With** dialog box, allowing you to find a drawing version in a different project or in the Plant to compare to the drawing version you select in the **History** list. The **Compare With** button is not available if you open this dialog box by selecting **History** on the **Fetch** dialog box.

**View** - Opens the** View** dialog box, which displays a read-only view of the selected drawing version without opening SmartPlant P&ID. You can manipulate the view or select drawing items and review their properties.

**238** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Fetch** - Opens the **Fetch Comments** dialog box. This button is available only if you have selected only one version in the **History** list and that drawing is not the current version. The **Fetch** button is not available if you open this dialog box by selecting **History** on the **Fetch** dialog box.

**Delete** - Removes the selected drawing version. You must have the appropriate permissions, assigned in SmartPlant Engineering Manager, to delete versions. You cannot delete the current version of a drawing by using this button. However, you can delete the current version of a drawing by using the **Delete** command on the **Edit** menu on the main menu bar. If the selected version is one that was created especially for the last revision using the **Associate Version** command, then you cannot delete the version unless you first delete the revision.

**Recover a Version of a Drawing Using the Fetch Command**

**CAUTION**

- Be sure you are familiar with the ramifications of drawing recovery before you undertake this operation. For more information, see *SmartPlant P&ID*

*Drawing Manager Help: Recovering Drawings*.

1. In the List view, select the drawing that you want to recover.
2. Select **Revisions** > **Version** **History** or select the **Version** **History** button.
3. On the **Version** **History** dialog box, select the version of the drawing you want to recall.
4. Select the **Fetch** command and enter comments on the **Fetch** **Comments** dialog box.
5. On the message box, select **Yes** to confirm that you want to overwrite the current version with the selected version.
6. Select **View** **Log** on the **Fetching** **Drawings** dialog box if you want to see notes about this operation.

**Compare Command**

When more than one version of a drawing exists, the **Compare** command on the **Version** **History** Dialog Box opens the **Compare** Dialog Box and allows you to view two versions side-by-side and examine their differences.

SmartPlant P&ID Setup and Customization Course Guide239 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

***Compare Dialog Box***

The **Compare** Dialog Box displays two versions of the same drawing and indicates the differences between them. The differences between drawing versions are assigned to logical “change” groups. Differences also belong to either **Data** or **Graphic**:

- **Data** - Refers to a mismatch in the properties assigned to an item that exists in both drawings, namely a change, addition, or deletion of a property in the **Properties** window or in the **Engineering Data Editor** in SmartPlant P&ID, or through automation.
- **Graphic** - Refers to an item that has changed only in its graphical representation in the design (for example, the item is moved or otherwise graphically manipulated in the drawing).

**Notes:**

- The following differences are ignored: claim status, select list strings, linked or embedded objects, symbology, and inconsistency indicators.
- You can only compare a drawing against a version of itself; you cannot compare one drawing to another drawing.
- If you attempt to compare two versions that are identical to each other, the **Compare** dialog box does not open and a confirmation message alerts you as to why.
- You cannot do anything else in Drawing Manager while the **Compare** dialog box is open.

The two versions are displayed in two **Drawing** views, described only as left and right. The relationship between the two views depends on whether you are comparing two versions in your own database or comparing your version to a version in another database.

- If the two versions are in the active database, then the left-hand view is the older version, and the right-hand view is the newer version. That is, they are displayed in time-order from left to right.
- If the two versions exist in different databases, you cannot be assured that time-order is the logical order to display the versions; therefore, the right-hand view is reserved for the version in your active Plant or project database, and the left-hand view belongs to the version in another database.

**Note:**

- The **Compare** dialog box in Drawing Manager is useful reviewing differences between versions only. If you want to reconcile anything about the two versions you review, then you must do so inside SmartPlant P&ID with the **Compare and Refresh** command which exists for this purpose. If you started with the left-hand drawing version and applied every change listed on the **240** * SmartPlant P&ID Setup and Customization Course Guide *
- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Compare** dialog box, then you would end with a drawing that is identical to the right drawing version.

**Toolbar Commands** - Apply to the **Drawing** views. If there is a drop-down arrow, you can apply the command to either the right or left view.

- **Compare Options**

Opens the **Compare Options** dialog box which allows

you to customize the colors that the various comparison states are displayed in.

That color-coding is then displayed in the status bar of the **Compare** dialog box as a static reminder.

- **Print** -

Prints the **Drawing** view or views.

- **Generate Report** -

Opens Microsoft Excel and creates a report of the

information contained in this comparing versions session. This report lists the same information that is displayed in the **Change Groups** and **Change Details** lists (change groups, item types, claim statuses, and so forth).

- **Find in List** -

Zooms to the **Change details** list entry that corresponds to an

item you select in either **Drawing** view. If you select a drawing item that exists in the list, then the list display automatically zooms to that entry.

- **Find in Drawings** -

Manipulates the **Drawing** views so that the selected

element is listed in the **Change details** and the **Change groups** list is centered in the appropriate **Drawing** view.

SmartPlant P&ID Setup and Customization Course Guide241 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Zoom Area** -

Enlarges the display of an area in one or both **Drawing** views

by allowing you to draw a fence around that arbitrary area of the view.

- **Zoom In** -

Enlarges the display of items around a specified point in one or

both **Drawing** views.

- **Zoom Out** -

Reduces the display of items around a specified point in one or

both **Drawing** views.

- **Fit** -

Fits all visible items in one or both **Drawing** views.

- **Pan** -

Allows you to move the display in any direction from a specific point in one or both **Drawing** views to see other areas of the view by dragging the pointer across the display.

- **Select** - Activates the select tool.
- **Help** -

Opens Drawing Manager Online Help.

**Drawing Views** - The left and right drawing views display the two versions of your drawing being compared. The display above the drawing view shows the drawing name and the version. The select list in the display allows you to choose the drawing layers to be compared and can be selected individually for each version. Possible select list values are **Primary**, **Typical**, or **Both**.

If you compare two versions from different projects, the version that belongs to the other project appears in the left **Drawing** view and the version that belongs to your active Drawing Manager project appears in the right **Drawing** view. If you compare two versions from your active project, then the latest version appears in the right **Drawing** view.

At the top of each **Drawing** view, the Plant or project, the name of the drawing, and the version is displayed explicitly. You can move the bars between the different views per your needs. If you double-click on the divider between the left and right **Drawing** views, then the software automatically adjusts the two views to be the same-size.

**Properties Window** - Displays two columns of properties for an item selected in a **Drawing** view or in the **Change details** list. The left-hand and right-hand columns correspond to the left and right **Drawing** views. If a deleted item is selected (the item exists in left view, but not the right view), the properties for that item are listed in the left-hand column and the right-hand column is empty. If a modified item is selected, values from both versions show in their respective columns in the **Properties** window. If a new item is selected, that is, the item exists in right view, but not the left view, the properties for that item are listed in the right-hand column and the left-hand column is empty.

**Properties** **Commands** - Allows you to customize the properties that are displayed in the **Properties** window.

- **Alphabetical** -

Lists properties in alphabetical order. This button acts as a

toggle and is available when properties are displayed categorically.

**242** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **Categorized** -

Displays properties grouped by specific categories. Categories

are defined and properties are assigned to those categories in Data Dictionary Manager. This button acts as a toggle and is available when properties are displayed alphabetically.

- **Show Modified** -

Toggles the display of only those properties that are

different between the properties that belong to a selected drawing item. This button applies only to modified items that exist in both versions; for added and deleted items, all properties are listed.

**Change groups** - Lists the changed items in groups. A listed item contains all the items this change effects. You can sort the list by clicking the column headings.

- **Check box** column - Displays colors in the drawings as defined using **Compare** **Options**. If not selected, the **Default items** color displays.
- **Number** - Displays an arbitrary number that is assigned to a logical change group when this dialog box is opened. The number has no intrinsic meaning and may apply to a different group the next time you open this dialog box.
- **Identifier** - Lists item tags for the principal member of the change group, if an item tag is assigned to that object. For instance, if a change group centers on data differences for a vessel and its nozzles, then the item tag for the vessel is displayed in this column.
- **Category** - Displays the highest priority of categories that appear in the **Change** **details** list for this group. The possible categories are data and graphic, listed in highest to lowest priority.
- **Claimed** - Displays an overview of the claim status of the individual items in the group. Possible values are **All**, **Some**, or **None**.
- **Valid Claim** - Indicates that the claimed item is a valid claim.

**Change details** - Lists all the individual items that belong to the group that you select from the **Change groups** list. You can sort this list by clicking on any one of the following column headings.

- **Result** - Displays one of three possible values: Left-Only, Right-Only, and Different. Left-Only denotes an item that exists in the left-hand version only, implying that the item is deleted from the right-hand version. Right-Only denotes an item that exists in the right-hand version only, implying that the item was added to the right-hand version. Different denotes a difference between the properties, graphics, or connectivity of an item that exists in both versions.
- **Item Type** - Describes the item type, such as **Instrument**, **PipeRun**, or **Nozzle**.
- **Specific Item Type** - Displays the specific type of item, such as **3-Way Ball** **Valve**, **Piping**, or **Flange Orifice**.
- **Item Tag** - Displays the item tag of the individual item in question if a tag has been assigned to the item.

SmartPlant P&ID Setup and Customization Course Guide243 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- **Category** - Displays the highest priority category of change that applies. The possible categories are data and graphic, listed in highest to lowest priority. That an item that is moved graphically (graphic category) but also includes a property change (data category) lists “data” in its category column.
- **Claimed** - Displays the claim status of the object: valid claim, invalid claim, and not claimed.
- **Stockpile** Denotes whether the selected item is stored in the stockpile.
- **View** — Displays the status of the selected item in relation to its placement in the primary or typical view, and between the selected versions. The following statuses are displayed: Added to Primary, Added to Typical, Moved to Typical, Moved to Primary, Removed from Typical, No Change in Typical, Removed from Primary, No Change in Primary

**Status** **bar** - Displays the currently defined colors for illustrating comparison status.

You can change the color scheme by selecting the **Compare** **Options** command on the toolbar and defining options on the **Compare** **Options** dialog box.

**Compare Options Dialog Box**

The **Compare Options** Dialog Box opens when you select **Compare Options** command on the **Compare** dialog box toolbar and allows you to customize the colors that the various comparison states are displayed in. The active color scheme is displayed in the **Compare** dialog box status bar.

**Left-only items** - Allows you to choose a color for displaying objects that exist only in the left-hand Drawing view. Dark green is the default color for this option.

**Right-only items** - Allows you to choose a color for displaying objects that exist only in the right-hand Drawing view. Red is the default color for this option.

**Different items** - Allows you to choose a color for displaying items that exist in both views but differ from each other for any number of reasons (for example, modified properties, changed connectivity, and so forth). Blue is the default color for this option.

**244** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Default items** - Allows you to choose a color for displaying drawing items that are identical in the two views. Black is the default color for this option.

**Highlight items** - Allows you to choose a color to denote that a drawing object is highlighted, for instance, when an item is within your locate zone.

**Selected** **items** - Allows you to choose a color to denote items that are selected in one or both **Drawing** views.

***Comparing Drawing Versions***

1. In the List view, select the drawing.
2. Select **Version** **History**.
3. In the drawing list on the **Version** **History** dialog box, select two versions of the drawing.
4. Select **Compare**.
5. On the **Compare** dialog box, you can view the differences between the two versions, but you cannot make changes to the designs. ** **

**Notes:**

- You can manipulate the views and navigate through the listed changes by using the commands on the **Compare** dialog box toolbar. Each **Drawing** view also has its own shortcut menu, which includes manipulation commands that apply only to that view.
- You can select an item in either **Drawing** view. The item is then located in the appropriate group in the **Change details** list. If you select an item in the **Change details** list, then you can use the **Find in Drawings** button on the toolbar to locate the item in one or both **Drawing** views.
- You can select an item in the **Drawing** view or in the **Change details** list.

Properties for that item appear in the **Properties** window. Selecting multiple items is not possible on the** Compare** dialog box.

**Compare and Refresh Command**

The **SmartPlant P&ID >**  **Tools > Compare and Refresh** opens the **Compare With** Dialog Box.

SmartPlant P&ID Setup and Customization Course Guide245 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

***Compare With Dialog Box***

The **Compare With** Dialog Box allows you to select a drawing version to compare against the version that you currently have open and active. Selecting OK on this dialog box opens the **Compare and Refresh** Dialog Box.

**Available Databases** - Lists all the different databases that currently have a version of the drawing you chose on the **Show History** dialog box.

**History** - Lists all the versions of the chosen drawing in the database you selected in the **Available Databases** list.

**Compare and Refresh Dialog Box**

The **Compare and Refresh** Dialog Box is like the **Drawing Manager > Revisions** > **Version** **History > Compare > Compare** Dialog Box except for the additional **Change Groups – Action** and **Change Details – Change** commands to apply changes to drawing.

**Change groups**:

**Action** - Defines which action is to be taken involving the selected change.

- **No Action** - No drawing changes are applied.
- **Refresh** - Applies any drawing changes to the open drawing version.

**Change details**:

**Change** - Describes what action is required to make the drawing in the right frame match the drawing in the left frame. Actions include:

- **Add** - Adds the listed item to the version on the right.
- **Delete** - Removes the listed item from the version on the right.
- **Modify** - Changes the listed item in the version on the right.

***Compare and Refresh Drawing Versions***

1. From SmartPlant P&ID, select **Tools > Compare** **and Refresh**.

**246** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. On the **Compare With** dialog box, select a database using the **Available** **databases** drop-down list box.
2. In the **History** list box, select the drawing you want to compare your current drawing with.
3. Select **OK**.
4. On the **Compare and Refresh** dialog box, review the information in the **Change** **groups** and **Change details** areas. Your current drawing displays on the right side of the screen. The version you are comparing it to displays on the left.
5. In the **Change groups** area, click in the **Action** column.
6. Using the drop-down list, select **No Action**, **Refresh**, or **Validate**. **Validate** will display as an option only if you have an **Invalid Claim**.
7. Select OK to refresh the drawing and accept any changes or Cancel to dismiss the dialog box.

SmartPlant P&ID Setup and Customization Course Guide247 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

***Compare and Refresh Examples***

The following examples provide details for reconciling data and graphic differences between your current drawing and a previously created version of that drawing.

**Data Example**

In this example, a vessel with three nozzles exists in the version to be selected for the compare. The current version contains the same items but a change has been made to the **Cleaning Requirements** property. When the current version is compared to the selected version, a data change is found during the compare.

The current version appears on the right and the version it is compared to appears on the left. **Change groups indicates** a data change was located. **Change details** **indicates** the compare located a different property value (**Cleaning Requirement**) in the current version. If you **Refresh** all the change groups, the property value will be modified as shown in the **Change** column. Clicking in the **Action** column of the **Change groups** allows you to refresh or take no action (accept the new property values) for each item.

**Graphic Example**

In this example, a vessel with three nozzles exists in the version to be selected for the compare. The current version contains the same items but it has been moved to a new location. When the current version is compared to the selected version, a graphic change is found during the compare.

The current version appears on the right and the version it is compared to appears on the left. **Change groups indicates** a graphic change was located. **Change details** **indicates** the compare located a graphic modification in the current version. If you **248** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Refresh** the version, the graphic modification will be accepted as shown in the **Change** column. Clicking in the **Action** column of the **Change groups** allows you to take no action or refresh (accept the previous location of the vessel and nozzles). The settings are not applied to a version until you select **OK**.

---

SmartPlant P&ID Setup and Customization Course Guide249 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Fetch Deleted Drawing Command**

The **Revisions > Fetch Deleted Drawing** command opens the **Fetch Deleted** **Drawing** Dialog Box and allows you to recover drawings that have been deleted from the plant structure; whenever you delete a drawing, a version is automatically saved.

**Fetch Deleted Drawing Dialog Box**

The **Fetch Deleted Drawing** Dialog Box lists the drawings that are deleted, allowing you to select which drawings to retrieve.

**Deleted drawings** - Lists deleted drawings.

**Delete permanently** - Permanently deletes selected drawings from the database.

Permanent deletion of drawings is an irreversible action.

**Schedule** - Opens the **Schedule Task Wizard**. Follow the directions in the wizard to schedule retrieval later or on a regular interval.

**Note:**

- The plant structure where the deleted drawings were must be active in the **Tree** view before this command is made available.

**250** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Recover a Version of a Deleted Drawing**

**CAUTION**

- Be sure you are familiar with the ramifications of drawing recovery before you undertake this operation. For more information, see *SmartPlant P&ID*

*Drawing Manager Help: Recovering Drawings*.

1. Select the appropriate plant level in the **Tree** view, and select **Revisions > Fetch** **Deleted Drawing** command.
2. On the **Fetch Deleted Drawing** dialog box, select the drawing you want to retrieve.
3. Select **OK** to retrieve the drawing now or select **Schedule** to open the **Schedule** **Task Wizard**, which allows you to schedule retrieval later or on a regular interval.
4. On the **Fetching Deleted Drawing Status** dialog box, select **View Log** to review notes about this retrieval process.

**Incremental New Version Command**

The **Revisions > Incremental New Version** command opens the Schedule Task Wizard, allowing you to create a task to save all drawings in a plant or site whose time stamp shows that changes have been made since the last version was saved.

**Save Versions of All Drawings**

1. In the Tree view, select the site or plant containing the drawings you want to save versions of.
2. Select **Revisions** > **Incremental** **New** **Versions**.
3. Follow the steps and directions on the **Schedule** **Task** **Wizard**, and select **Finish** to schedule the operation at another time or on a regular interval.

**Note:**

- This procedure saves new versions of only those drawings whose time stamp shows that they have changed since the last version was saved.

SmartPlant P&ID Setup and Customization Course Guide251 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Backing Up and Restoring Your Data**

The Backup and Restore functionality in SmartPlant Engineering Manager allows you to backup all data on a site and/or plant structure basis, including application and engineering data. Backup and restore is used for:

- Database and database server migration
- Upgrade
- Disaster recovery

Using the zip.exe and unzip.exe executables installed with SmartPlant Engineering Manager, backups are bundled into zip files that are named using the top-level object name and type contained within the backup. These zip files contain various files depending on the type of backup and options selected. All database schemas in each backup instance are saved into a single file. For plant backups, files in the plant structure paths are bundled into a zip file inside the main plant backup zip file. The reference data files are archived into individual zip files and added to the main plant backup zip file.

**Note:**

- A manifest document describing the data included in the backup is included in the backup zip file. This manifest document provides the input necessary to restore the data later.

**Backup Options**

**Site Server** - Includes the site schema and site data dictionary. You may choose to backup all plant structures or define a list of plant structures to be included in the S**ite** **Server Backup**.

**Plant Structure** - You can choose to include or omit reference data from the **Plant** **Structure Backup**.

**Scheduled Backups** - Both site and plant structure backups may be **scheduled** to run one time only, or on daily/weekly intervals.

**Restore Options**

**Site Server** - You can restore the site to the same computer from which it was backed up or you can restore it to another computer. If you restore the site to another computer, you must provide, during the **site restoration process**, the database alias and password information for the database instance on the new computer.

**Plant Structure** - You can restore a plant structure to the same site from which it was backed up or you can restore it to another site. If you restore the plant to another site, you must provide, during the **plant restoration process**, the database alias and password information used by the new site.

**252** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- You must have **Site** **Administrator** privileges to use the backup and restore functionality.
- If you are using **Oracle**, we recommend running in **Archive** **Logging** mode.

**Backup Command**

The **Tools** > ** Backup **command** **opens the** Site Server Backup Wizard** or **Plant** **Structure Backup Wizard** depending on which node you select in the **Tree** view before using this command. To backup the site, select the **Site Server** node and then select **Tools > Backup**. To backup just a plant, select the plant under the **Plant** **Structures** node and then select **Tools > Backup**.

**Notes:**

- Only a Site Administrator can perform a backup.
- When backing up a site or plant with SQL Server, the user running the SQL

Server instance must have Read/Write access to the share where the backup

.zip file is located.

**Site Server Backup Wizard**

The **Site Server Backup Wizard** allows you to backup the site server information. A site backup includes the site schema and the site data dictionary. Included in the backup file is a manifest document and a dump file containing all database user objects belonging to the site schema and site data dictionary.

**Notes:**

- Backup zip files for a site use the following naming convention: ***site***

***name*_s.zip**

- If a file exists in the backup location with the same name, the backup zip file name will contain a revision number: ***site name*_1_s.zip**. There is no limit to the revision numbers.

SmartPlant P&ID Setup and Customization Course Guide253 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Site Server Backup Wizard – Options**

The **Site Server Backup Wizard – Options** dialog** **allows you to specify options for backing up the site.

**Back up all plants and reference data at this site** - Allows you to include all plant structures in the site as well as the reference data for each associated application. This option is dynamic and obtains the list of plant structures directly from the site schema. A scheduled backup with this option selected will include any new plant structure and reference data added to the site schema later. When a plant structure is included in a site server backup, the contents of the plant structure backup will be bundled into a separate backup zip file.

**Submit to task scheduler wizard** - Allows you to create a one-time only or recurring backup schedule. If you select this options, two extra pages in the Site Server Backup Wizard will display to allow you to input the scheduling information.

**Schedule name** - Defaults to the name of the site being backed up. You may edit this value. If a schedule with this name already exists, you will be prompted to enter a unique name for the schedule.

**Backup location** - Specifies where the zip file containing the site backup data is placed when the backup process finishes. By default, the backup path specified during site creation displays. You can change this path. This field is limited to 255 characters and cannot contain any of the following characters: ~ ` ! % * ( ) { } [ ] / ; : ’ ” < > , ? |

**Site Server Backup Wizard - Plant Structures**

The **Site Server Backup Wizard - Plant Structures** dialog** **allows you to select the plant structures to be included in the site backup.

**254** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Plant structures** - Lists the plant structures in the site. Check the box by each plant structure you want to include in the site backup. Reference data associated with each plant structure is automatically included in the backup unless you check the **No** check box.

**Notes:**

- This page appears only if there is at least one plant structure in the site and you did not select the **Back up all plants and reference data at this site** option on the previous dialog.
- This plant structures list is a static list and will not include any new plant structures added to the site schema later.

**Site Server Backup Wizard - Finish**

The **Site Server Backup Wizard - Finish** dialog** **displays all the settings that you defined for backing up the site server. Review these settings carefully. If you are satisfied with the settings, select** Finish**. Otherwise, select** Back** to change one or more of the settings.

If you did not schedule the backup, the backup process begins when you select **Finish**. The status bar displays progress information as the backup proceeds. The wizard automatically exits after the backup process completes successfully. If you chose to schedule the backup, selecting **Finish** creates a task in the Windows task scheduling system and then the wizard closes.

SmartPlant P&ID Setup and Customization Course Guide255 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Details** - Allows you to toggle the amount of information displayed.

**Notes:**

- Backup log information is available in the **SpaBackups.log** file in the Temp folder.
- After the backup completes, the following message will display:

**Plant Structure Backup Wizard**

The **Plant Structure Backup Wizard** allows you to backup the plant structure information. A plant structure backup includes the plant schema, plant data dictionary, associated application schemas and data dictionaries, and all other information pertaining to that plant structure, including all project data if the plant includes projects. Included in the plant structure backup file is a manifest document describing the contents of the backup and all necessary information to restore the plant structure and associated application schemas, and a dump file containing all database user objects belonging to the schemas and data dictionaries for the plant structure and associated applications.

**Notes:**

- Backup zip files for a plant structure use the following naming convention: **256** * SmartPlant P&ID Setup and Customization Course Guide *
- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

o ***RootItemName*_p.zip** for non-Workshare plant structures o ***RootItemName*_m.zip** for host plant structures o ***RootItemName*_w.zip** for satellite plant structures o ***RootItemName*_a.zip** for projects

- If a file exists in the backup location with the same name, the backup zip file name will contain a revision number, for example,

*RootItemName* _1_[pws].zip. There is no limit to the revision numbers.

**Plant Structure Backup Wizard - Options**

The **Plant Structure Backup Wizard - Options** dialog** **allows you to specify options for backing up the plant structure.

**Include Reference Data** - Select this option if you want to include the reference data for applications associated with the plant structure. For more information about backups and reference data files, please see the Backing Up and Restoring Reference Data topic. This option is not available if the plant has no applications associated with it.

**Submit to task scheduler wizard** - Allows you to create a one-time only or recurring backup schedule. If you select these options, two extra pages in the Plant Structure Backup Wizard will display to allow you to input the scheduling information.

**Schedule name** - Defaults to the name of the plant structure being backed up. You may edit this value. If a schedule with this name already exists, you will be prompted to enter a unique name for the schedule. This name cannot contain any of the following characters: ~ ` ! % ^ & * ( ) - + = { } [ ] \ / ; : ‘ ” < > , . ? |

SmartPlant P&ID Setup and Customization Course Guide257 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Backup location** - Specifies where the zip file containing the plant structure backup data will reside after the backup finishes. By default, the backup path specified during site creation displays. You can change this path. This field is limited to 255 characters and cannot contain any of the following characters: ~ ` ! % * ( ) { } [ ] / ; : ’ ” < > , ? |

**Plant Structure Backup Wizard - Finish**

The **Plant Structure Backup Wizard - Finish** dialog** **displays all the settings that you defined for backing up the plant structure. Review these settings carefully. If you are satisfied with the settings, select** Finish**. Otherwise, select** Back** to change one or more of the settings.

**Details** - Allows you to toggle the amount of information displayed.

**Note:**

- Backup log information is available in the **SpaBackups.log** file in the Temp folder.

**Scheduling Options**

If you select the **Submit to task scheduler wizard** on the **Site Server Backup** **Wizard** - **Options** dialog or **Plant Structure Backup Wizard - Options** dialog, the **Site Server Backup** or **Plant Structure Backup** dialog will open allowing you to specify options for scheduling the backup.

**258** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Task name** - Displays the name of the backup being scheduled. You cannot edit this field.

**User name** - Type your system or domain login. You must have the necessary operating system permissions to create a task in the Windows task scheduling system.

This user must also have database administrator privileges.

**Password** - Type your system or domain password.

**Confirm password** - Re-type your password.

**Perform this task** - Allows you to specify the frequency of the scheduled backup.

- **Daily** - Performs the scheduled backup every 24 hours.
- **Weekly** - Performs the scheduled backup once in every 7 days.
- **One time only** - Performs the scheduled backup once at the specified time.

**Notes:**

- If you are scheduling a site backup task and you selected the **Back up all** **plants and reference data at this site** option, all plant structures added to the site after the task was created are automatically included in subsequent backup runs. If you did not use this option when creating the site backup task, you must create another site backup task to include the new plant structures.
- You cannot view the details of a previously scheduled backup task from within SmartPlant Engineering Manager. If you set up a scheduled event, such as backing up a plant at a given time, whether it be daily, weekly, or monthly, you cannot view that schedule within SmartPlant Engineering Manager. Use the **Control Panel > Administrative Tools > Task Scheduler** to see what events are scheduled. However, Schedule Tasks indicates only that an event is scheduled, not what that event includes (such as whether it is backing up a plant or site).
- To reschedule an event, such as a daily plant backup, you must first end the scheduled task using Schedule Tasks, and then use the backup wizards in SmartPlant Engineering Manager to schedule a new task.

SmartPlant P&ID Setup and Customization Course Guide259 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Running Backups from the Command Line**

You can run backups from the command line using the **spabackup.exe** program, which is delivered to the ~ *Program Installation Folder*\SmartPlant\Engineering Manager\bin folder during installation.

**Example Plant Backup Command Line Calls**

spabackup.exe -d -s C:\temp\SmartPlantV4.ini -p PlantName

spabackup.exe -s C:\temp\SmartPlantV4.ini -p PlantName - NoRefData

spabackup.exe -p PlantName -NoRefData

spabackup.exe -p PlantName

**Example Site Backup Command Line Calls**

spabackup.exe -d -s C:\temp\SmartPlantV4.ini

spabackup.exe -s C:\temp\SmartPlantV4.ini

**260** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Backing up and Restoring Reference Data**

Reference data is backed up as part of a** Plant Structure Backup**. To back up reference data you must back up a plant structure.

Reference data is restored as part of restoring a plant. However, you can restore just the reference data if the plant structure is already online (in the list of root items on the current site server) and the **Restore plant schemas** option in the **Restore Plant** **Structure** wizard is disabled.

If the reference data object is a path, all files and folders under this location will be archived into a single zip file and included in the overall plant structure zip file. If the reference data object is a file, it will be included in the overall plant structure zip file.

**SmartPlant P&ID option setting SP_IDs:**

- 680 Rules Library
- 681 Catalog Explorer Root Path
- 682 PID Template Path
- 683 Project Style File
- 684 Default Report Template Path
- 685 Default Assembly Path
- 703 Export to CAD Definition File
- 709 Project Insulation Specification File
- 711 Plant Structure – Drawings
- 804 SmartPlant Resource Files
- 809 Import Map Files
- 824 Core Nominal Diameter and Jacket Nominal Diameter XML File

**SmartPlant Electrical option setting SP_IDs:**

- 1001 Catalog Explorer Root Path
- 1002 Default Report Template Path
- 1004 Default SLD symbols Path
- 1005 Default Schematic Blocks Path
- 1007 Default Generated SLD Path
- 1008 Default Generated Schematic Path
- 1009 Default Generated PDB Layout Path
- 1010 Name of Template File for SLD
- 1011 Name of Template File for Schematic
- 1012 PDB Layout Reports Path
- 1013 Name of Title block File for SLD
- 1014 Name of Title block File for Schematic
- 1015 Name of Title block File for PDB layout
- 1018 Default Templates Path

SmartPlant P&ID Setup and Customization Course Guide261 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Restore Command**

The** Tools **>**  Restore** command opens the **Restore** **Site Server Wizard** or **Restore** **Plant Structure Wizard,** depending on which node you select in the **Tree** view before using this command, and allows you to restore a site or plant structure from backup.

**Notes:**

- Only a site administrator can perform a restore.
- When restoring a site or plant with SQL Server, the user running the SQL

Server instance must have Read/Write access to the share where the backup

.zip file is located.

**Restore Site Server Wizard**

You can restore a site from backup in one of two ways. From within SmartPlant Engineering Manager, you can select the **Site Server** node and then select **Tools >** **Restore**. This method launches the **Restore** **Site Server Wizard** directly.

**262** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

The second way is to select the **Restore site from backup** option on the **Site Server** **Options** dialog. This will launch the **Restore** **Site Server Wizard.**

**Notes:**

- The **Site Server Options** dialog is displayed if **SmartPlant Engineering** **Manager** cannot find a valid site **smartplantv4.ini** file when starting **SmartPlant Engineering Manager**.
- Restoring a site does not automatically restore the plants backed up with the site. You must restore the plants separately.
- You do not have to restore a site before restoring a plant. However, you must restore the site to get the data dictionary templates.

**Restore Site Server Wizard - Import From**

The **Restore Site Wizard – Import From** dialog** **allows you to browse to the site backup file you want to import.

**Import file** - Browse to the site backup file you want to import. This path must be in UNC format and contain no more than 255 characters.

**Oracle alias or SQL Server host** - Type the Oracle alias or SQL Server host name for the database the site will be imported into.

SmartPlant P&ID Setup and Customization Course Guide263 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Note:**

- If you leave the **Oracle alias or SQL Server host** box empty when you browse to the **Import file**, the software will display the value stored in the site backup file. However, if you are restoring the site to a different site server, you must type the Oracle alias or SQL Server host name for the database available to the computer on which you are restoring the site.

**System user** - Type a database system user name. This name does not have to be the database administrator user name, but this user must have system privileges.

**System password** - Type the database system password.

**Notes:**

- After you complete this page and select **Next**, the wizard obtains the database user names from the backup file and determines if they are existing users. If a database user exists, you must delete the site schema and site Data Dictionary schema manually.
- The Oracle instance on the computer to which you are restoring the site must contain matching tablespace names for all the schema users included in the import file. If any of the permanent or temporary tablespace names in the import file do not exist in this Oracle instance, you must create the correct tablespace types and names before continuing the site restoration.

**Restore Site Server Wizard - Site Server Information**

The **Restore Site Server Wizard - Site Server Information** dialog** **displays the type, name and date of the backup you have selected to restore and allows you to specify the path for the restored site.

**Backup type** - Displays the type of backup being restored. This field cannot be modified.

**264** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Backup date** - Displays the date the site backup was created. This field cannot be modified.

**Site server name** - Displays the name of the site being restored.

**Site server path** - Allows you to browse to a new location for the site server path.

Only the path can be modified. The .INI file name cannot be changed. This field is limited to 255 characters.

**Backup location** - Type or browse to the location where the site backup data is stored. This path was specified during the site backup process.

**Role template location** - Type or browse to the location where the role templates are stored. This path was specified during the site backup process.

**Remove plant structure information** - Check this option to remove all root item information from the restored site server. This option is useful for instances when you include a plant in a site backup and then delete the plant. If you try to restore the site after deleting the plant, an error message displays, indicating that the hierarchy information for the plant cannot be found. Use this option to avoid this situation.

**Note:**

- We recommend selecting a backup location that has plenty of available space because the Restore process generates a temporary folder in this backup location while the site data is being restored. This folder is removed when the process finishes.

**Restore Site Server Wizard – Administrative Privileges**

The **Restore Site Server Wizard - Administrative Privileges** dialog allows you to specify the user group that will have site administrative privileges for the restored site.

SmartPlant P&ID Setup and Customization Course Guide265 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Use local machine and domain groups** - Use this filter option when you want to choose an existing user group or domain that is accessible from your machine.

**Use site server and domain groups** - Use this filter option when you want to choose a user group or domain that is accessible from the site server machine.

**Site administrator user group** - Select the ellipsis button to display the **Select** **Groups** dialog box, which allows you to select the Windows user group you want to assign to this new role. The name of the SmartPlant role will be the same as the name of the selected user group.

**Notes:**

- If you do not already have a user access group created that you can use for site administration purposes, you can leave the wizard running while you use your operating system user access controls to create a group.
- You can change the user group assigned as the site administrator group after site creation.
- When you create or load plants in the site with the **Add the site** **administrator group to each plant created** option selected and then later change the **Site administrator user group**, the roles automatically created in the existing plants are not changed.
- You can also add users to or remove users from this group using your user access controls provided by your operating system, and then select **Tools** > **Refresh Users** to update the user access for the site.
- To automatically assign this site administrator user group as a role in each new plant created or loaded in this site, after creating the site, go to the **Site** **Properties** > **General tab** and select the **Add the site administrator group** **to each plant created** option. Doing this saves you the step of creating a new role to grant these users access to the new plant.

**Restore Site Server Wizard – Finish**

The **Restore Site Server Wizard - Finish** dialog displays all the settings that you have defined to restore the site server. Review these settings carefully. If you are satisfied with the settings, select **Finish**. Otherwise, click **Back** to change one or more of the settings. As the restoration progresses, the status bar displays updated information. The wizard automatically closes after the restore process completes successfully.

**266** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Restore Plant Structure Wizard**

To restore a plant structure from backup, select the **Plant Structure** node and select **Tools > Restore**.

**Note:**

- You do not have to restore the site before restoring a plant to its original site or to a new site.

**Restore Plant Structure Wizard - Import From**

The **Restore Plant Structure Wizard - Import From** dialog allows you to select the type of plant restoration and to browse to the plant structure backup file you want to import.

SmartPlant P&ID Setup and Customization Course Guide267 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Plant structure restoration types** - Allows you to select the type of plant structure you want to restore.

- **Non-Workshare plant structure** - Allows you to select a plant structure backup file ending in *_p.zip.
- **Host plant structure** - Allows you to select a host backup file ending in *_m.zip.
- **Satellite plant structure** - Allows you to select a satellite backup file ending in
- _s.zip.
- **Plant and projects** - Allows you to select a plant backup file ending in *_a.zip.

**Import file** - Browse to the plant structure backup file you want to import. This path must be in UNC format and the backup file type must match the restoration type selected above. This field is limited to 255 characters.

**Oracle alias** - Type the Oracle alias for the database the plant structure will be imported into. This option appears only if the site is using Oracle.

**SQL Server host** - Type the SQL Server host name for the database the plant structure will be imported into. This option appears only if the site is using SQL

Server.

**Note:**

- If you leave the **Oracle alias** or** SQL Server host** boxes empty when you browse to the **Import file**, the software will display the value stored in the plant backup file. However, if you are restoring the plant to a different site server, you must type the Oracle alias or SQL Server host name for the database on the computer to which you are restoring the plant.

**System user** - Type a database system user name. This name does not have to be the database administrator user name, but this user must have system privileges.

**System password** - Type the database system password.

**Notes:**

- After you complete this page and select **Next**, the wizard obtains the database user names from the backup file and determines if they are existing users. If a database user exists, you must delete the plant structure schema, plant structure Data Dictionary schema, and associated application schemas

manually.

- The Oracle instance on the computer to which you are restoring the plant must contain matching tablespace names for all the schema users included in the import file. If any of the permanent or temporary tablespace names in the import file do not exist in this Oracle instance, you must create the correct tablespace types and names before continuing the plant restoration.

**268** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Restore Plant Structure Wizard - Plant Structure Information**

The **Restore Plant Structure Wizard - Plant Structure Information** dialog displays the type, name and date of the backup you have selected to restore and allows you to choose what data to restore.

**Backup type** - Displays the type of backup being restored. This field cannot be modified.

**Backup date** - Displays the date the backup was made. This field cannot be modified.

**Plant structure name** - Displays the name of the plant structure being restored. This field cannot be modified.

**Plant structure restorable data** - Allows you to select what plant data to include in the restoration. You must select one of these options before you can move to the next page in the wizard.

- **Plant structure data** - Restores the plant schema, plant data dictionary and plant structure storage files, restores all schemas pertaining to applications associated with the plant structure at the time the backup was made, and updates the active site with the root item, database connection information and plant structure roles.
- **SmartPlant P&ID reference data** - Restores the SmartPlant P&ID reference data that was backed up with the plant structure. This option is not available if no SmartPlant reference data was backed up with the plant structure.
- **SmartPlant Electrical reference data** - Restores the SmartPlant Electrical reference data that was backed up with the plant structure. This option is not available if no SmartPlant Electrical reference data was backed up with the plant structure.

SmartPlant P&ID Setup and Customization Course Guide269 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Restore Plant Structure Wizard - Paths**

The **Restore Plant Structure Wizard - Paths** dialog allows you to specify paths for the files being restored.

**Restore files and locations** - Displays the parameters and their current path settings as defined in the plant schema being restored. The items in the **Schema** and the **Setting** columns cannot be modified. To modify a value in the **Location** column, select the path, then type or browse to the path you want.

**Note:**

- We recommend selecting a backup location that has plenty of available space because the Restore process generates a temporary folder in this backup location while the plant data is being restored. This folder is removed when the process finishes.

**Restore Plant Structure Wizard - Finish**

The **Restore Plant Structure Wizard - Finish** dialog** **displays all the settings that you have defined to restore the plant structure. Review these settings carefully. If you are satisfied with the settings, select** Finish**. Otherwise, select** Back** to change one or more of the settings. As the restoration progresses, the status bar displays updated information. The wizard automatically closes after the restore process completes successfully.

**270** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

SmartPlant P&ID Setup and Customization Course Guide271 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant Reference Data Synchronization**

**Manager**

SmartPlant Reference Data Synchronization (RDS) Manager provides tools for comparing, synchronizing, and managing reference data (metadata) across multiple plants. This application is especially useful when you need to maintain a central set of reference data for all the plants across a site without having a network or database connection between plants.

The reference data synchronization process involves three steps:

1. Creating an RDS package that contains the reference data from the source plant.
2. Comparing the RDS package to the target plant reference data.
3. Synchronizing (merging) the RDS package into the plant and application reference data at the target.

**Note:**

- After synchronizing the reference data across the plants, you must use the Update Drawings functionality in SmartPlant P&ID Drawing Manager to synchronize the drawings in each plant with the updated reference data.

**Understanding the RDS Interface**

The Reference Data Synchronization Manager user interface consists of two main areas: one for selecting the source and target information, and the other for viewing the status and results of each command.

**272** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Source zipped package** - Allows you to select the reference data package created at the source plant. The contents of this package will be compared with the reference data at the target plant.

**Target plant name** - Allows you to select the plant you want to compare to the source reference data package. If the plant you want does not appear in the dropdown list, select the button and select the site server .INI file for the site containing the desired plant.

**Status and results** - Displays the tasks involved for the current command. The items displayed change depending on the current processing status.

**Creating an RDS Package**

An RDS package is a data package produced or extracted from a plant for merging into another plant. To create this package, use the **File > New Package** command.

The RDS package contains the following data for both SmartPlant P&ID and SmartPlant Electrical:

- Data dictionary version information for each schema.
- Plant and application codelist.
- Plant and application data dictionary item attribution.
- Application filters belonging to the plant.
- Application layouts.
- Display set options for filtered printing.
- Format options.
- Format types and formats.
- Rules file, styles file, insulation specifications, report templates, symbols and toolbar shortcuts, and borders.

The RDS package contains the following data just for SmartPlant P&ID:

- Auto gap and symbology options.
- Heat trace options.
1. Select **File > New Package**.
2. On the **New Package** dialog box, in the **Zipped package** field, specify a path and a file name for the zip file.
3. Specify the plant by selecting the ellipsis button to navigate to the **smartplantv4.ini** file of the site that includes the relevant plant. From the **Plant** **name** list, select the desired plant.

SmartPlant P&ID Setup and Customization Course Guide273 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- The source plant must be a top-level plant (not a project or satellite) to create an RDS package.
- The source and target plants must both be from the current version of SmartPlant Engineering Manager.
- All referenced filters must belong to the plant (filters must be created under Plant Folders in Filter Manager, not created under My Folders). If any of the data to be packaged has references to filters not owned by the plant, the package creation will fail. In other words, filters in My Folders at the source will not be synchronized with the target.
- For SmartPlant P&ID, only custom symbol toolbars created in Catalog Manager are included. User- specific toolbar shortcuts (created under My Catalog in SmartPlant P&ID) at the source will not be synchronized with the target.
- SmartPlant P&ID toolbar shortcuts must have the same share name in path and target. The shortcut definition is recorded and used to re-create the link in an alternate location.
- Saved views at the source plant are not included in the RDS package. Instead, create filters and layouts at the source and reference them with a view at the target plant.

**Comparing Reference Data**

The comparison process compares the packaged reference data from the source with the plant and application reference data at the target. All compares are based on name except for the codelist entries, which are based on ID. For attributes to be considered the same, they must have the same attribute name and the same data type definition (including column size for strings).

1. In the **Source zipped package** field, select the RDS package created at the source plant.
2. For **Target plant name**, select the ellipsis button to navigate to the **smartplantv4.ini** file of the site that includes the relevant plant, and then from the **Target plant name** list, select the desired plant.
3. Select **File** > **Compare**.
4. View the compare results in the **Status and results** window.

**Notes:**

- The source and target plants must both be from the current version of SmartPlant Engineering Manager.

**274** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- Use the **Tools > Create Report** command to view a comparison summary report in Microsoft Excel format. For more information, see Create Report Command.
- Items at the target that are not found in the source package are not reported in the comparison report.
- For more information, please refer to *Reference Data Synchronization* *Manager Help topic: Comparing Reference Data*.

**Synchronizing Reference Data**

The synchronization process merges the packaged reference data from the source into the plant and application reference data at the target. You cannot synchronize selected parts of the packaged reference data; you must synchronize all or nothing.

The synchronization process initiates transactions for each schema that will be modified. If the merge fails, the transactions are rolled back and any added columns are dropped. The reference data files are merged last. All synchronization operations are logged as generic text strings.

1. In the **Source zipped package** field, select the RDS package created at the source plant.
2. For **Target plant name**, select the ellipsis button to navigate to the **smartplantv4.ini** file of the site that includes the relevant plant, and then from the **Target plant name** list, select the desired plant.
3. Select **File** > **Synchronize**. (The **File** > **Synchronize** command is not enabled until the comparison process between the selected source package and target plant is successfully completed.)
4. View the synchronization results in the **Status and results** window.

**Notes:**

- A plant cannot be synchronized if the comparison process returned any items with errors.
- You must have site administrator or full access privileges at the target plant before you can synchronize the reference data.
- The synchronization process does not replace data at the target that is not in the source package.
- If the synchronization fails, you must extract any original reference data files from the archive to undo the change.
- Filters that exist in the source and target plants with different UIDs may not have identical names. The filter names must be unique in the source and target for synchronization to proceed successfully.
- During the synchronization process, RDS Manager logs synchronization operations and archives modified reference data files to files. These files are SmartPlant P&ID Setup and Customization Course Guide275 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* in the Reference Data Synchronization Logs folder created in the target plant folder.

- For more information, please refer to *Reference Data Synchronization* *Manager Help topic: Synchronizing Reference Data*.

**Viewing Status and Results**

The commands on the **View** menu allow you to view the status and results of the package creation, comparison, and synchronization steps involved in the reference data synchronization process.

**Show New Package Status Command**

The **View > Show New Package Status** command displays the progress of the tasks involved in creating the source package.

**Show Comparison Status Command**

The **View > Show Comparison Status** command displays the progress of the tasks involved in the comparison process.

**Show Comparison Results Command**

The **View > Show Comparison Results** command displays the results of the comparison process, indicating the number of new items, changes, and errors in each schema.

**Show Synchronization Status Command**

The **View > Show Synchronization Status** command displays the progress of the tasks involved in the synchronization process.

**Show Synchronization Results Command**

The **View > Show Synchronization Results** command displays the results of the synchronization** **process.

**Reports and Log Files**

The commands on the **Tools** menu allow you to create and view comparison summary reports, and view log files generated during the synchronization process.

**276** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Create Report Command**

The **Tools > Create Report** command creates a comparison summary report in Microsoft Excel format. The **Create Report** dialog box allows you to specify a name and location for the report. Each report consists of three pages: Plant Data Summary, PID Data Summary, and Electrical Data Summary.

You are prompted to view the report when the report finishes compiling. To view the report later, use the **Tools > View Report** command.

**Note:**

- This command is not available until you have successfully run the comparison process.

**View Report Command**

The **Tools** > **View** **Report** command displays the comparison summary report in Microsoft Excel. You must have generated a report using the Tools > Create Report command before this command becomes available.

**View Log File Command**

The** Tools > View Log File** command opens the current log file. The log files are in the **Reference Data Synchronization Logs** folder under the target plant folder.

SmartPlant P&ID Setup and Customization Course Guide277 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Copying a Plant Structure**

The Copy Plant Structure procedure allows you to make a copy of an existing plant structure and use this copy as a template to create new plant structures in your site. It will be possible to copy plants from an MS SQL Server site to on Oracle site and vice versa and between different versions of Oracle and MS SQL.

The **Copy Plant Structure** procedure has three stages: **Save Plant Structure**, **Load** **Plant Structure**, and **Finish Load Plant Structure Processing**. The first two are performed in SmartPlant Engineering Manager, and the last one is performed in SmartPlant P&ID Drawing Manager.

**Save Plant Structure Command**

The **File > Save Plant Structure** command in **SmartPlant Engineering Manager** opens the **Save Plant Structure** dialog box and allows you to save the plant structure you want to copy.

**Save Plant Structure Dialog Box**

The **Save Plant Structure** dialog box allows you to save a plant structure to a designated location. You can also select the associated applications to be copied with the plant structure.

**Name -** Displays the plant structure name.

**Export plant to location -** Specifies the path and name required to save the plant structure.

**Include applications -** Select a check box to include the application in the save. The following options are available:** **

**278** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- **SmartPlant P&ID**
- **SmartPlant Electrical**
- **SmartPlant Instrumentation**

**Revision and version options -** Depending on the applications selected, you can also save revisions or versions as appropriate for the selected applications. ** **

- **Include SmartPlant P&ID revisions** - When saving SmartPlant P&ID, select this check box to include revision data**.**
- **Include associated SmartPlant P&ID versions** - When saving SmartPlant P&ID, select this check box to save version information, which includes saved drawings. This option is only available if you have selected to include SmartPlant P&ID revisions.
- **Include SmartPlant Electrical revisions** - When saving SmartPlant Electrical, select this check box to include revision data**.**

**Saving a Plant Structure**

1. In **SmartPlant Engineering Manager**, in the tree view, right-click the plant structure you want to save, and on the shortcut menu, select **Save Plant Structure**.
2. On the **Save Plant Structure** dialog box, next to the **Export plant to location** field, browse to where you want to save the plant structure.
3. Select **OK**.

**Load Plant Structure Command**

The **File > Load Plant Structure** command in **SmartPlant Engineering Manager** opens the **Load Plant Structure** **Wizard**.

**Note:**

- You can also right-click the **Plant Structures** root in the Tree view and then select **Load Plant Structur**e.

SmartPlant P&ID Setup and Customization Course Guide279 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Load Plant Structure Wizard**

The **Load Plant Structure** **Wizard** steps you through loading a plant structure that was previously saved as a .zip file created using the **Save Plant Structure** command.

**Load Plant Structure Wizard - Source Path**

The **Load Plant Structure Wizard - Source Path** dialog allows you to specify the location of the plant structure files for the copied plant or project.

**Zip file of plant** – Specifies the path to the location of the plant structure you want to load.

**Load Plant Structure Wizard - Plant Name**

The **Load Plant Structure Wizard - Plant Name** dialog allows you to view and define a name and description for the new plant root item.

**280** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Plant group type** - Displays the plant group type of the root item.

**Name** - Displays the name of the copied plant structure.

**Notes:**

- You must change this name if it is not unique in the site to which you are copying the plant structure.
- This name is limited to 80 characters and cannot contain any of the following characters: ~ ` ! % ^ & * ( ) - + = { } \ / ; : ‘ ” < > , . ? |

**Description** - Type a description for the plant (optional). The description is limited to 240 characters.

**Load Plant Structure Wizard - Associate Applications**

The **Load Plant Structure Wizard - Associate Applications** dialog allows you to select the applications you want to associate with the selected plant structure. Any combination can be made, that is, one, two, or all three applications can be selected. This selection determines the order in which the software opens the wizard pages. The wizard pages and the options displayed in the pages are application-specific and depend on the order in which you select the applications.

---

**Applications to associate -** Allows you to specify which applications you want for the copied plant structure. You do not have to select all applications that were previously associated with the plant. ** **

**Note:**

- Only those applications that were associated when the Save plant structure was performed will be available in this dialog. You may associate an

additional application after the **Load Plant Structure** has completed.

SmartPlant P&ID Setup and Customization Course Guide281 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Keep unique identifiers from source** - Select to specify that the identifiers for items in the source plant will be maintained in the target plant. The option to keep existing identifiers is useful when using Load Plant Structure to update a plant with data that was modified externally and then re-publishing the plant data to SmartPlant Foundation without having to re-correlate the items after publishing for the first time; for example, when getting modified plant data more than once from a subcontractor or other source where it is necessary for integration to continue working with that data. Clear this check box to generate new identifiers when creating the target plant, such as where you use the source for conveniently creating the target data set.

**Load Plant Structure Wizard - Target Paths**

The **Load Plant Structure Wizard - Target Paths** dialog defines the paths to the storage locations relevant for the plant data and drawings.

**Plant structure path** - Specifies the path to the storage location for the plant data and the drawing files. You must create the plant structure share before running this wizard, using the form \\siteserver\sitename\plantname. The wizard will create the

‘plantname’ folder if it does not already exist.

**Backup location** - Specifies the path to the shared storage folder for backing up the plant files.

**Note:**

- The paths for the plant structure and backup location must use the Universal Naming Convention (UNC) format, cannot exceed 255 characters, and cannot contain any of the following characters: ~ ` ! % * ( ) { } / ; : ’ ” < > , ? |.

**Seed location** - Specifies the location of your plant scripts and resources, which are required for successful loading of the plant. The default seed location is the SmartPlant Engineering Manager home folder.

**282** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Save seed location as the preferred setting** - Select to make the current seed location your default setting.

**Important**

- Select a backup location outside the **Plant structure path** to avoid recursive backups being stored in a single backup file. For example, if the **Plant** **structure path** is *\\siteserver\sitename\plantname*, do not set the backup location for plantname to *\\siteserver\sitename\plantname\backups*.
- Be sure the backup location has plenty of available space because the restore process generates a temporary folder in this backup location while the plant data is being restored. This folder is removed when the process finishes.

**Load Plant Structure Wizard - Database Information**

The **Load Plant Structure Wizard - Database Information** dialog defines the database for your plant structure.

**Database type** - Displays the database type used by the site in which the plant will be created.

**Oracle alias** - Type the name of the Oracle Net Service name as defined by your database administrator. *This option appears only if Oracle is selected as the database* *type.*

**Database node** - Type the Node Name of the server on which the SQL Server database resides. *This option appears only if SQL Server is selected as the database* *type.*  This node name cannot contain any spaces.

**System user** - Type a database system user name. This name does not have to be the database administrator user name, but this user must have sysadmin privileges (for SQL Server) or the DBA role (for Oracle).

**System password** - Type the system password.

SmartPlant P&ID Setup and Customization Course Guide283 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Load Plant Structure Wizard - Plant Schema**

The **Load Plant Structure Wizard - Plant Schema** dialog allows you to specify the tablespace and user name for the plant schema.

**Database type** - Displays the database type used by the site in which the plant will be created.

**Oracle service/alias** - Displays the Oracle Net Service alias specified previously in which the plant will be created. *This option appears only if Oracle is selected as the* *database type.*

**Database server** - Displays the Node Name of the server on which the SQL Server database resides. *This option appears only if SQL Server is selected as the database* *type.*

**Database name** - Select the name of the SQL Server database in which the plant will be created. *This option appears only if SQL Server is selected as the database type.*

**Oracle tablespace** - Select the default Oracle tablespace name for your plant database. These tablespaces were defined when the database administrator created the default database instance using Oracle Database Assistant. *This option appears* *only if Oracle is selected as the database type.*

**Oracle temp tablespace** - Select the default Oracle temporary tablespace name for your plant database. If this list is empty, contact your database administrator. *This* *option appears only if Oracle is selected as the database type on the previous page.*

**Database username** - Type the user name you want to use for the plant schema user. This value, which must be unique in the database, defaults to the plant name that you specified earlier.

**Database password** - Type the password for the plant schema user. We recommend using the database user name specified above as this password.

**Confirm password** - Re-type the password for the plant schema user.

**284** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Load Plant Structure Wizard - Plant Data Dictionary**

The **Load Plant Structure Wizard – Plant Data Dictionary** dialog allows you to specify the tablespace and user name for the plant data dictionary. The data dictionary contains database tables, database table attributes, item types, select list definitions, and select list entries.

**Database type** - Displays the database type used by the site in which the plant will be created.

**Oracle service/alias** - Displays the Oracle Net Service alias specified previously in which the plant will be created. *This option appears only if Oracle is selected as the* *database type.*

**Database server** - Displays the Node Name of the server on which the SQL Server database resides. *This option appears only if SQL Server is selected as the database* *type.*

**Database name** - Displays the name of the SQL Server database in which the plant will be created. *This option appears only if SQL Server is selected as the database* *type.*

**Oracle tablespace** - Select the default Oracle tablespace name for your plant database. These tablespaces were defined when the database administrator created the default database instance using Oracle Database Assistant. *This option appears* *only if Oracle is selected as the database type.*

**Oracle temp tablespace** - Select the default Oracle temporary tablespace name for your plant database. If this list is empty, contact your database administrator. *This* *option appears only if Oracle is selected as the database type on the previous page.*

**Database username** - Type the user name you want to use for the plant data dictionary user. This value, which must be unique in the database, defaults to the plant name that you specified earlier, with the letter “d” appended.

SmartPlant P&ID Setup and Customization Course Guide285 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Database password** - Type the password for the plant data dictionary user. We recommend using the database user name specified above as this password.

**Confirm password** - Re-type the password for the plant data dictionary user.

**Load Plant Structure Wizard - SmartPlant P&ID Schema**

The **Load Plant Structure Wizard - SmartPlant P&ID Schema** dialog defines the plant schema database information for your SmartPlant P&ID plant structure.

**Important**

- This screen is only displayed if the copied plant structure was previously associated with SmartPlant P&ID on the **Associate Applications** wizard page.

**Oracle service/alias** - Specifies the Oracle Net Service name for the plant database. *This value is carried forward from the plant structure definition page and* *appears only if using Oracle.*

**Database server** - Displays the Node Name of the server on which the SQL Server database resides. *This option appears only if using SQL Server.*

**Database name** - Displays the name of the SQL Server database used by the plant to which the application is being associated. *This option appears only if using SQL*

*Server.*

**Oracle tablespace** - Select the default tablespace name for your application schema. These tablespaces are defined when the database administrator created the default database instance using Oracle Database Assistant.

**Oracle temp tablespace** - Select the default temporary tablespace name for your application schema. The temporary tablespace was defined when the database **286** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

administrator created the temporary database instance using Oracle Database Assistant. If this list is empty, contact your database administrator.

**Database username** - Type the user name you want to use for the SmartPlant P&ID

schema user. This value, which must be unique in the database, defaults to the plant name that you specified earlier, with the letters “pid” appended.

**Database password** - Displays the default database password, as set by your database software. You can change the password for the SmartPlant P&ID database user by typing a new password in the **Database password** field. We recommend using the default SmartPlant P&ID user name defined above as this password.

**Confirm password** - Re-type the password.

**SmartPlant P&ID reference data path** - Taken from the **Plant Structure Path** as set previously in the **Target Paths** screen of the wizard. To select a different path, type the required path or select the ellipsis button to browse to the reference data path for the application options. This field is limited to 255 characters.

**Load Plant Structure Wizard - SmartPlant P&ID Data Dictionary**

The **Load Plant Structure Wizard - SmartPlant P&ID Data Dictionary** dialog allows you to enter database information for the SmartPlant P&ID application data dictionary. The tablespaces and other database information displayed in the dropdown lists are based on the database used in the plant structure creation.

**Application to associate** - Displays the application being associated to the plant. This value is carried forward from the previous page.

**Schema type** - Displays the schema type being created. This value is carried forward from the previous page.

SmartPlant P&ID Setup and Customization Course Guide287 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Oracle service/alias** - Specifies the Oracle Net Service name as defined by your database administrator. *This value is carried forward from the previous page and* *appears only if using Oracle.*

**Database server** - Displays the Node Name of the server on which the SQL Server database resides. *This option appears only if using SQL Server.*

**Database name** - Displays the name of the SQL Server database used by the plant to which the application is being associated. *This option appears only if SQL Server is* *selected as the database type.*

**Oracle tablespace** - Select the default tablespace name for your application data dictionary database. These tablespaces are defined when the database administrator created the default database instance using Oracle Database Assistant.

**Oracle temp tablespace** - Select the default temporary tablespace name for your application data dictionary database. The temporary tablespace was defined when the database administrator created the temporary database instance using Oracle Database Assistant. If this list is empty, contact your database administrator. *This option* *appears only if using Oracle.*

**Database username** - Type the user name you want to use for the SmartPlant P&ID

Data Dictionary user. This value, which must be unique in the database, defaults to the plant name that you specified earlier, with the letters “pidd” appended.

**Database password** - Type the password for the application data dictionary user. We recommend using the application data dictionary user name defined in the field above as this password.

**Confirm password** - Verify the password by retyping it.

**Load Plant Structure Wizard – Summary**

The **Load Plant Structure Wizard - Summary** dialog displays the settings you defined for loading your plant structure. Review these settings carefully. If you are satisfied with the settings, select **Finish**. Otherwise, select **Back** to change one or more of the settings. When the Load Plant Structure process has finished, you should get a message indicating the successful completion of the operation.

**288** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Finish Load Plant Structure Processing Command**

The **Tools > Finish Load Plant Structure Processing** command in **SmartPlant** **P&ID Drawing Manager** renames all item IDs, of all the drawings, of the plant that you have copied and loaded using the **Load Plant Structure** **Wizard**.

**Important**

- This operation can only be carried out by an** **administrator with Full Control Permissions to SmartPlant® P&ID Options Manager.**  **
- It is not possible to open the copied plant structure in SmartPlant P&ID or Drawing Manager before completing this process. ** **
- When loading a plant for which the **Keep unique identifiers from source** check box on the **Associate Applications** page of the **Load Plant Structure** **Wizard** was selected, and where the name of the loaded plant is the same as the source plant name, this command is not required and is therefore disabled. ** **

**Running the Finish Load Plant Structure Processing**

**Command**

1. After opening the plant in Drawing Manager, the following message will be displayed:
2. Select **OK**.
3. Notice that all the drawings will have a red lock on them.

SmartPlant P&ID Setup and Customization Course Guide289 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select **Tools > Finish Load Plant Structure Processing**.
2. The following message will be displayed:
3. Select **OK**.
4. You will see the Finish Load Plant Structure Processing dialog box.

**Note**:

- The process is complete when all drawings have a green check mark.

**290** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Data Dictionary Template Comparison Utility**

The SmartPlant Data Dictionary Template Comparison Utility allows you to determine the differences between two data dictionary template files or between one data dictionary template file and the corresponding data dictionary/schema from a plant. You cannot compare between two existing plants or between a site template and an existing site. To run the utility select **Start > All Programs > Intergraph** **SmartPlant Engineering Manager > Data Dictionary Template Comparison** **Utility.**

**Notes:**

- The comparison process is not a data model compare, but rather a database compare in which each template is compared table by table.
- The source and target schema types must match.
- The source and target hierarchies must match.
- You can compare templates created in the current version of SmartPlant Engineering Manager with templates or plants created in the same version only.

The **Data Dictionary Template Comparison Utility** user interface consists of two main areas: one for selecting the source and target information, and the other for viewing the comparison results.

SmartPlant P&ID Setup and Customization Course Guide291 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **Source**

**Template path** - Specify the path to the template you want to use as the source.

**Schema type** - Displays the type of schema based on the selected template.

**Target**

- **Data dictionary template** - Select this option to compare the source template with another template.
- **Existing plant** - Select this option to compare the source template with an existing plant’s data dictionary.

**Template path** **-** Specify the path to the template you want to use as the target. *This* *option is available only if you select the **Data dictionary template** option above.*

**Plant name** - Select the plant you want to compare against the source template selected above. Use the **Browse** button to select the site .INI file containing the plant you want to select. *This option is available only if you select the **Existing plant** option* *above.*

**Results** - Displays an overview of the differences between the source and target, categorized as follows:

- **Source Superset** - Items found in the source template and not in the target.
- **Target Superset** - Items found in the target but not in the source.
- **Mismatched Values** - Items found in both the source and target, but with differing values.

**Compare** - Runs the comparison process.

**Create Report** - Exports the complete comparison results to a Microsoft Excel file.

The standard **Save** dialog box allows you to specify the path for this file.

**292** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant P&ID Utilities**

SmartPlant P&ID delivers several utilities to help you manage your data.

**Check Item Paths Utility**

The Check Item Paths Utility checks the folder paths in the file names of all active plant items and reports paths that do not point to the current catalog. This macro details invalid paths in a log file named CheckFilePathsFor_YourPlant.log in the Temp folder.

To check the symbol file paths in a Plant:

1. Open a drawing in **SmartPlant P&ID**.
2. Select **Tools** **> Custom** **Commands**.
3. On the **Custom Command** dialog box, browse to ~ *Program Installation* *Folder*\SmartPlant\P&ID Workstation\bin and double-click

**CheckFilePathCmd.dll**.

**Check Symbols Utility**

The Check Symbols Utility checks the specified plant catalog for symbols that contain:

- Graphics other than: igArc2d, igBalloon, igBoundary2d, igBsplineCurve2d, igCircle2d, igDimension, igEllipse2d, igEllipticalArc2d, igLeader, igLine2d, igLineString2d, igTextBox, and igPoint2d
- ConnectPoints with an incomplete connect point attribute set.
- Duplicate Connect Point Keys.
- Incorrectly ordered (not sequential) Connect Point Keys.
- Piping/Signal/Ducting points (if the symbol is an OPC symbol).
- Property ‘UsePhotographicStyleScale’ = True (this value is not valid for symbols in SmartPlant P&ID)

**Notes:**

- You should run this utility at least once on all plants. After running this initial check, run this utility each time symbols are edited in Catalog Manager.
- Results are written to the log file named **CheckSymbolsFor_ *PlantName*.log** in the Temp folder.
- This utility, delivered to the ~ *Program Installation Folder** **

**\SmartPlant\P&ID Workstation\bin** folder, must be run in the **SPPIDAutomation.exe** environment.

SmartPlant P&ID Setup and Customization Course Guide293 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

To check symbols in a Plant:

1. Start **Drawing** **Manager**.
2. Select **File** > **Open** **Database**
3. Select the Plant containing the reference data that you wish to check. Doing this sets the ActivePlant value for the utility.
4. Select **Open**
5. Close **Drawing** **Manager**.
6. Double-click on the **SPPIDAutomation.exe** in the **~ *Program Installation***

***Folder*\SmartPlant\P&ID Workstation\bin** folder to start the **SPPID**

**Automation** application.

**Note:**

- If the SPPID Automation application does not open a document by

default, complete the following steps before proceeding:

1. Select **File** > **New**.
2. Select **Document** in the **Create** **new** group.
3. Select **Normal.spp** from the list of **templates**.
4. Select **OK** to open a new document.
5. Select **Tools** > **Custom** **Commands**
6. Select **CheckSymbolsCmd.dll**.
7. Select **Open**.
8. Select **OK** or view the log file for detailed information.

**294** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Clean Data Utility (DelOrpModItems.dll)**

The **Clean Data Utility** removes orphaned records that occur when drawings are upgraded.

**Note:**

- This utility, sometimes called ***Delete Orphan Model Items***, is run from the drawing environment; **inside a blank drawing**.

It can be used for the following tasks:

- **Database Report** Generates a report, written to the **DBCleanup.txt** file in your Temp folder, which helps you decide if a manual cleanup alternative exists before using the **Entire Database** command to delete the problems from the database.
- **Entire Database** Removes orphaned records from the plant database.

**Note:**

- Use this only after running Database Report, *examining* the report, and manually cleaning up as many items in the database as necessary.
- **Model Items** Opens the **Delete Orphan Model Items** dialog box that allows you to find and delete any model item in the database that does not have a corresponding entry in the T_Representation table.
- **OPCs** Finds and repairs off-page connectors (OPCs) that have lost their associations with the OPC with which they were originally paired. If one OPC has lost the identity of its mated OPC, but the mated OPC still has the identity of the first OPC, then the OPC is considered repairable. To repair the OPC, the utility updates the identity information for the first OPC. However, if both the OPC and its mated OPC have lost the identities of each other, then the OPCs are considered non-repairable, and you are given the option to delete them.
- **Gaps** Repairs and updates gaps in the representation record with the proper item type. On rare occasions, you will need to perform this operation; only perform if you have gapping problems in your drawings.

SmartPlant P&ID Setup and Customization Course Guide295 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Running the Clean Data Utility**

To avoid data corruption, complete the following steps in the sequence presented. The buttons on this utility are arranged in the proper sequence.

1. In SmartPlant P&ID, open **a blank drawing.**
2. Select **Tools > Custom Commands** to open the **Custom Commands** dialog box.
3. On the **Custom Commands** dialog box, browse to the ~ *Program Installation* *Folder*\SmartPlant\P&ID Workstation\bin folder and double-click **DelOrpModItems.dll**.
4. On the **Clean Data** dialog box, select **Database Report**.
5. The results are written to the **DBCleanup.txt** file in your Temp folder.

This report helps you decide if a manual cleanup alternative exists before using the **Entire Database** command to automatically delete the problems from the database.

1. After examining the report and performing any manual database clean up, select **Entire Database** to automatically delete the problems from the database. Any messages generated are written to the **DBCleanup.txt** file.

**296** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. On the **Clean Data** dialog box, select **Model Items**.
2. On the **Delete Orphan Model Items** dialog box, select each model item type from **Item Type Names** list to see if any orphan items exist in the database.

**Item Type Names** - Allows you to choose the type of orphaned model items that you want to display in the **Item** list.

**Delete** - Removes the orphan items selected in the **Item** list from the plant database.

**Delete All** - Selects and deletes all the orphan model items of the type specified in the **Item Type Names** list.

**Note:**

- Log messages are placed in **SPDelOrpModItems.log** file in the folder assigned to the TEMP environment variable. The log file contains

information about deleted items including the item type and SP_ID

number.

1. Select **Close** to return to the **Clean Data** dialog box.

SmartPlant P&ID Setup and Customization Course Guide297 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. On the **Clean Data** dialog box, select **OPCs**.
2. On the **Repair OPCs** dialog box, choose either repairable or non-repairable from the **OPC Type** list. Repairable OPC pairs retain one link out of two between the mates. Non-repairable OPC pairs retain neither link.
3. Choose the OPC pair you are interested in from the **OPC** list, and select **Fix** if it is a repairable pair or **Delete** if it is non-repairable.
4. Select **Close** to return to the **Clean Data** dialog box.
5. If you are having an issue with gapping in your drawing, on the **Clean Data** dialog box, select **Gaps** to find and repair gaps that do not have the correct representation in the database.

**Warning:**

- We do not recommend using the **Gaps** command as part of your regular database constraint cleanup. If you find it necessary to run **Gaps**, you must be careful not to select ‘Yes’ to a symbol that is not a gap. If you select

‘Yes’ to any symbol other than a gap, you may corrupt your data set.

1. On the **Clean Data** dialog box, select **Close** to return to the design software.

**298** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Database Constraint Report**

The Database Constraint Report (**database constraint report.exe**) runs outside SmartPlant P&ID, and opens the **Database Constraint Exception Report Utility**.

**Note:**

- Running the Database Constraint Report will have absolutely no impact on your plants; it is a report only. The information generated by this utility will require running Constraint Utilities prior to upgrading.

**Running the Database Constraint Report**

1. Browse to the ~ *Program Installation Folder***\SmartPlant\P&ID**

**Workstation\bin** folder, and double-click **Database Constraint Report.exe**.

1. On the Database Constraint Exception Report Utility dialog box, select **Connect** **to Active Plant**.

**Note:**

- The utility runs the report on the active plant that you are connected to at the time. To run a report on another plant, connect to that plant using SmartPlant P&ID or one of its manager applications. ** **
1. After connecting to the database, select the **Create Database Constraint Report** button. This process may take several minutes, depending on the amount of data you have in your plant.
2. When complete, the utility automatically saves a copy of the report in the temp folder under your user profile and displays the file name ( ***plant name**** - **

**ConstraintExceptions.xls**) in the list box on the right side of the **Database** **Constraint Exception Report Utility** dialog box.

SmartPlant P&ID Setup and Customization Course Guide299 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. Exit the Database Constraint Exception Report Utility.
2. Open the report using Microsoft Excel, and review the report.

**Note:**

- Any discrepancies must be resolved before you can upgrade to the new version of SmartPlant P&ID. We recommend running this utility again until no discrepancies are reported.

**Database Constraint Report Results**

The Database Constraint Report file is a Microsoft Excel file containing several worksheets. The first sheet in the report is the Report Progress Messages, which contains a list of the constraint checks made and the number of violations detected for each constraint check. Each violation type appears on its own worksheet, with the name of the constraint violation displayed on the worksheet tab. Each worksheet also contains a list of drawings containing constraint exceptions, along with the name of the recommended constraint utility (usually in cell B1) to use in resolving the violation.

**Important**

- Before running any of the constraint utilities recommended by the database constraint report, run the Clean Data Utility (DelOrpModItems.dll) **inside a** **blank drawing**, and then run the **Database Constraint Report.exe** again.

Running Clean Data first decreases the number of exceptions listed in the report and lessens the amount of further manual data cleanup required.

- All constraint utilities, including the Clean Data utility (DelOrpModItem.dll), are run on an open drawing inside SmartPlant P&ID using **Tools > Custom** **Commands,**  and they are in the ~ *Program Installation Folder*

\SmartPlant\P&ID Workstation\bin folder. However, unlike all the other constraint utilities that run on a drawing-by-drawing basis, the Clean Data utility runs on the entire plant data set. If Clean Data is used to resolve any constraint violation, a drawing will not be specified in the report for this constraint violation nor will a utility name be listed at the top of the worksheet.

- Each plant may require a different set of utilities. Open each drawing listed in the database constraint report and run the recommended macros on the

drawing. You need to run only the macros listed in the report for that drawing.

**300** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Constraint Utilities**

The following constraint utilities help you correct any database constraint exceptions reported in the database constraint exception report. In general, each utility attempts to repair the constrain violation. However, in some cases the violation cannot be cleaned up by the utility and the item is band-aided in the drawing. This situation is noted and logged in each utility’s corresponding log file.

**Important**

- You must manually fix any band-aided item in a drawing by deleting the item and replacing it.
- Each constraint utility generates a log file, which records each action taken to correct the constraint violation. The log files are located at the path specified in your TEMP environment variable.

**cmdnotconnectedcomps.dll** - Repairs items that have a relationship to a PipeRun or SignalRun (sp_piperunid or sp_signalrunid are not null), but are not referenced by a corresponding connector. If the relationship cannot be repaired, you must delete it and replace it. ** **

**cmdLPCheck.dll** - Checks for LabelPersist records pointing to a representation that does not exist. If the graphical label is watching a graphic, the database is updated to match, thus repairing the LabelPersist. If the label cannot be repaired, the utility band aids it. You should delete and replace these band-aided items.

**cmdRepOIDCheck.dll** - Checks for symbol records with a null graphic OID. If the graphical symbol exists, the utility repairs the item by updating the database with its graphic OID value. If the graphical symbol does not exist, the utility sets the InStockpile flag = True to repair the item.

SmartPlant P&ID Setup and Customization Course Guide301 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **ConnectorItem12.dll** - Checks for connector records pointing to a symbol that does not exist. If the graphical connector is connected to a symbol, the utility repairs the connector by updating the database to match. If the connector cannot be repaired, the utility band aids it. You should delete and replace these band-aided items.

**OPCFK.dll** - Checks for OPC records with a partner that does not exist. If the graphical OPC exists, fix it. You should delete these items.

**PointIndexCheck.dll** - Checks for PipingPoint records and SignalPoint records with nonunique indices or point numbers, then repairs the item by deleting from the database whichever one of the duplicate points is not loaded into the cache.

**RelationshipOIDMacro.dll** - Checks for relationship records with a null graphic OID. If the graphical relationship indicator exists, the utility repairs the item by updating the database with its graphic OID value. If the graphical relationship indicator does not exist, the utility deletes the relationship from the database.

**RepairBadConnector.dll** - Checks for connectors with the same start and end objects and connectors with the wrong number of vertices. The utility band aids the graphical connector, which you should delete.

**RepairOrphanedNozzleCmd.dll** - Checks for the following situations:

- **Nozzle records without a Parent** - If the Nozzle graphic is not in the drawing, the utility repairs the nozzle by setting the Instockpile flag = True. If the Nozzle graphic is in the drawing, the utility tries to set either the SP_EquipmentID or SP_PartOfID based on the graphic relationship. The graphic parent must be an equipment or equipment component for the relationship to be re-established. If the relationship cannot be re-established, the utility band aids it. You should delete band-aided items.
- **Nozzles associated via SP_EquipmentID to a Parent in the stockpile** - If the Nozzle graphic is not in the drawing, the utility repairs the Nozzle by setting the Instockpile flag = True. If the Nozzle graphic is in the drawing, the utility band aids it. You should delete band-aided items. Upgrading SmartPlant P&ID

SmartPlant P&ID Installation and Upgrade Guide 55

- **Nozzles associated via SP_PartOfID to a Parent in the stockpile** - If the Nozzle graphic is not in the drawing, the utility repairs the Nozzle by setting Instockpile flag = True. If the Nozzle graphic is in the drawing, the utility band aids it. You should delete band-aided items.
- **Nozzles that are a Part of a Run** - The utility clears the SP_PartOfID attribute.

If the Nozzle graphic is not in the drawing, the utility repairs the Nozzle by setting the Instockpile flag = True. If the Nozzle graphic is in the drawing, the utility band aids it. You should delete band-aided items.

**RepairNullFileNameCmd.dll** - Checks for LabelPersist records with a null file name value.

**302** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

- If the number of LabelPersist records equals the number of SmartLabel objects locked to the watched symbol, the utility repairs the LabelPersist record by updating the filename value for the LabelPersist.
- If the number of LabelPersist records does not equal the number of SmartLabel objects locked to the watched symbol, then the utility band aids the watched symbol. You should delete band-aided items.
- For the remaining LabelPersist records with a null filename, if the graphic exists, the utility band aids it. You should delete band-aided items. If the graphic does not exist, the utility deletes the representation from the database.

SmartPlant P&ID Setup and Customization Course Guide303 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Duplicate Item Tag Report Utility**

The **Duplicate Item Tag Report Utility** helps you locate instruments, piping components and equipment that have the same item tag.

1. In SmartPlant P&ID, open the drawing.
2. Select **Tools > Custom Commands** to open the **Custom Commands** dialog box.
3. On the **Custom Commands** dialog box, browse to the **~ *Program Installation***

***Folder*\SmartPlant\P&ID Workstation\bin** folder, and double-click **duplicate** **tag report.exe**.

1. On the Duplicate Item Tag Report Utility dialog, select **Connect to Active Plant**.

The name of the active plant displays.

1. On the Duplicate Item Tag Report Utility dialog, select **Create Duplicate Item** **Tag Report**.
2. Select the button to exit the utility.
3. Open the report spreadsheet. The utility creates a Microsoft Excel spreadsheet in your user Temp folder. The spreadsheet is named ***plantname*DuplicateTags.xls**.

**304** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Find Invalid Break Labels Utility**

The **Find Invalid Break Labels Utility** (FindInvalidBreakLabelsCmd.dll) identifies illegal break labels in a plant that has been upgraded from a version of SmartPlant P&ID earlier than 2014. The utility identifies all break labels that have been placed at a location where there is no break in the pipe run.

Two options are available: the utility can be run on the current drawing or on all drawings in the plant. When run on the current drawing, the utility band aids all invalid break labels in the drawing and generates a log with the number of items that were band-aided in the drawing. When run for the entire plant, the utility generates a log with a list of the drawings in which invalid break labels were found and the number of invalid break labels in each drawing (drawings that do not have any invalid break labels are not listed). The log file is named **InvalidBreaklLabels.log** and is created in the default Temp folder. If the log file already exists, it is appended with any new information.

1. Open a drawing in SmartPlant P&ID.
2. Select **Tools > Custom Commands**.
3. On the Custom Command dialog box, browse to ~ *Program Installation Folder*

\SmartPlant\P&ID Workstation\bin and double-click

**FindInvalidBreakLabelsCmd.dll**.

1. On the Find Invalid Break Labels dialog box, select one of the following options:
- **Current drawing** - Band aids invalid break labels in the current drawing and generates a log.
- **Entire plant** - Searches in all drawings in the plant, including the current drawing and generates a log of all drawings with invalid break labels. With this option, any invalid break labels that exist in the current drawing are not band-aided.
1. After running the utility on an individual drawing, you can repair invalid break labels by creating property breaks in the pipe runs where labels are located or you can delete the labels if not needed. Fixing an invalid break label by creating a property break does not remove the band-aiding.

To fix the band-aiding for an invalid break label, break the pipe run, delete the bad label, and place a new break label on the pipe run break. Alternatively, if the break is redundant, just delete the bad label.

SmartPlant P&ID Setup and Customization Course Guide305 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Notes:**

- If any assemblies with break labels were created prior to upgrade, we recommend checking these assemblies for invalid break labels. To do this, create a new drawing, place the desired assemblies in the drawing, and then run the FindInvalidBreakLabelsCmd command on the current drawing. After upgrade it is also recommended to run this command on a drawing before creating any new assemblies from that drawing that include break labels.
- During the search operation, it is not possible to perform any other activities in SmartPlant P&ID. On completion of the search, a message displays indicating that the search is complete and allows you to view the log file if desired.

**306** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Repair Relationship Indicators Utility**

The Repair Relationship Indicators utility (RepairRelIndCmd.dll) processes all graphic connections on the active drawing and verifies all relationship indicators in the graphic file and in the database. If any relationship indicator errors are found, they are reported. You can then use this utility to automatically repair any of the reported errors. This utility must be run on a drawing by drawing basis.

**Note:**

- This utility must be run on a per drawing basis. It cannot be run on an entire plant.

**Running the Repair Relationship Indicators Utility**

1. Open a drawing in SmartPlant P&ID.
2. Select **Tools > Custom Commands** to open the **Custom Commands** dialog box.
3. Browse to the ~ *Program Installation Folder*\SmartPlant\P&ID Workstation\bin folder and double-click **RepairRelIndCmd.dll**.
4. Select the **Report** option and select **OK** to evaluate relationship indicators and generate the **RepairReport-RelIndicators.log** report in the **Temp** folder. Review the report to see any relationship indicator errors existing in the drawing.
5. If any errors exist, select the **Repair & Report** option and select **OK** to repair relationship indicators and to generate the **RepairReport-RelIndicators.log** report in the **Temp** folder. Review the report to see how each relationship indicator error was resolved.
6. Close and reopen the drawing after running this utility and before making any further modifications to the drawing.

SmartPlant P&ID Setup and Customization Course Guide307 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**Service PIDs Utility**

The Service P&IDs Utility (servicepidsexe.exe) processes all graphic connections on all the selected drawings of the active plant and reports on all relationship indicators in the graphic file and in the database. The utility can also repair broken relationship indicators. During processing, the Service P&IDs utility displays the status of the drawing being processed and writes details of the results to a log file.

**Running the Service PIDs Utility**

1. From **Drawing** **Manager** connect to the **Plant**.
2. Browse to the ~ *Program Installation Folder*\SmartPlant\P&ID Workstation\bin folder, and double-click **ServicePIDsExe.exe**.
3. Select **Show** **Drawings**, and then select **Select** **All** 4. Do one of the following:
- Select **Repair & Report** to start the reporting process and address problems found.
- Select **Report** to start the reporting process.
1. **View** the **Logfile**.

**308** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Recreating Drawings**

SmartPlant P&ID continually updates the database as you edit a drawing; however, the software does not update the drawing file until you save the file — for example, when you select **File** > **Save** or when you quit the program. Occasionally, the software may terminate in an abnormal way due to power outage. Thus, the database is up-to-date with changes that you posted to the drawing, but the drawing file reflects the status when you last saved the drawing. When you reopen the drawing, the software recognizes that the drawing file is different from the database.

The software displays a message box that states, “**One or more items in the drawing** **are inconsistent with the database. Click OK to re-create the drawing from the** **database**.”

During the recreate process, the status bar at the bottom of the main window keeps you informed about the elements currently reconciling with the database. A log file, **Recreate- *DrawingName*.log**, is created in your Temp folder. You can check this file for irregularities that occur during the re-create process.

**Warning:**

- Do not interfere with the re-create process once started because the drawing can become unusable.

After the recreate process is completed, SmartPlant P&ID reinitializes the drawing and displays the message, “**Re-create drawing is complete**.”

**Resolving a Recreate Drawing Error Condition**

If a section of the drawing could not recreate successfully an error condition appears on your drawing as a heavy line segment that is highlighted orange by default. Error conditions are almost always associated with a pipe or signal run and must be resolved manually. The heavy line segment which is highlighted orange is called a band-aided item.

SmartPlant P&ID Setup and Customization Course Guide309 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. Delete all components that are directly connected to the error condition.
2. Delete the heavy orange lines that make up the error itself.
3. Reroute your pipe or signal run and replace all connections and components.

**Forcing a Recreate of a Drawing**

1. Open the drawing that you want to recreate.
2. Place an item in the drawing.
3. Right-click an empty space on your Windows taskbar, and then select **Task** **Manager**.
4. Select the **Processes** tab.
5. In the list, select **draft.exe**.
6. Select **End Process**.
7. From Drawing Manager, open the drawing.
8. When the software prompts you that a recreate is necessary, select **OK** to recreate the drawing from the database.
9. Delete the item that you placed in step 2.
10. Save the drawing.

**Note:**

- Normally, SmartPlant P&ID recreates drawings automatically when it detects a discrepancy between the drawing and the database.

**310** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPID Analyzer**

The Smart PID Analyzer provides optional checking to make users aware of various problems that can arise when the contents of a drawing are not in harmony with the database. When enabled, a macro, SmartPIDAnalyzer, which is built in to the SmartPlant P&ID modeler, runs when a user opens or closes a drawing. The macro generates a report that informs the user of any problems found in the categories that were selected for checking.

To configure the system for checking:

1. Open Windows Registry.
2. Under HKEY_LOCAL_MACHINE, create the following registry key:

SOFTWARE\Intergraph\Applications\SmartPlantPID.Application\AnalyzerOptio ns

1. For a Windows 7 operating system, the registry key path is:

SOFTWARE\Wow6432Node\Intergraph\Applications\SmartPlantPID.Applicati

on\AnalyzerOptions

1. Set the value of AnalyzerOptions as follows to check one of the following categories:
- Unnamed linear patterns in graphics = 1
- Cross checking of RAD object and database object relationships = 2
- Bad connectors = 4

**Note:**

- To disable checking, set the value to 0; to check all the categories, set the value to 7 (1+2+4). For a combination of checks, set the value of

AnalyzerOptions to the bit sum of the individual categories, for example, to check unnamed linear patterns and bad connectors, the value of

AnalyzerOptions should be set to 5 (1+4), as shown in the example.

SmartPlant P&ID Setup and Customization Course Guide311 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

1. On opening the drawing, if a problem was found under one or more selected categories, the following message appears:
2. Select **Yes** to open the SmartpidAnalyzer.log file, which is in the user’s Temp folder.

**Note:**

- The log file is overwritten each time a drawing with an identified problem is opened. ** **

**312** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Piping Specification Utility**

The **Piping Specification Utility** (**PipeSpec**) works with PDS 3D, SmartPlant 3D, or SmartPlant Reference Data to validate the piping materials class with the temperatures, pressures, and diameters assigned to the pipe run and to search commodity codes (in all product databases) and fabrication categories (in PDS 3D

databases only) for inline piping components. The database tables and library files in the products provide source information for the validation and search. The service limits validation and automatic commodity code look-up can be disabled simultaneously using a switch in Options Manager. For more information about modifying the PipeSpec settings, see the *Options Manager User’s Guide* Topic Configure Piping Specification Settings. For more information about using the Piping Specification Utility with SmartPlant 3D, refer to the *SmartPlant P&ID*

*Installation and Upgrade Guide* for details about installing **SmartPlant 3D Piping** **Specification Remote Access Client**.

In Data Dictionary Manager, the **ValidateNomDiam.ForeignCalc** program ID, which is assigned to the **Nominal Diameter** property, starts the Piping Specification Utility and triggers the commodity code and fabrication category look-ups when a nominal diameter is changed. For more information about assigning calculation and validation IDs, see the *SmartPlant P&ID Utilities Guide* topic, Enter Required ProgIDs.

PDS 3D Files Used for PipeSpec:

**pd schema** — pdtable_102 table

**ra schema** — pdtable_201 and pdtable_202 tables

**library files** — us_pjstb.l, us_pjstb.l.r, and us_pjstb.l.t (The library file locations are listed in pdtable_102.)

**.dll files** — PipeSpec.dll, pdpjs.dll, pdpjsx.dll, and ValidateServiceLimits.dll The Piping Specification utility allows separate logon for the **ra** and **pd** schemas in the PDS 3D database.

**Notes:**

- To use the Piping Specification Utility with SmartPlant 3D, you must install the SmartPlant 3D Piping Specification Remote Access Client, which is available on the SmartPlant P&ID product CD under Prerequisite Software.
- All the displayed text strings are maintained as Visual Basic resources in the **PipeSpec.dll** file. These strings can be translated or modified as required using a resource file editor.
- When performing piping materials class validations, commodity code lookup, or validation of nominal diameter for SmartPlant 3D or SmartPlant Reference Data, the Piping Specification Utility assigns the highest revision number from the SmartPlant 3D or SmartPlant Reference Data piping materials class to the **Pipe Spec Revision** property.

SmartPlant P&ID Setup and Customization Course Guide313 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

- Error messages are placed in the PipeSpecError.log file in the folder assigned to the TEMP environment variable. Error messages help you identify the cause of failure when the utility does not complete the tasks as expected. For example, if minimum requirements are not met for the look-up, the missing properties are listed in the log file.
- The ServiceLimits.log file contains any errors encountered during the Service Limit Validation process, which runs as part of the Piping Specification Utility.

**314** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**Update Labels Utility**

The Update Labels utility updates item labels in drawings where the properties of the items were changed using automation. Without this utility, the labels on these items are not updated with the new information, and they display the old values in the drawing.

To update labels in the drawing:

1. Open a drawing in SmartPlant P&ID.
2. Select **Tools > Custom Commands**.
3. On the Custom Command dialog box, browse to ~\SmartPlant P&ID

Workstation\bin and double-click **UpdateLabelsCmd.dll**.

SmartPlant P&ID Setup and Customization Course Guide315 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant P&ID Support Utilities**

The **SmartPlant P&ID Support Utilities** include a set of utilities which can be used for administration tasks and as an alternative configuration setup for SmartPlant P&ID. Administrators should download and install a version of the **Support Utilities** which is the closest to the SmartPlant P&ID version being used.

**Note**:

- For more information on each of **Support Utilities**, please refer to the PDF

files available in the Support Utilities installation folder.

The SmartPlant P&ID Support Utilities download is available on the Smart Support website. After installation, select **Start > All Programs > Intergraph SmartPlant** **P&ID > Support Utilities** to use the following utilities:

- **Change Linked Document Source Utility -** The Change Linked Document Source updates the existing drawing attachment’s source path when the path has changed without manually opening each drawing and updating the path. The extent of the modification is dependent upon the philosophy used to store the original source attachments. This utility will open each drawing selected, update the attachment’s source path and then close the drawing. ** **
- **Configure Item Tag Utility -** This utility provides an alternate philosophy for configuration of the item tag. ** **
- **Global Report Utility -** This utility creates multiple reports based on a select set of drawings. Currently the delivered software requires the user to open each drawing and generate reports one report at a time. The automation provided by this utility will minimize the time required to generate multiple reports on multiple drawings. ** **
- **Global Symbol Replace Utility -** In SPPID, all symbols and labels are embedded instead of linked, which means if the symbol/label definition is modified, user need to replace the existing symbols/labels to update the changes. Find/Replace tool with delivered software requires user to open each drawing manually, and it can only update one symbol/label each time. The Global Symbol Replace Utility allows the P&ID user batch process multiple symbols/labels update for one or many drawings in active project. User can select to update symbol/label with origin symbol file or with different symbol file, such as replace ball valve with gate valve. Utility will open each drawing selected, then update selected symbols/labels, then close the drawing. ** **
- **Global Validation Utility -** This utility will enable the user to implement changes to a plant’s item tag configuration, 3D pipe specifications, or insulation specification as well as change the plant group association for items on a drawing.

The user will be able to select a drawing set and run the item tag validation for items such as Equipment, Piperuns, Instruments, Instrument Loops, Piping Components, and Signal Runs. It will also allow the user to optionally process items in the drawing stockpile.

**316** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

Pipe Specification and Insulation Specification validation can also be re-validated with this utility. Currently this type of change would require the user to open each drawing and modify a property included in the item tag to update the Item Tag property. The user would also need to select the calculate button on the Commodity Code property of each item to re-validate the 3D piping

specifications.

In addition, this utility will allow the user to change the plant group association for items on the selected drawing(s). This is useful if the user has moved drawings from one plantgroup to another. ** **

- **Symbol Report Utility -** Symbol Report Utility can be used to create a list of Symbols available in the SmartPlant P&ID Reference Data. The list is created in a Microsoft Excel file.

The following two utilities, **Highlight Loop Utility** and **Smart Instrument Valve** **Utility**, are delivered as a DLL file within the Support Utilities installation folder.

They are not available in the Start menu.

- **Highlight Loop Utility -** This utility will enable the user to identify all items in the drawing that are associated to the selected instrument loop. The utility will highlight the items and generate a select set of all items associated to the selected instrument loop. ** **
- **Smart Instrument Valve Utility -** This utility will provide a more integrated relationship between the instrument valve and its associated actuator. When an instrument valve is placed, the user can specify the type of actuator required. The software will then place the actuator automatically. When the actuator type of an instrument valve needs to be changed, the user can change the value of the instrument valve’s “Actuator Type” property and automatically update the graphics. If the user replaces the actuator (or deletes the actuator and places another one), the “Actuator Type” property of the instrument is updated automatically by the software. ** **

SmartPlant P&ID Setup and Customization Course Guide317 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant P&ID Timing Log**

If you observe slow performance opening drawings, the **SmartPlant P&ID Timing** **Log** may be turned on to determine the cause.

**Notes**:

- Please be aware turning timing on may SLOW down performance due to the amount of data being written to the log file.
- Timing should only be turned on when advised by the SmartPlant P&ID

Support team. Most of the information reported in the log file will not aid the ordinary P&ID users; you would need to step through the code for this information to be of use.

- Once you provide the SmartPlant P&ID Support team with the log file, please backup your registry and turn OFF the timing log by deleting the two registry keys which were added.
1. Add a **New Key** called **Debug** within **HKEY_LOCAL_MACHINE >** **SOFTWARE > Intergraph**
2. Add two new keys (**LogMessageFileName** and **LogMessageLevel**)within **HKEY_LOCAL_MACHINE > SOFTWARE > Intergraph > Debug**
3. Select the **LogMessageFileName**, select **Default**, right mouse, modify and set the Value data = c:\temp\SmartPlantTiming.log

**318** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

1. Select the **LogMessageLevel**, select **Default**, right mouse, modify and set the Value data = 1

SmartPlant P&ID Setup and Customization Course Guide319 *** ***

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant Engineering Manager Debug**

**Mode**

If you experience any problems while working in SmartPlant Engineering Manager when creating plants, performing backups, creating hierarchies, etc., you can use the debug mode of SmartPlant Engineering Manager to obtain more information about the problems.

1. To implement the debug mode, right-click on the SmartPlant Engineering Manager icon and select Properties. In the properties dialog, modify the target line to include /DlgDbg /DebugLevel=0
2. The log file is generated within %temp%\%username% folder\spem***.log.

Sometimes, a **DlgBld.log** file will be generated at same location also.

**320** * SmartPlant P&ID Setup and Customization Course Guide *

- 
    - 

*SmartPlant P&ID Setup and Customization Course Guide*

**SmartPlant Reference Data Synchronization**

**Manager Debug Mode**

If you experience any problems while working in RDS Manager when compare the package to the target plant, you can use the debug mode of RDS Manager to obtain more information about the problems by setting up a user environment variable to turn on the debug mode.

1. Set user environment variable (DdCompareDebug = 1)
2. The log file is generated within %temp%\%username% folder\spem***.log 3. For example, the following message will be logged so you can know which item gives error and why:

DdtCodelistEntry.cls::LastErrorMessage- INFO: Conflicting codelist

codelist_text(F2) for enumeration(SupplyResponsibility). Source index: 10006, Target index: 10005

SmartPlant P&ID Setup and Customization Course Guide321 *** ***

*SmartPlant P&ID Setup and Customization Course Guide* **Do’s and Don’ts of SmartPlant P&ID**

**Do’s of SmartPlant P&ID**

1. Open drawings from SmartPlant P&ID rather than Drawing Manager to minimize the number of Oracle connections. It helps with performance.
2. If using connected workshare, opening drawings from MRU list of SmartPlant P&ID

goes to the replication schema rather than going across the DBLink. It helps with performance.

1. Rename or delete the SmartPlantPID.log file on the desktop periodically so a new one can be generated instead of working with a large log file.
2. Perform nightly backups of each plant from SmartPlant Engineering Manager, and validate the backup files to make sure they are running; especially the first time.
3. Perform nightly incremental versioning of drawings.
4. Once a week, run the Clean Data Utility and Database Constraint Report.
5. Run the Clean Data Utility and Database Constraint Report before enabling projects for a plant.

**Don’ts of SmartPlant P&ID**

1. Don’t share reference data among the different plants.
2. Don’t set the backup location under the plant structure folder.
3. Don’t set the backup location on same server with the database (database server).
4. When using Reference Data Synchronization Manager to synchronize the RDB

between two plants, don’t modify RDB on both plants; only modify one plant and use as a master. The other plant gets the new RDB through Reference Data Synchronization Manager.

1. Don’t turn on Snap Grid when placing nozzles or piping components unless a very small grid density is set, such as 0.04 in instead of 0.25 in.
2. Don’t work on a drawing when placement automation is running.

**322** * SmartPlant P&ID Setup and Customization Course Guide *